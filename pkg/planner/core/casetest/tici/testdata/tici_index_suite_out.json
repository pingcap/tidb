[
  {
    "Name": "TestTiCISearchExplain",
    "Cases": [
      {
        "SQL": "explain format='brief' select * from t1 where fts_match_word('hello', title)",
        "Plan": [
          "IndexLookUp 1000.00 root  ",
          "├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "└─TableRowIDScan(Probe) 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select * from t1 where fts_match_prefix('hello', title)",
        "Plan": [
          "IndexLookUp 1000.00 root  ",
          "├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_prefix(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "└─TableRowIDScan(Probe) 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select id from t1 where fts_match_word('hello', title)",
        "Plan": [
          "Projection 10000.00 root  test.t1.id",
          "└─IndexLookUp 1000.00 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─TableRowIDScan(Probe) 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select * from t1 where fts_match_word('hello', title) AND id > 10",
        "Plan": [
          "IndexLookUp 3333.33 root  ",
          "├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "└─Selection(Probe) 3333.33 cop[tikv]  gt(test.t1.id, 10)",
          "  └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select * from t1 where fts_match_word('hello', title) AND id > 10 AND LENGTH(title) > 1",
        "Plan": [
          "IndexLookUp 2666.67 root  ",
          "├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "└─Selection(Probe) 2666.67 cop[tikv]  gt(length(test.t1.title), 1), gt(test.t1.id, 10)",
          "  └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select title from t1 where fts_match_word('hello', title) AND id > 10 AND LENGTH(title) > 1",
        "Plan": [
          "Projection 2666.67 root  test.t1.title",
          "└─IndexLookUp 2666.67 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─Selection(Probe) 2666.67 cop[tikv]  gt(length(test.t1.title), 1), gt(test.t1.id, 10)",
          "    └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select count(id) from t1 where fts_match_word('hello', title)",
        "Plan": [
          "HashAgg 1.00 root  funcs:count(Column#6)->Column#5",
          "└─IndexLookUp 1.00 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─HashAgg(Probe) 1.00 cop[tikv]  funcs:count(test.t1.id)->Column#6",
          "    └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select count(*) from t1 where fts_match_word('hello', title)",
        "Plan": [
          "HashAgg 1.00 root  funcs:count(Column#7)->Column#5",
          "└─IndexLookUp 1.00 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─HashAgg(Probe) 1.00 cop[tikv]  funcs:count(1)->Column#7",
          "    └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select id from t1 where fts_match_word('hello', title)",
        "Plan": [
          "Projection 10000.00 root  test.t1.id",
          "└─IndexLookUp 1000.00 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─TableRowIDScan(Probe) 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select id from t1 where fts_match_word('hello', title) AND id > 10",
        "Plan": [
          "Projection 3333.33 root  test.t1.id",
          "└─IndexLookUp 3333.33 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─Selection(Probe) 3333.33 cop[tikv]  gt(test.t1.id, 10)",
          "    └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select id from t1 where fts_match_word('hello', title) AND LENGTH(body) > 10",
        "Plan": [
          "Projection 8000.00 root  test.t1.id",
          "└─IndexLookUp 8000.00 root  ",
          "  ├─IndexRangeScan(Build) 1000.00 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─Selection(Probe) 8000.00 cop[tikv]  gt(length(test.t1.body), 10)",
          "    └─TableRowIDScan 1000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select * from t1 where fts_match_word('hello', title) limit 1",
        "Plan": [
          "Limit 1.00 root  offset:0, count:1",
          "└─IndexLookUp 0.10 root  ",
          "  ├─IndexRangeScan(Build) 0.10 batchCop[tiflash] table:t1, index:title(title) range:[NULL,+inf], search func:fts_match_word(\"hello\", test.t1.title), keep order:false, stats:pseudo",
          "  └─Limit(Probe) 0.10 cop[tikv]  offset:0, count:1",
          "    └─TableRowIDScan 0.10 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": null
      },
      {
        "SQL": "explain format='brief' select /*+ inl_join(t1) */ * from t1, t2 where t2.col=t1.title",
        "Plan": [
          "HashJoin 12487.50 root  inner join, equal:[eq(test.t1.title, test.t2.col)]",
          "├─TableReader(Build) 9990.00 root  data:Selection",
          "│ └─Selection 9990.00 cop[tikv]  not(isnull(test.t2.col))",
          "│   └─TableFullScan 10000.00 cop[tikv] table:t2 keep order:false, stats:pseudo",
          "└─TableReader(Probe) 9990.00 root  MppVersion: 3, data:ExchangeSender",
          "  └─ExchangeSender 9990.00 mpp[tiflash]  ExchangeType: PassThrough",
          "    └─Selection 9990.00 mpp[tiflash]  not(isnull(test.t1.title))",
          "      └─TableFullScan 10000.00 mpp[tiflash] table:t1 keep order:false, stats:pseudo"
        ],
        "Warn": [
          "[planner:1815]Optimizer Hint /*+ INL_JOIN(t1) */ or /*+ TIDB_INLJ(t1) */ is inapplicable"
        ]
      }
    ]
  }
]
