[
  {
    "Name": "TestJSONPlanInExplain",
    "Cases": [
      {
        "SQL": "explain format = tidb_json update t2 set id = 1 where id =2",
        "JSONPlan": [
          {
            "id": "Update_4",
            "estRows": "N/A",
            "taskType": "root",
            "operatorInfo": "N/A",
            "subOperators": [
              {
                "id": "IndexReader_8",
                "estRows": "10.00",
                "taskType": "root",
                "operatorInfo": "index:IndexRangeScan_7",
                "subOperators": [
                  {
                    "id": "IndexRangeScan_7",
                    "estRows": "10.00",
                    "taskType": "cop[tikv]",
                    "accessObject": "table:t2, index:id(id)",
                    "operatorInfo": "range:[2,2], keep order:false, stats:pseudo"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json insert into t1 values(1)",
        "JSONPlan": [
          {
            "id": "Insert_1",
            "estRows": "N/A",
            "taskType": "root",
            "operatorInfo": "N/A"
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json select count(*) from t1",
        "JSONPlan": [
          {
            "id": "HashAgg_14",
            "estRows": "1.00",
            "taskType": "root",
            "operatorInfo": "funcs:count(Column#6)->Column#4",
            "subOperators": [
              {
                "id": "IndexReader_15",
                "estRows": "1.00",
                "taskType": "root",
                "operatorInfo": "index:HashAgg_6",
                "subOperators": [
                  {
                    "id": "HashAgg_6",
                    "estRows": "1.00",
                    "taskType": "cop[tikv]",
                    "operatorInfo": "funcs:count(1)->Column#6",
                    "subOperators": [
                      {
                        "id": "IndexFullScan_13",
                        "estRows": "10000.00",
                        "taskType": "cop[tikv]",
                        "accessObject": "table:t1, index:id(id)",
                        "operatorInfo": "keep order:false, stats:pseudo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json select * from t1",
        "JSONPlan": [
          {
            "id": "IndexReader_8",
            "estRows": "10000.00",
            "taskType": "root",
            "operatorInfo": "index:IndexFullScan_7",
            "subOperators": [
              {
                "id": "IndexFullScan_7",
                "estRows": "10000.00",
                "taskType": "cop[tikv]",
                "accessObject": "table:t1, index:id(id)",
                "operatorInfo": "keep order:false, stats:pseudo"
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain analyze format = tidb_json select * from t1, t2 where t1.id = t2.id",
        "JSONPlan": [
          {
            "id": "MergeJoin_10",
            "estRows": "12487.50",
            "actRows": "0",
            "taskType": "root",
            "executeInfo": "time:305.6µs, open:61.9µs, close:7.28µs, loops:1",
            "operatorInfo": "inner join, left key:test.t1.id, right key:test.t2.id",
            "memoryInfo": "760 Bytes",
            "diskInfo": "0 Bytes",
            "subOperators": [
              {
                "id": "IndexReader_28(Build)",
                "estRows": "9990.00",
                "actRows": "0",
                "taskType": "root",
                "executeInfo": "time:160.2µs, open:17.4µs, close:1.47µs, loops:1, cop_task: {num: 1, max: 103.7µs, proc_keys: 0, copr_cache_hit_ratio: 0.00, build_task_duration: 2.18µs, max_distsql_concurrency: 1}, fetch_resp_duration: 128.4µs, rpc_info:{Cop:{num_rpc:1, total_time:92.3µs}}",
                "operatorInfo": "index:IndexFullScan_27",
                "memoryInfo": "182 Bytes",
                "diskInfo": "N/A",
                "subOperators": [
                  {
                    "id": "IndexFullScan_27",
                    "estRows": "9990.00",
                    "actRows": "0",
                    "taskType": "cop[tikv]",
                    "accessObject": "table:t2, index:id(id)",
                    "executeInfo": "tikv_task:{time:77.5µs, loops:0}",
                    "operatorInfo": "keep order:true, stats:pseudo",
                    "memoryInfo": "N/A",
                    "diskInfo": "N/A"
                  }
                ]
              },
              {
                "id": "IndexReader_26(Probe)",
                "estRows": "9990.00",
                "actRows": "0",
                "taskType": "root",
                "executeInfo": "time:118.8µs, open:26.3µs, close:2.8µs, loops:1, cop_task: {num: 1, max: 75.8µs, proc_keys: 0, copr_cache_hit_ratio: 0.00, build_task_duration: 9.21µs, max_distsql_concurrency: 1}, fetch_resp_duration: 85.7µs, rpc_info:{Cop:{num_rpc:1, total_time:65.3µs}}",
                "operatorInfo": "index:IndexFullScan_25",
                "memoryInfo": "182 Bytes",
                "diskInfo": "N/A",
                "subOperators": [
                  {
                    "id": "IndexFullScan_25",
                    "estRows": "9990.00",
                    "actRows": "0",
                    "taskType": "cop[tikv]",
                    "accessObject": "table:t1, index:id(id)",
                    "executeInfo": "tikv_task:{time:54µs, loops:0}",
                    "operatorInfo": "keep order:true, stats:pseudo",
                    "memoryInfo": "N/A",
                    "diskInfo": "N/A"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "Name": "TestJSONPlanInExplainForNextGen",
    "Cases": [
      {
        "SQL": "explain format = tidb_json update t2 set id = 1 where id =2",
        "JSONPlan": [
          {
            "id": "Update_5",
            "estRows": "N/A",
            "taskType": "root",
            "operatorInfo": "N/A",
            "subOperators": [
              {
                "id": "SelectLock_8",
                "estRows": "10.00",
                "taskType": "root",
                "operatorInfo": "for update 0",
                "subOperators": [
                  {
                    "id": "IndexReader_10",
                    "estRows": "10.00",
                    "taskType": "root",
                    "operatorInfo": "index:IndexRangeScan_9",
                    "subOperators": [
                      {
                        "id": "IndexRangeScan_9",
                        "estRows": "10.00",
                        "taskType": "cop[tikv]",
                        "accessObject": "table:t2, index:id(id)",
                        "operatorInfo": "range:[2,2], keep order:false, stats:pseudo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json insert into t1 values(1)",
        "JSONPlan": [
          {
            "id": "Insert_1",
            "estRows": "N/A",
            "taskType": "root",
            "operatorInfo": "N/A"
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json select count(*) from t1",
        "JSONPlan": [
          {
            "id": "HashAgg_14",
            "estRows": "1.00",
            "taskType": "root",
            "operatorInfo": "funcs:count(Column#6)->Column#4",
            "subOperators": [
              {
                "id": "IndexReader_15",
                "estRows": "1.00",
                "taskType": "root",
                "operatorInfo": "index:HashAgg_6",
                "subOperators": [
                  {
                    "id": "HashAgg_6",
                    "estRows": "1.00",
                    "taskType": "cop[tikv]",
                    "operatorInfo": "funcs:count(1)->Column#6",
                    "subOperators": [
                      {
                        "id": "IndexFullScan_13",
                        "estRows": "10000.00",
                        "taskType": "cop[tikv]",
                        "accessObject": "table:t1, index:id(id)",
                        "operatorInfo": "keep order:false, stats:pseudo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain format = tidb_json select * from t1",
        "JSONPlan": [
          {
            "id": "IndexReader_8",
            "estRows": "10000.00",
            "taskType": "root",
            "operatorInfo": "index:IndexFullScan_7",
            "subOperators": [
              {
                "id": "IndexFullScan_7",
                "estRows": "10000.00",
                "taskType": "cop[tikv]",
                "accessObject": "table:t1, index:id(id)",
                "operatorInfo": "keep order:false, stats:pseudo"
              }
            ]
          }
        ]
      },
      {
        "SQL": "explain analyze format = tidb_json select * from t1, t2 where t1.id = t2.id",
        "JSONPlan": [
          {
            "id": "MergeJoin_10",
            "estRows": "12487.50",
            "actRows": "0",
            "taskType": "root",
            "executeInfo": "time:258.9µs, open:58.8µs, close:4.79µs, loops:1",
            "operatorInfo": "inner join, left key:test.t1.id, right key:test.t2.id",
            "memoryInfo": "760 Bytes",
            "diskInfo": "0 Bytes",
            "subOperators": [
              {
                "id": "IndexReader_28(Build)",
                "estRows": "9990.00",
                "actRows": "0",
                "taskType": "root",
                "executeInfo": "time:127.6µs, open:18.6µs, close:208ns, loops:1, cop_task: {num: 1, max: 74.1µs, proc_keys: 0, copr_cache_hit_ratio: 0.00, build_task_duration: 3.46µs, max_distsql_concurrency: 1}, fetch_resp_duration: 95.5µs, rpc_info:{Cop:{num_rpc:1, total_time:69.9µs}}",
                "operatorInfo": "index:IndexFullScan_27",
                "memoryInfo": "182 Bytes",
                "diskInfo": "N/A",
                "subOperators": [
                  {
                    "id": "IndexFullScan_27",
                    "estRows": "9990.00",
                    "actRows": "0",
                    "taskType": "cop[tikv]",
                    "accessObject": "table:t2, index:id(id)",
                    "executeInfo": "tikv_task:{time:59.3µs, loops:0}",
                    "operatorInfo": "keep order:true, stats:pseudo",
                    "memoryInfo": "N/A",
                    "diskInfo": "N/A"
                  }
                ]
              },
              {
                "id": "IndexReader_26(Probe)",
                "estRows": "9990.00",
                "actRows": "0",
                "taskType": "root",
                "executeInfo": "time:106.8µs, open:20.7µs, close:2.13µs, loops:1, cop_task: {num: 1, max: 77.1µs, proc_keys: 0, copr_cache_hit_ratio: 0.00, build_task_duration: 2.21µs, max_distsql_concurrency: 1}, fetch_resp_duration: 81.8µs, rpc_info:{Cop:{num_rpc:1, total_time:73.8µs}}",
                "operatorInfo": "index:IndexFullScan_25",
                "memoryInfo": "182 Bytes",
                "diskInfo": "N/A",
                "subOperators": [
                  {
                    "id": "IndexFullScan_25",
                    "estRows": "9990.00",
                    "actRows": "0",
                    "taskType": "cop[tikv]",
                    "accessObject": "table:t1, index:id(id)",
                    "executeInfo": "tikv_task:{time:67.8µs, loops:0}",
                    "operatorInfo": "keep order:true, stats:pseudo",
                    "memoryInfo": "N/A",
                    "diskInfo": "N/A"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
