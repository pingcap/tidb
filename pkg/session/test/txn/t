=== RUN   TestGetTsoSlow
[2024/09/14 15:30:19.331 +08:00] [INFO] [store_cache.go:532] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2024/09/14 15:30:19.331 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.331 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.332 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.332 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.332 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(65535) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.332 +08:00] [INFO] [tidb.go:85] ["new domain"] [store=846004d3-c62f-480e-8db2-8523a1bacef6] ["ddl lease"=500ms] ["stats lease"=-1ns]
[2024/09/14 15:30:19.335 +08:00] [WARN] [controller.go:215] ["[resource group controller] server does not save config, load config failed"]
[2024/09/14 15:30:19.335 +08:00] [INFO] [controller.go:199] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/14 15:30:19.335 +08:00] [WARN] [domain.go:303] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:412\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).loadInfoSchema\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:301\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).Reload\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:744\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).Init\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:1426\ngithub.com/pingcap/tidb/pkg/session.(*domainMap).Get.func1\n\t/home/guojiangtao/work/tidb/pkg/session/tidb.go:97\ngithub.com/pingcap/tidb/pkg/util.RunWithRetry\n\t/home/guojiangtao/work/tidb/pkg/util/misc.go:70\ngithub.com/pingcap/tidb/pkg/session.(*domainMap).Get\n\t/home/guojiangtao/work/tidb/pkg/session/tidb.go:84\ngithub.com/pingcap/tidb/pkg/session.createSessionWithOpt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:3740\ngithub.com/pingcap/tidb/pkg/session.createSession\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:3732\ngithub.com/pingcap/tidb/pkg/session.runInBootstrapSession\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:3676\ngithub.com/pingcap/tidb/pkg/session.bootstrapSessionImpl\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:3443\ngithub.com/pingcap/tidb/pkg/session.BootstrapSession\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:3393\ngithub.com/pingcap/tidb/pkg/testkit.bootstrap\n\t/home/guojiangtao/work/tidb/pkg/testkit/mockstore.go:254\ngithub.com/pingcap/tidb/pkg/testkit.CreateMockStoreAndDomain\n\t/home/guojiangtao/work/tidb/pkg/testkit/mockstore.go:225\ngithub.com/pingcap/tidb/pkg/session/test/txn.TestGetTsoSlow\n\t/home/guojiangtao/work/tidb/pkg/session/test/txn/txn_test.go:515\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1690\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [version=0]
[2024/09/14 15:30:19.336 +08:00] [INFO] [domain.go:386] ["full load InfoSchema success"] [isV2=false] [currentSchemaVersion=0] [neededSchemaVersion=0] ["elapsed time"=906.441µs]
[2024/09/14 15:30:19.336 +08:00] [INFO] [domain.go:773] ["full load and reset schema validator"]
[2024/09/14 15:30:19.336 +08:00] [INFO] [ddl.go:715] ["start DDL"] [category=ddl] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c] [runWorker=true]
[2024/09/14 15:30:19.336 +08:00] [INFO] [ddl.go:704] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2024/09/14 15:30:19.336 +08:00] [INFO] [delete_range.go:172] ["start delRange emulator"] [category=ddl]
[2024/09/14 15:30:19.336 +08:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/14 15:30:19.336 +08:00] [INFO] [mock.go:89] ["owner manager gets owner"] [ownerKey=/tidb/ddl/fg/owner] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c]
[2024/09/14 15:30:19.336 +08:00] [WARN] [env.go:60] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/14 15:30:19.336 +08:00] [WARN] [domain.go:1518] ["pd / etcd client not provided, won't begin Advancer."]
[2024/09/14 15:30:19.336 +08:00] [INFO] [runaway.go:149] ["try to start runaway manager loop"]
[2024/09/14 15:30:19.336 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/14 15:30:19.336 +08:00] [INFO] [job_scheduler.go:342] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/14 15:30:19.336 +08:00] [INFO] [job_scheduler.go:354] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/14 15:30:19.336 +08:00] [WARN] [domain.go:303] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:412\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).loadInfoSchema\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:301\ngithub.com/pingcap/tidb/pkg/domain.(*Domain).Reload\n\t/home/guojiangtao/work/tidb/pkg/domain/domain.go:744\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).mustReloadSchemas\n\t/home/guojiangtao/work/tidb/pkg/ddl/job_scheduler.go:437\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).schedule\n\t/home/guojiangtao/work/tidb/pkg/ddl/job_scheduler.go:283\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).scheduleLoop\n\t/home/guojiangtao/work/tidb/pkg/ddl/job_scheduler.go:248\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithLog.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:171\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [version=0]
[2024/09/14 15:30:19.336 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2024/09/14 15:30:19.337 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.337 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2024/09/14 15:30:19.338 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.339 +08:00] [INFO] [domain.go:386] ["full load InfoSchema success"] [isV2=false] [currentSchemaVersion=0] [neededSchemaVersion=1] ["elapsed time"=864.196µs]
[2024/09/14 15:30:19.339 +08:00] [INFO] [domain.go:773] ["full load and reset schema validator"]
[2024/09/14 15:30:19.339 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.340 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=3] [version=1]
[2024/09/14 15:30:19.340 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=2.171113ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.341 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.342 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=3]
[2024/09/14 15:30:19.342 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2024/09/14 15:30:19.342 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2024/09/14 15:30:19.344 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.344 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2024/09/14 15:30:19.344 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=5] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.347 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=1] [neededSchemaVersion=2] ["elapsed time"=281.524µs] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.347 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.347 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=5] [version=2]
[2024/09/14 15:30:19.349 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=2.157414ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.350 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=5] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.351 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=5]
[2024/09/14 15:30:19.352 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2024/09/14 15:30:19.352 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.352 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2024/09/14 15:30:19.353 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=7] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.354 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=2] [neededSchemaVersion=3] ["elapsed time"=66.467µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.354 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.354 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=7] [version=3]
[2024/09/14 15:30:19.356 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=2.736416ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.357 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=7] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.352 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.358 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=7]
[2024/09/14 15:30:19.358 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2024/09/14 15:30:19.358 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.358 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.358 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.358 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2024/09/14 15:30:19.359 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=9] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.358 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.360 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=3] [neededSchemaVersion=4] ["elapsed time"=53.348µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.360 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.360 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=9] [version=4]
[2024/09/14 15:30:19.362 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=2.018139ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.358 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.362 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=9] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.358 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.363 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=9]
[2024/09/14 15:30:19.363 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2024/09/14 15:30:19.364 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.364 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2024/09/14 15:30:19.365 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.366 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=4] [neededSchemaVersion=5] ["elapsed time"=167.085µs] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.366 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.366 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=11] [version=5]
[2024/09/14 15:30:19.368 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=2.105291ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.369 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.363 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.370 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=11]
[2024/09/14 15:30:19.370 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2024/09/14 15:30:19.371 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.371 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.371 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.371 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2024/09/14 15:30:19.372 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=13] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.371 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.373 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=5] [neededSchemaVersion=6] ["elapsed time"=140.632µs] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.374 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.374 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=13] [version=6]
[2024/09/14 15:30:19.375 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=2.303754ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.371 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.376 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=13] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.371 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.378 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=13]
[2024/09/14 15:30:19.378 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2024/09/14 15:30:19.379 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.379 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2024/09/14 15:30:19.380 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=15] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.381 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=6] [neededSchemaVersion=7] ["elapsed time"=111.727µs] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.381 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.381 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=15] [version=7]
[2024/09/14 15:30:19.383 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=2.206322ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.383 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=15] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.379 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.385 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=15]
[2024/09/14 15:30:19.385 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(16383) DEFAULT NULL);"] [user=]
[2024/09/14 15:30:19.386 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.385 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.386 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.385 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(16383) DEFAULT NULL);"]
[2024/09/14 15:30:19.386 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=17] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.385 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.387 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=7] [neededSchemaVersion=8] ["elapsed time"=84.478µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.388 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.388 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=17] [version=8]
[2024/09/14 15:30:19.389 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=2.035113ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.385 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.391 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=17] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.385 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.392 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=17]
[2024/09/14 15:30:19.392 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2024/09/14 15:30:19.393 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.393 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2024/09/14 15:30:19.394 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=19] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.395 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=8] [neededSchemaVersion=9] ["elapsed time"=80.014µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.395 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.395 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=19] [version=9]
[2024/09/14 15:30:19.398 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=2.793609ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.398 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=19] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.400 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=19]
[2024/09/14 15:30:19.400 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2024/09/14 15:30:19.402 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.402 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2024/09/14 15:30:19.403 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=21] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.404 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=9] [neededSchemaVersion=10] ["elapsed time"=145.252µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.405 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.405 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=21] [version=10]
[2024/09/14 15:30:19.407 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=3.046864ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.408 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=21] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.410 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=21]
[2024/09/14 15:30:19.410 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2024/09/14 15:30:19.412 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.412 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2024/09/14 15:30:19.412 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.413 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=10] [neededSchemaVersion=11] ["elapsed time"=103.853µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.414 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.414 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=23] [version=11]
[2024/09/14 15:30:19.416 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=2.632093ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.417 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.418 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=23]
[2024/09/14 15:30:19.418 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/14 15:30:19.418 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.420 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.419 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.420 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.419 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/14 15:30:19.421 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=25] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.419 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.422 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=11] [neededSchemaVersion=12] ["elapsed time"=211.576µs] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.423 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.423 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=25] [version=12]
[2024/09/14 15:30:19.425 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=2.998169ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.419 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.426 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=25] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.419 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.429 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=25]
[2024/09/14 15:30:19.429 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2024/09/14 15:30:19.431 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.431 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2024/09/14 15:30:19.432 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=27] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.434 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=12] [neededSchemaVersion=13] ["elapsed time"=268.382µs] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.435 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.435 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=27] [version=13]
[2024/09/14 15:30:19.437 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=2.927226ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.439 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=27] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.441 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=27]
[2024/09/14 15:30:19.442 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2024/09/14 15:30:19.443 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.443 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2024/09/14 15:30:19.444 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=29] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.446 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=13] [neededSchemaVersion=14] ["elapsed time"=243.752µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.447 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.447 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=29] [version=14]
[2024/09/14 15:30:19.449 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=2.572816ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.452 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=29] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.442 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.457 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=29]
[2024/09/14 15:30:19.457 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2024/09/14 15:30:19.461 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.461 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2024/09/14 15:30:19.463 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.465 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=14] [neededSchemaVersion=15] ["elapsed time"=243.49µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.466 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.466 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=31] [version=15]
[2024/09/14 15:30:19.467 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=2.159333ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.469 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.471 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=31]
[2024/09/14 15:30:19.471 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/14 15:30:19.473 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.473 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2024/09/14 15:30:19.474 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=33] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.475 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=15] [neededSchemaVersion=16] ["elapsed time"=110.208µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.476 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.476 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=33] [version=16]
[2024/09/14 15:30:19.478 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=2.582266ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.479 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=33] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.480 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=33]
[2024/09/14 15:30:19.481 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2024/09/14 15:30:19.482 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.481 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.482 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.481 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2024/09/14 15:30:19.482 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=35] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.481 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.483 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=16] [neededSchemaVersion=17] ["elapsed time"=134.315µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.484 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.484 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=35] [version=17]
[2024/09/14 15:30:19.486 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=2.998358ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.481 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.488 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=35] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.481 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.490 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=35]
[2024/09/14 15:30:19.490 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2024/09/14 15:30:19.492 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.492 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2024/09/14 15:30:19.492 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=37] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.494 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=17] [neededSchemaVersion=18] ["elapsed time"=90.821µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.495 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.495 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=37] [version=18]
[2024/09/14 15:30:19.497 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=2.859529ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.497 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=37] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.498 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=37]
[2024/09/14 15:30:19.498 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/14 15:30:19.499 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.499 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/14 15:30:19.500 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=39] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.501 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=18] [neededSchemaVersion=19] ["elapsed time"=152.604µs] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.502 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.502 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=39] [version=19]
[2024/09/14 15:30:19.504 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=2.73631ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.504 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=39] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.506 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=39]
[2024/09/14 15:30:19.507 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/14 15:30:19.507 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.507 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.507 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.507 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/14 15:30:19.508 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=41] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.507 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.509 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=19] [neededSchemaVersion=20] ["elapsed time"=85.876µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.509 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.509 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=41] [version=20]
[2024/09/14 15:30:19.511 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=2.595683ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.507 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.512 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=41] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.507 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.513 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=41]
[2024/09/14 15:30:19.513 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2024/09/14 15:30:19.514 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.514 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2024/09/14 15:30:19.514 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.515 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=20] [neededSchemaVersion=21] ["elapsed time"=84.588µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.516 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.516 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=43] [version=21]
[2024/09/14 15:30:19.517 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=2.056977ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.518 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.513 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.519 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=43]
[2024/09/14 15:30:19.519 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2024/09/14 15:30:19.520 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.52 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.520 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.52 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2024/09/14 15:30:19.520 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=45] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.52 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.521 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=21] [neededSchemaVersion=22] ["elapsed time"=46.348µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.522 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.522 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=45] [version=22]
[2024/09/14 15:30:19.524 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=2.328799ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.52 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.524 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=45] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.52 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.525 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=45]
[2024/09/14 15:30:19.525 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2024/09/14 15:30:19.526 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.525 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.526 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.525 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2024/09/14 15:30:19.526 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=47] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.525 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.527 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=22] [neededSchemaVersion=23] ["elapsed time"=95.415µs] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.527 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.527 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=47] [version=23]
[2024/09/14 15:30:19.529 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=2.129396ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.525 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.530 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=47] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.525 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.533 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=47]
[2024/09/14 15:30:19.533 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2024/09/14 15:30:19.535 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.535 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.535 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.535 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2024/09/14 15:30:19.536 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=49] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.535 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.537 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=23] [neededSchemaVersion=24] ["elapsed time"=83.645µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.537 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.537 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=49] [version=24]
[2024/09/14 15:30:19.540 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=2.97514ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.535 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.541 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=49] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.535 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.542 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=49]
[2024/09/14 15:30:19.542 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2024/09/14 15:30:19.543 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.542 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.543 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.542 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2024/09/14 15:30:19.543 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.542 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.545 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=24] [neededSchemaVersion=25] ["elapsed time"=77.189µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.545 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.545 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=51] [version=25]
[2024/09/14 15:30:19.547 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=2.658938ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.542 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.548 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.542 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.549 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=51]
[2024/09/14 15:30:19.549 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2024/09/14 15:30:19.550 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.55 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.550 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.55 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2024/09/14 15:30:19.551 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=53] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.55 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.551 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=25] [neededSchemaVersion=26] ["elapsed time"=59.072µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.552 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.552 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=53] [version=26]
[2024/09/14 15:30:19.553 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=2.270558ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.55 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.554 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=53] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.55 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.555 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=53]
[2024/09/14 15:30:19.555 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2024/09/14 15:30:19.558 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.558 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2024/09/14 15:30:19.560 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=55] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.561 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=26] [neededSchemaVersion=27] ["elapsed time"=67.672µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.561 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.561 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=55] [version=27]
[2024/09/14 15:30:19.563 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=2.59725ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.564 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=55] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.565 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=55]
[2024/09/14 15:30:19.565 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2024/09/14 15:30:19.566 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.565 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.566 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.565 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2024/09/14 15:30:19.567 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=57] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.565 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.568 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=27] [neededSchemaVersion=28] ["elapsed time"=65.034µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.569 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.569 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=57] [version=28]
[2024/09/14 15:30:19.571 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=2.649849ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.565 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.572 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=57] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.565 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.573 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=57]
[2024/09/14 15:30:19.573 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2024/09/14 15:30:19.573 +08:00] [INFO] [add_column.go:1278] ["Automatically convert BLOB(19372) to MEDIUMBLOB"] [category=ddl]
[2024/09/14 15:30:19.574 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.574 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2024/09/14 15:30:19.575 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=59] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.576 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=28] [neededSchemaVersion=29] ["elapsed time"=102.261µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.576 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.576 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=59] [version=29]
[2024/09/14 15:30:19.578 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=2.558365ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.579 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=59] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.581 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=59]
[2024/09/14 15:30:19.581 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2024/09/14 15:30:19.583 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.583 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2024/09/14 15:30:19.583 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=61] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.585 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=29] [neededSchemaVersion=30] ["elapsed time"=174.523µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.586 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.586 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=61] [version=30]
[2024/09/14 15:30:19.587 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=2.073243ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.588 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=61] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.590 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=61]
[2024/09/14 15:30:19.590 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2024/09/14 15:30:19.593 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.593 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2024/09/14 15:30:19.594 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.596 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=30] [neededSchemaVersion=31] ["elapsed time"=206.778µs] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.597 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.597 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=63] [version=31]
[2024/09/14 15:30:19.599 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=2.440735ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.600 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.603 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=63]
[2024/09/14 15:30:19.604 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2024/09/14 15:30:19.606 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.607 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2024/09/14 15:30:19.608 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=65] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.611 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=31] [neededSchemaVersion=32] ["elapsed time"=363.955µs] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.612 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.612 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=65] [version=32]
[2024/09/14 15:30:19.613 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=2.321112ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.615 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=65] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.617 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=65]
[2024/09/14 15:30:19.617 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2024/09/14 15:30:19.620 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.619 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.620 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.619 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2024/09/14 15:30:19.621 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=67] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.619 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.625 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=32] [neededSchemaVersion=33] ["elapsed time"=193.962µs] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.626 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.626 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=67] [version=33]
[2024/09/14 15:30:19.627 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=2.17953ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.619 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.628 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=67] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.619 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.631 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=67]
[2024/09/14 15:30:19.635 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.635 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE OR REPLACE SQL SECURITY INVOKER VIEW mysql.tidb_mdl_view as (\n\t\tSELECT tidb_mdl_info.job_id,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.schema_name\")) as db_name,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.table_name\")) as table_name,\n\t\t\tJSON_UNQUOTE(JSON_EXTRACT(cast(cast(job_meta as char) as json), \"$.query\")) as query,\n\t\t\tsession_id,\n\t\t\tcluster_tidb_trx.start_time,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM mysql.tidb_ddl_job,\n\t\t\tmysql.tidb_mdl_info,\n\t\t\tinformation_schema.cluster_tidb_trx\n\t\tWHERE tidb_ddl_job.job_id=tidb_mdl_info.job_id\n\t\t\tAND CONCAT(',', tidb_mdl_info.table_ids, ',') REGEXP CONCAT(',(', REPLACE(cluster_tidb_trx.related_table_ids, ',', '|'), '),') != 0\n\t);"]
[2024/09/14 15:30:19.637 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=69] [category=ddl] [job="ID:69, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.642 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=33] [neededSchemaVersion=34] ["elapsed time"=375.896µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[21]"] [diffTypes="[\"create view\"]"]
[2024/09/14 15:30:19.643 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.643 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=69] [version=34]
[2024/09/14 15:30:19.644 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=2.279416ms] [job="ID:69, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.646 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=69] [job="ID:69, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.648 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=69]
[2024/09/14 15:30:19.649 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=34] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2024/09/14 15:30:19.650 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.65 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.650 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.65 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2024/09/14 15:30:19.652 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [category=ddl] [job="ID:71, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.65 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.653 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=34] [neededSchemaVersion=35] ["elapsed time"=171.828µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.654 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.654 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=71] [version=35]
[2024/09/14 15:30:19.655 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=2.10451ms] [job="ID:71, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.65 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.656 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [job="ID:71, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.65 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.658 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=71]
[2024/09/14 15:30:19.659 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2024/09/14 15:30:19.660 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.659 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.660 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.659 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2024/09/14 15:30:19.661 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=73] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.659 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.663 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=35] [neededSchemaVersion=36] ["elapsed time"=99.132µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.663 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.663 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=73] [version=36]
[2024/09/14 15:30:19.665 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=2.375956ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.659 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.666 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=73] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.659 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.668 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=73]
[2024/09/14 15:30:19.668 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2024/09/14 15:30:19.669 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.669 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.669 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.669 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2024/09/14 15:30:19.670 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=75] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.669 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.671 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=36] [neededSchemaVersion=37] ["elapsed time"=108.825µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.672 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.672 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=75] [version=37]
[2024/09/14 15:30:19.674 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=3.059166ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.669 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.675 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=75] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.669 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.676 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=75]
[2024/09/14 15:30:19.676 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2024/09/14 15:30:19.677 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.676 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.677 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.676 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2024/09/14 15:30:19.677 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=77] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.676 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.679 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=37] [neededSchemaVersion=38] ["elapsed time"=128.983µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.679 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.679 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=77] [version=38]
[2024/09/14 15:30:19.681 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=2.424944ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.676 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.682 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=77] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.676 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.683 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=77]
[2024/09/14 15:30:19.683 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2024/09/14 15:30:19.684 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.684 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.684 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.684 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2024/09/14 15:30:19.685 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=79] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.684 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.686 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=38] [neededSchemaVersion=39] ["elapsed time"=116.865µs] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.686 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.686 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=79] [version=39]
[2024/09/14 15:30:19.688 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=2.653719ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.684 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.689 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=79] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.684 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.690 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=79]
[2024/09/14 15:30:19.690 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2024/09/14 15:30:19.691 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.69 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.691 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.69 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2024/09/14 15:30:19.691 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=81] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.69 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.692 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=39] [neededSchemaVersion=40] ["elapsed time"=133.298µs] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.693 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.693 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=81] [version=40]
[2024/09/14 15:30:19.695 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=2.355439ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.69 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.695 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=81] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.69 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.696 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=81]
[2024/09/14 15:30:19.697 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2024/09/14 15:30:19.697 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.697 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2024/09/14 15:30:19.698 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.699 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=40] [neededSchemaVersion=41] ["elapsed time"=129.308µs] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.699 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.699 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=83] [version=41]
[2024/09/14 15:30:19.701 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=2.03941ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.702 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.703 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=83]
[2024/09/14 15:30:19.703 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task_history (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2024/09/14 15:30:19.704 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.704 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task_history (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(261),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tpriority INT DEFAULT 1,\n\t\tcreate_time TIMESTAMP,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\ttarget_scope VARCHAR(256) DEFAULT \"\",\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2024/09/14 15:30:19.705 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=85] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.706 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=41] [neededSchemaVersion=42] ["elapsed time"=124.8µs] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.706 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.706 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=85] [version=42]
[2024/09/14 15:30:19.708 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=2.550363ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.709 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 2, tp general"] [category=ddl] [jobID=85] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.704 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.710 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=85]
[2024/09/14 15:30:19.710 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2024/09/14 15:30:19.711 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.711 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2024/09/14 15:30:19.711 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=87] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.712 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=42] [neededSchemaVersion=43] ["elapsed time"=121.776µs] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.713 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.713 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=87] [version=43]
[2024/09/14 15:30:19.715 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=2.314366ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.715 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=87] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.716 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=87]
[2024/09/14 15:30:19.717 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/14 15:30:19.717 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.717 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.717 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.717 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/14 15:30:19.718 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=89] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.717 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.719 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=43] [neededSchemaVersion=44] ["elapsed time"=93.812µs] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.719 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.719 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=89] [version=44]
[2024/09/14 15:30:19.721 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=2.575449ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.717 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.722 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 4, tp general"] [category=ddl] [jobID=89] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.717 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.723 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=89]
[2024/09/14 15:30:19.723 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/14 15:30:19.724 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.724 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/14 15:30:19.725 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.726 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=44] [neededSchemaVersion=45] ["elapsed time"=266.295µs] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.727 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.727 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=91] [version=45]
[2024/09/14 15:30:19.729 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=2.795471ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.730 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.723 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.732 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=91]
[2024/09/14 15:30:19.732 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2024/09/14 15:30:19.735 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.735 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2024/09/14 15:30:19.736 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=93] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.738 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=45] [neededSchemaVersion=46] ["elapsed time"=259.397µs] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.739 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.739 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=93] [version=46]
[2024/09/14 15:30:19.740 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=2.420107ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.741 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 6, tp general"] [category=ddl] [jobID=93] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.744 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=93]
[2024/09/14 15:30:19.744 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2024/09/14 15:30:19.746 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.746 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2024/09/14 15:30:19.747 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=95] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.750 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=46] [neededSchemaVersion=47] ["elapsed time"=311.921µs] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.751 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.751 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=95] [version=47]
[2024/09/14 15:30:19.752 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=2.752055ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.754 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=95] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.755 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=95]
[2024/09/14 15:30:19.756 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(261) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        cpu_count int default 0,\n        keyspace_id bigint(8) NOT NULL DEFAULT -1\n    );"] [user=]
[2024/09/14 15:30:19.757 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.756 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.757 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.756 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(261) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        cpu_count int default 0,\n        keyspace_id bigint(8) NOT NULL DEFAULT -1\n    );"]
[2024/09/14 15:30:19.758 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=97] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.756 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.759 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=47] [neededSchemaVersion=48] ["elapsed time"=130.459µs] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.760 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.760 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=97] [version=48]
[2024/09/14 15:30:19.761 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=2.399419ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.756 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.763 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 8, tp general"] [category=ddl] [jobID=97] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.756 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.765 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=97]
[2024/09/14 15:30:19.765 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=48] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.request_unit_by_group (\n\t\tstart_time TIMESTAMP(6) NOT NULL,\n\t\tend_time TIMESTAMP(6) NOT NULL,\n\t\tresource_group VARCHAR(32) NOT null,\n\t\ttotal_ru bigint(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (start_time, end_time, resource_group),\n\t\tKEY (resource_group)\n\t);"] [user=]
[2024/09/14 15:30:19.766 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.766 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.766 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.766 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE TABLE IF NOT EXISTS mysql.request_unit_by_group (\n\t\tstart_time TIMESTAMP(6) NOT NULL,\n\t\tend_time TIMESTAMP(6) NOT NULL,\n\t\tresource_group VARCHAR(32) NOT null,\n\t\ttotal_ru bigint(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (start_time, end_time, resource_group),\n\t\tKEY (resource_group)\n\t);"]
[2024/09/14 15:30:19.767 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=99] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.766 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.769 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=48] [neededSchemaVersion=49] ["elapsed time"=204.086µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.770 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.770 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=99] [version=49]
[2024/09/14 15:30:19.771 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=2.167776ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.766 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.773 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 9, tp general"] [category=ddl] [jobID=99] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.766 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.776 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=99]
[2024/09/14 15:30:19.776 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=49] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS sys;"] [user=]
[2024/09/14 15:30:19.777 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.777 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.777 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.777 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE DATABASE IF NOT EXISTS sys;"]
[2024/09/14 15:30:19.778 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=101] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.777 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.780 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=49] [neededSchemaVersion=50] ["elapsed time"=59.986µs] [gotSchemaVersion=50] [phyTblIDs="[]"] [actionTypes="[]"] [diffTypes="[\"create schema\"]"]
[2024/09/14 15:30:19.781 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.781 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=101] [version=50]
[2024/09/14 15:30:19.782 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=50] ["take time"=2.129465ms] [job="ID:101, Type:create schema, State:done, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2024-09-14 15:30:19.777 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.783 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [jobID=101] [job="ID:101, Type:create schema, State:synced, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.777 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.786 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=101]
[2024/09/14 15:30:19.791 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:103, Type:create view, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.789 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.791 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:103, Type:create view, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.789 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="CREATE OR REPLACE VIEW sys.schema_unused_indexes AS\n\t\tSELECT\n\t\t\ttable_schema as object_schema,\n\t\t\ttable_name as object_name,\n\t\t\tindex_name\n\t\tFROM information_schema.cluster_tidb_index_usage\n\t\tWHERE\n\t\t\ttable_schema not in ('sys', 'mysql', 'INFORMATION_SCHEMA', 'PERFORMANCE_SCHEMA') and\n\t\t\tindex_name != 'PRIMARY'\n\t\tGROUP BY table_schema, table_name, index_name\n\t\tHAVING\n\t\t\tsum(last_access_time) is null;"]
[2024/09/14 15:30:19.792 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=103] [category=ddl] [job="ID:103, Type:create view, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.789 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.796 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=50] [neededSchemaVersion=51] ["elapsed time"=267.393µs] [gotSchemaVersion=51] [phyTblIDs="[102]"] [actionTypes="[21]"] [diffTypes="[\"create view\"]"]
[2024/09/14 15:30:19.798 +08:00] [INFO] [domain.go:1027] ["session manager is nil"]
[2024/09/14 15:30:19.798 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=103] [version=51]
[2024/09/14 15:30:19.800 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=51] ["take time"=4.245664ms] [job="ID:103, Type:create view, State:done, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:3, start time: 2024-09-14 15:30:19.789 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.803 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=103] [job="ID:103, Type:create view, State:synced, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.789 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.807 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=103]
[2024/09/14 15:30:19.827 +08:00] [INFO] [bootstrap.go:745] ["bootstrap successful"] ["take time"=491.092017ms]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_scheduler.go:250] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/14 15:30:19.827 +08:00] [INFO] [mock.go:101] ["owner manager retire owner"] [ownerKey=/tidb/ddl/fg/owner] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c]
[2024/09/14 15:30:19.827 +08:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/14 15:30:19.827 +08:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 2, tp general"] [category=ddl] ["take time"=882ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 3, tp general"] [category=ddl] ["take time"=454ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 4, tp general"] [category=ddl] ["take time"=501ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 5, tp general"] [category=ddl] ["take time"=394ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 6, tp general"] [category=ddl] ["take time"=364ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 7, tp general"] [category=ddl] ["take time"=390ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 8, tp general"] [category=ddl] ["take time"=319ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 9, tp general"] [category=ddl] ["take time"=357ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 10, tp general"] [category=ddl] ["take time"=316ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 1, tp general"] [category=ddl] ["take time"=363ns]
[2024/09/14 15:30:19.827 +08:00] [INFO] [mock.go:113] ["owner manager is canceled"] [ownerKey=/tidb/ddl/fg/owner] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c]
[2024/09/14 15:30:19.827 +08:00] [INFO] [delete_range.go:162] ["closing delRange"] [category=ddl]
[2024/09/14 15:30:19.827 +08:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/14 15:30:19.828 +08:00] [INFO] [ddl.go:843] ["DDL closed"] [category=ddl] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c] ["take time"=475.154µs]
[2024/09/14 15:30:19.828 +08:00] [INFO] [ddl.go:696] ["stop DDL"] [category=ddl] [ID=f0d6b9f3-0d07-48c2-853c-cd8a53ae536c]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:899] ["topologySyncerKeeper exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:849] ["infoSyncerKeeper exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:821] ["topNSlowQueryLoop exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:1553] ["closestReplicaReadCheckLoop exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:1066] ["loadSchemaInLoop exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:875] ["globalConfigSyncerKeeper exited."]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/14 15:30:19.828 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/14 15:30:19.828 +08:00] [INFO] [domain.go:1238] ["domain closed"] ["take time"=591.429µs]
[2024/09/14 15:30:19.828 +08:00] [INFO] [tidb.go:85] ["new domain"] [store=846004d3-c62f-480e-8db2-8523a1bacef6] ["ddl lease"=500ms] ["stats lease"=-1ns]
[2024/09/14 15:30:19.830 +08:00] [WARN] [controller.go:215] ["[resource group controller] server does not save config, load config failed"]
[2024/09/14 15:30:19.830 +08:00] [INFO] [controller.go:199] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"ltb-max-wait-duration\":\"30s\",\"ltb-token-rpc-max-delay\":\"1s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333},\"enable-controller-trace-log\":\"false\",\"token-rpc-params\":{\"wait-retry-interval\":\"50ms\",\"wait-retry-times\":20}}"] [ru-config="{\"ReadBaseCost\":0.125,\"ReadPerBatchBaseCost\":0.5,\"ReadBytesCost\":0.0000152587890625,\"WriteBaseCost\":1,\"WritePerBatchBaseCost\":1,\"WriteBytesCost\":0.0009765625,\"CPUMsCost\":0.3333333333333333,\"LTBMaxWaitDuration\":30000000000,\"WaitRetryInterval\":50000000,\"WaitRetryTimes\":20,\"DegradedModeWaitDuration\":0}"]
[2024/09/14 15:30:19.840 +08:00] [INFO] [domain.go:386] ["full load InfoSchema success"] [isV2=false] [currentSchemaVersion=0] [neededSchemaVersion=51] ["elapsed time"=10.034306ms]
[2024/09/14 15:30:19.840 +08:00] [INFO] [domain.go:773] ["full load and reset schema validator"]
[2024/09/14 15:30:19.841 +08:00] [INFO] [ddl.go:715] ["start DDL"] [category=ddl] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076] [runWorker=true]
[2024/09/14 15:30:19.841 +08:00] [INFO] [ddl.go:704] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2024/09/14 15:30:19.841 +08:00] [INFO] [env.go:109] ["the ingest sorted directory"] [category=ddl-ingest] ["data path"=/tmp/tidb/tmp_ddl-4000]
[2024/09/14 15:30:19.841 +08:00] [WARN] [env.go:60] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [delete_range.go:172] ["start delRange emulator"] [category=ddl]
[2024/09/14 15:30:19.841 +08:00] [INFO] [mock.go:89] ["owner manager gets owner"] [ownerKey=/tidb/ddl/fg/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayStartLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/14 15:30:19.841 +08:00] [WARN] [domain.go:1518] ["pd / etcd client not provided, won't begin Advancer."]
[2024/09/14 15:30:19.841 +08:00] [INFO] [runaway.go:149] ["try to start runaway manager loop"]
[2024/09/14 15:30:19.841 +08:00] [INFO] [job_scheduler.go:342] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2024/09/14 15:30:19.841 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=requestUnitsWriterLoop]
[2024/09/14 15:30:19.841 +08:00] [INFO] [job_scheduler.go:354] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2024/09/14 15:30:19.842 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/14 15:30:19.842 +08:00] [INFO] [mock.go:89] ["owner manager gets owner"] [ownerKey=/tidb/bindinfo/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:19.842 +08:00] [WARN] [sysvar_cache.go:49] ["sysvar cache is empty, triggering rebuild"]
[2024/09/14 15:30:19.843 +08:00] [INFO] [sysvar.go:2830] ["set resource control"] [enable=true]
[2024/09/14 15:30:19.843 +08:00] [INFO] [controller.go:500] ["[resource group controller] create resource group cost controller"] [name=default]
[2024/09/14 15:30:19.847 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/14 15:30:19.849 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2024/09/14 15:30:19.850 +08:00] [INFO] [domain.go:2188] ["dumpFileGcChecker started"]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=indexUsageWorker]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=quitStatsOwner]
[2024/09/14 15:30:19.850 +08:00] [INFO] [domain.go:2419] ["start load stats sub workers"] ["worker count"=6]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/14 15:30:19.850 +08:00] [INFO] [mock.go:89] ["owner manager gets owner"] [ownerKey=/tidb/stats/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/14 15:30:19.850 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2024/09/14 15:30:19.850 +08:00] [INFO] [manager.go:108] ["adjust memory limit for cgroup v2"] [server-id=:4000] [before=62.6GiB] [after=62.6GiB]
[2024/09/14 15:30:19.850 +08:00] [INFO] [manager.go:113] ["build task executor manager"] [server-id=:4000] [total-cpu=16] [total-mem=62.6GiB]
[2024/09/14 15:30:19.851 +08:00] [INFO] [task_manager.go:218] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/14 15:30:19.851 +08:00] [INFO] [task_manager.go:218] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2024/09/14 15:30:19.851 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/14 15:30:19.851 +08:00] [WARN] [misc.go:464] ["Automatic TLS Certificate creation is disabled"] []
[2024/09/14 15:30:19.851 +08:00] [INFO] [manager.go:146] ["task executor manager start"] [server-id=:4000]
[2024/09/14 15:30:19.851 +08:00] [INFO] [domain.go:1719] ["dist task executor manager started"]
[2024/09/14 15:30:19.852 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=16411542982836649814] [schemaVersion=51] [cur_db=test] [sql="drop table if exists t;"] [user=root@%]
[2024/09/14 15:30:19.852 +08:00] [INFO] [session.go:4065] ["CRUCIAL OPERATION"] [conn=16411542982836649814] [schemaVersion=51] [cur_db=test] [sql="create table t (id int)"] [user=root@%]
[2024/09/14 15:30:19.854 +08:00] [INFO] [job_submitter.go:107] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:105, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:104, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false; "] [table=true] [fast_create=false]
[2024/09/14 15:30:19.854 +08:00] [INFO] [executor.go:6331] ["DDL job submitted"] [category=ddl] [job="ID:105, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:104, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"] [query="create table t (id int)"]
[2024/09/14 15:30:19.855 +08:00] [INFO] [job_worker.go:754] ["run DDL job"] [worker="worker 11, tp general"] [category=ddl] [jobID=105] [conn=16411542982836649814] [category=ddl] [job="ID:105, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:104, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.856 +08:00] [INFO] [domain.go:349] ["diff load InfoSchema success"] [isV2=false] [currentSchemaVersion=51] [neededSchemaVersion=52] ["elapsed time"=87.047µs] [gotSchemaVersion=52] [phyTblIDs="[104]"] [actionTypes="[3]"] [diffTypes="[\"create table\"]"]
[2024/09/14 15:30:19.857 +08:00] [INFO] [domain.go:1046] ["mdl gets lock, update self version to owner"] [jobID=105] [version=52]
[2024/09/14 15:30:19.858 +08:00] [INFO] [schema_version.go:381] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=52] ["take time"=2.165466ms] [job="ID:105, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:104, RowCount:0, ArgLen:2, start time: 2024-09-14 15:30:19.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.860 +08:00] [INFO] [job_worker.go:342] ["finish DDL job"] [worker="worker 11, tp general"] [category=ddl] [jobID=105] [conn=16411542982836649814] [job="ID:105, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:104, RowCount:0, ArgLen:0, start time: 2024-09-14 15:30:19.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0, LocalMode: false"]
[2024/09/14 15:30:19.863 +08:00] [INFO] [executor.go:6437] ["DDL job is finished"] [category=ddl] [jobID=105]
[2024/09/14 15:30:19.864 +08:00] [INFO] [txn_test.go:537] ["gjt debug beg select"]
[2024/09/14 15:30:20.452 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=588.384819ms] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:0, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.452 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:20.452 +08:00] [WARN] [sqlkiller.go:61] ["kill initiated"] ["connection ID"=16411542982836649814] [reason="[executor:3024]Query execution was interrupted, maximum statement execution time exceeded"]
[2024/09/14 15:30:20.464 +08:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/14 15:30:20.464 +08:00] [WARN] [adapter.go:1688] ["# Txn_start_ts: 0\n# User@Host: root[root] @ localhost []\n# Conn_ID: 16411542982836649814\n# Query_time: 0.600451484\n# Parse_time: 0.000024118\n# Compile_time: 0.000220073\n# Rewrite_time: 0.00004675\n# Optimize_time: 0.00010005\n# Wait_TS: 0.600090643\n# DB: test\n# Is_internal: false\n# Digest: e5796985ccafe2f71126ed6c0ac939ffa015a8c0744a24b7aee6d587103fd2f7\n# Stats: t:pseudo[10000;0]\n# Num_cop_tasks: 0\n# Mem_max: 4096\n# Prepared: false\n# Plan_from_cache: false\n# Plan_from_binding: false\n# Has_more_results: false\n# KV_total: 0\n# PD_total: 0\n# Backoff_total: 0\n# Write_sql_response_total: 0\n# Result_rows: 0\n# Succ: false\n# IsExplicitTxn: false\n# IsSyncStatsFailed: false\n# Plan: tidb_decode_plan('c+gwCTMxXzUJMAkxMDAwMAlkYXRhOlRhYmxlRnVsbFNjYW5fNAkwCQlOL0EJTi9BCjEJNDNfNAkxXzAJMQUxAHQBLLQ6dCwga2VlcCBvcmRlcjpmYWxzZSwgc3RhdHM6cHNldWRvCTAJCU4vQQlOL0EK')\n# Plan_digest: ccb0d7dbb386cbf97a7007105f4b9f48d79db972766c84bfba32e55df7ffede8\n# Binary_plan: tidb_decode_binary_plan('wAFYCr0BCg1UYWJsZVJlYWRlcl81EmoKD1QBEVBGdWxsU2Nhbl80IQEAAAA4DT9BKQABAdiIw0A4AkACSgsKCQoEdGVzdBIBdFIea2VlcCBvcmRlcjpmYWxzZSwgc3RhdHM6cHNldWRvcP//DQIEAXgNCSj//wEhVVVVVZW3BR1ZNAFAAVIUZGF0YTpUYWJsHYUAcBk3KHj///////////8B')\n# Resource_group: default\nuse test;\nselect * from t;"]
[2024/09/14 15:30:20.465 +08:00] [WARN] [session.go:2161] ["run statement failed"] [schemaVersion=52] [error="[executor:3024]Query execution was interrupted, maximum statement execution time exceeded"] [errorVerbose="[executor:3024]Query execution was interrupted, maximum statement execution time exceeded\ngithub.com/pingcap/errors.AddStack\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/normalize.go:175\ngithub.com/pingcap/tidb/pkg/util/sqlkiller.(*SQLKiller).getKillError\n\t/home/guojiangtao/work/tidb/pkg/util/sqlkiller/sqlkiller.go:76\ngithub.com/pingcap/tidb/pkg/util/sqlkiller.(*SQLKiller).HandleSignal\n\t/home/guojiangtao/work/tidb/pkg/util/sqlkiller/sqlkiller.go:126\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:653\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).Wait\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:611\ngithub.com/pingcap/tidb/pkg/sessiontxn/isolation.(*baseTxnContextProvider).ActivateTxn\n\t/home/guojiangtao/work/tidb/pkg/sessiontxn/isolation/base.go:289\ngithub.com/pingcap/tidb/pkg/sessiontxn/isolation.(*baseTxnContextProvider).GetStmtReadTS\n\t/home/guojiangtao/work/tidb/pkg/sessiontxn/isolation/base.go:185\ngithub.com/pingcap/tidb/pkg/sessiontxn/isolation.(*OptimisticTxnContextProvider).GetStmtReadTS\n\t/home/guojiangtao/work/tidb/pkg/sessiontxn/isolation/optimistic.go:100\ngithub.com/pingcap/tidb/pkg/session.(*txnManager).GetStmtReadTS\n\t/home/guojiangtao/work/tidb/pkg/session/txnmanager.go:98\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).getSnapshotTS\n\t/home/guojiangtao/work/tidb/pkg/executor/builder.go:2067\ngithub.com/pingcap/tidb/pkg/executor.buildNoRangeTableReader\n\t/home/guojiangtao/work/tidb/pkg/executor/builder.go:3476\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildTableReader\n\t/home/guojiangtao/work/tidb/pkg/executor/builder.go:3623\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\n\t/home/guojiangtao/work/tidb/pkg/executor/builder.go:289\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:1211\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:556\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2149\ngithub.com/pingcap/tidb/pkg/testkit.(*TestKit).ExecWithContext\n\t/home/guojiangtao/work/tidb/pkg/testkit/testkit.go:385\ngithub.com/pingcap/tidb/pkg/testkit.(*TestKit).Exec\n\t/home/guojiangtao/work/tidb/pkg/testkit/testkit.go:358\ngithub.com/pingcap/tidb/pkg/testkit.(*TestKit).ExecToErr\n\t/home/guojiangtao/work/tidb/pkg/testkit/testkit.go:431\ngithub.com/pingcap/tidb/pkg/session/test/txn.TestGetTsoSlow\n\t/home/guojiangtao/work/tidb/pkg/session/test/txn/txn_test.go:538\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1690\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [session="{\n  \"currDBName\": \"test\",\n  \"id\": 16411542982836649814,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"localhost\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\",\n    \"AuthPlugin\": \"\"\n  }\n}"]
[2024/09/14 15:30:20.465 +08:00] [INFO] [server.go:587] ["setting tidb-server to report unhealthy (shutting-down)"]
[2024/09/14 15:30:20.465 +08:00] [INFO] [mock.go:101] ["owner manager retire owner"] [ownerKey=/tidb/ddl/fg/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:20.552 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=688.560806ms] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:0, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.553 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:20.652 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=788.597388ms] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:0, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.653 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:20.753 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=888.687278ms] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:0, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.753 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:20.847 +08:00] [INFO] [runaway.go:158] ["preparations for the runaway manager are finished and start runaway manager loop"]
[2024/09/14 15:30:20.847 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/14 15:30:20.847 +08:00] [INFO] [wait_group_wrapper.go:133] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/14 15:30:20.847 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayStartLoop]
[2024/09/14 15:30:20.852 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=987.759752ms] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:0, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.852 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:20.952 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.087757525s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:20.952 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.052 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.187980408s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.052 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.152 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.288210961s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.152 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.253 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.388670623s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.253 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.352 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.487961395s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.352 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.452 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.588003392s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.452 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.552 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.687967204s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.552 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.652 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.788447986s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.652 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.753 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.888691721s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.753 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.852 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=1.987842522s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:1, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.852 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:21.953 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.08866828s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:21.953 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.052 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.188253938s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.052 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.152 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.288084793s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.152 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.252 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.387945746s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.252 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.352 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.488151869s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.352 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.452 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.588195723s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.452 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.553 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.688704663s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.553 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.652 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.788514096s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.652 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.752 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.887835806s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.752 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.853 +08:00] [WARN] [expensivequery.go:97] ["execution timeout, kill it"] [costTime=2.988761431s] [maxExecutionTime=500ms] [processInfo="{id:16411542982836649814, user:root, host:localhost, db:test, command:Sleep, time:2, state:autocommit, info:select * from t}"]
[2024/09/14 15:30:22.853 +08:00] [INFO] [server.go:897] [kill] [conn=16411542982836649814] [query=true] [maxExecutionTime=true] [runawayExceed=false]
[2024/09/14 15:30:22.865 +08:00] [ERROR] [txn.go:634] ["active transaction fail"] [error="transaction future is not set"] [errorVerbose="transaction future is not set\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).changePendingToValid\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:290\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:633\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [stack="github.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:634"]
[2024/09/14 15:30:22.894 +08:00] [WARN] [adapter.go:1688] ["# Txn_start_ts: 452538931057262592\n# Query_time: 3.001728206\n# Parse_time: 0\n# Compile_time: 0.00052894\n# Rewrite_time: 0.000127233\n# Optimize_time: 0.000285849\n# Wait_TS: 3.000601944\n# Cop_time: 0.000183423 Request_count: 1\n# Is_internal: true\n# Digest: 8061c53f20a0e8ef464b77268d6e5764f0329d88f4ccb25a67f79e475cf808fb\n# Stats: tidb_ddl_job:pseudo[10000;0]\n# Num_cop_tasks: 1\n# Cop_proc_avg: 0 Cop_proc_addr: store1\n# Cop_wait_avg: 0 Cop_wait_addr: store1\n# Mem_max: 12229\n# Prepared: false\n# Plan_from_cache: false\n# Plan_from_binding: false\n# Has_more_results: false\n# KV_total: 0\n# PD_total: 0\n# Backoff_total: 0\n# Write_sql_response_total: 0\n# Result_rows: 0\n# Succ: true\n# IsExplicitTxn: false\n# IsSyncStatsFailed: false\n# Plan: tidb_decode_plan('hQSoMAkzXzYJMAkzMzMzLjMzCW15c3FsLnRpZGJfZGRsX2pvYi5yZW9yZywgbUYaAPBDam9iX21ldGEJMAl0aW1lOjI5Ni43wrVzLCBsb29wczoxLCBDb25jdXJyZW5jeTo1CTExLjggS0IJTi9BCjEJMzFfMTIdfFRkYXRhOlRhYmxlUmFuZ2VTY2FuXzExFV0MNDIuNjZdAHBjb3BfdGFzazoge251bTogMSwgbWF4OiAxNjUuMgUruHByb2Nfa2V5czogMCwgY29wcl9jYWNoZV9oaXRfcmF0aW86IDAuMDAsIGJ1aWxkBU4IX2R1BRoYbjogOS4zOQVIPG1heF9kaXN0c3FsX2NvbmMR00ggMX0sIHJwY19pbmZvOntDb3A6AYsMX3JwYwH+FHRvdGFsXyUcCDE0MQW/MH19CTE2OSBCeXRlcwkhCAwyCTQ0AecEMV85hhR0YWJsZTouhgHYLCByYW5nZTpbMCwraW5mXSwga2VlcCBvcmRlcjp0cnVlLCBzdGF0czpwc2V1ZG8JMAl0aWt2XyUeAHsJgQwwNS44Bc0pnSgwfQlOL0EJTi9BCg==')\n# Plan_digest: 0476d51c944ebeebd7f22819bf11fd67a299e38eb0717756c7dde9a08186b2b6\n# Binary_plan: tidb_decode_binary_plan('4wSgCt4ECgxQcm9qZWN0aW9uXzYSywMKDlRhYmxlUmVhZGVyXzEyEqsBChEJE/A8YW5nZVNjYW5fMTEhAAAAAECVFkEpq6qqqqoKqkA4AkACShcKFQoFbXlzcWwSDHRpZGJfZGRsX2pvYlItcgE98E86WzAsK2luZl0sIGtlZXAgb3JkZXI6dHJ1ZSwgc3RhdHM6cHNldWRvaiJ0aWt2X3Rhc2s6e3RpbWU6MTA1LjjCtXMsIGxvb3BzOjB9cP///wkDBAF4CQgM////AQWYEADz3UApFZgoAUABUhZkYXRhOlQF2QBhGcYEWhYFXRAyNDIuNh1dHDFitgFjb3BfBYBMIHtudW06IDEsIG1heDogMTY1LjIFLLhwcm9jX2tleXM6IDAsIGNvcHJfY2FjaGVfaGl0X3JhdGlvOiAwLjAwLCBidWlsZAVOCF9kdQUaGG46IDkuMzkFSKhtYXhfZGlzdHNxbF9jb25jdXJyZW5jeTogMX0sIHJwY19pbmZvOntDb3A6AYs0X3JwYzoxLCB0b3RhbF8FwAgxNDEFwAx9fXCpQg0BCIDr3zoNAQA1JaEELnQ9oBwucmVvcmcsIEoaABxqb2JfbWV0YTEsDDk2LjcFuCmJDDFiDUMdtUA1cJxeeP///////////wEYAQ==')\n# Resource_group: default\nselect reorg, job_meta from mysql.tidb_ddl_job where job_id >= 0  order by job_id;"]
[2024/09/14 15:30:22.894 +08:00] [INFO] [job_scheduler.go:250] ["scheduleLoop quit due to context canceled"] [category=ddl]
[2024/09/14 15:30:22.894 +08:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/14 15:30:22.894 +08:00] [INFO] [ddl_workerpool.go:78] ["closing workerPool"] [category=ddl]
[2024/09/14 15:30:22.894 +08:00] [INFO] [job_worker.go:180] ["DDL worker closed"] [worker="worker 11, tp general"] [category=ddl] ["take time"=2.06µs]
[2024/09/14 15:30:22.894 +08:00] [INFO] [mock.go:113] ["owner manager is canceled"] [ownerKey=/tidb/ddl/fg/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.894 +08:00] [INFO] [delete_range.go:162] ["closing delRange"] [category=ddl]
[2024/09/14 15:30:22.894 +08:00] [INFO] [session_pool.go:88] ["closing session pool"] [category=ddl]
[2024/09/14 15:30:22.894 +08:00] [INFO] [ddl.go:843] ["DDL closed"] [category=ddl] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076] ["take time"=2.429476901s]
[2024/09/14 15:30:22.894 +08:00] [INFO] [ddl.go:696] ["stop DDL"] [category=ddl] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.894 +08:00] [INFO] [domain.go:1189] ["stopping ttlJobManager"]
[2024/09/14 15:30:22.895 +08:00] [INFO] [task_manager.go:195] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/14 15:30:22.895 +08:00] [INFO] [scan.go:310] ["ttlScanWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [scan.go:310] ["ttlScanWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [scan.go:310] ["ttlScanWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [scan.go:310] ["ttlScanWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [task_manager.go:195] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2024/09/14 15:30:22.895 +08:00] [INFO] [del.go:262] ["ttlDeleteWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [del.go:262] ["ttlDeleteWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [del.go:262] ["ttlDeleteWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [del.go:262] ["ttlDeleteWorker loop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [job_manager.go:175] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:1200] ["ttlJobManager exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [manager.go:280] ["recoverMetaLoop done"] [server-id=:4000]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [mock.go:101] ["owner manager retire owner"] [ownerKey=/tidb/stats/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [mock.go:113] ["owner manager is canceled"] [ownerKey=/tidb/stats/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.895 +08:00] [INFO] [mock.go:101] ["owner manager retire owner"] [ownerKey=/tidb/bindinfo/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:1721] ["stopping dist task executor manager"]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:849] ["infoSyncerKeeper exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [mock.go:113] ["owner manager is canceled"] [ownerKey=/tidb/bindinfo/owner] [ID=5bae8bb0-c6c7-4dc5-a63c-d864d9a20076]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:3187] ["planCacheEvictTrigger exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:2192] ["dumpFileGcChecker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:2007] ["globalBindHandleWorkerLoop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:875] ["globalConfigSyncerKeeper exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheEvictTrigger]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:3156] ["planCacheMetricsAndVars exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:1818] ["loadPrivilegeInLoop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:1868] ["LoadSysVarCacheLoop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:821] ["topNSlowQueryLoop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:2510] ["indexUsageWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:899] ["topologySyncerKeeper exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=indexUsageWorker]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2024/09/14 15:30:22.895 +08:00] [INFO] [stats_syncload.go:219] ["SubLoadWorker exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=planCacheMetricsAndVars]
[2024/09/14 15:30:22.895 +08:00] [INFO] [domain.go:1553] ["closestReplicaReadCheckLoop exited."]
[2024/09/14 15:30:22.895 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2024/09/14 15:30:22.895 +08:00] [WARN] [adapter.go:1688] ["# Txn_start_ts: 0\n# Query_time: 2.743041395\n# Parse_time: 0\n# Compile_time: 0.003663731\n# Rewrite_time: 0.000587491\n# Optimize_time: 0.002705206\n# Wait_TS: 2.73909609\n# Is_internal: true\n# Digest: 8e00fe5c3677d581b104159ff91d824e3be8160c4e4be058288db681abd1a134\n# Stats: tidb_global_task:pseudo[10000;0],tidb_background_subtask:pseudo[10000;0]\n# Num_cop_tasks: 0\n# Prepared: false\n# Plan_from_cache: false\n# Plan_from_binding: false\n# Has_more_results: false\n# KV_total: 0\n# PD_total: 0\n# Backoff_total: 0\n# Write_sql_response_total: 0\n# Result_rows: 0\n# Warnings: [{\"Level\":\"Note\",\"Message\":\"[st,idx_exec_id] remain after pruning paths for st given Prop{SortItems: [], TaskTp: rootTask}\",\"IsExtra\":true},{\"Level\":\"Note\",\"Message\":\"[t,state] remain after pruning paths for t given Prop{SortItems: [], TaskTp: rootTask}\",\"IsExtra\":true}]\n# Succ: false\n# IsExplicitTxn: false\n# IsSyncStatsFailed: false\n# Plan: tidb_decode_plan('7RewMAkxNF8xMwkwCTEJbXlzcWwudGlkYl9nbG9iYWxfdGFzay5wcmlvcml0eSwgWiEAKGNyZWF0ZV90aW1lYiQAIGlkCTAJCU4vQQEEGAoxCTNfMTVudQAEaWRiSwABlQxfa2V5ZiEABHlwZokADHN0YXRuHgAEZXBiWACGCQEgb25jdXJyZW5jZp0Aji0BJHRhcmdldF9zY28ByRxDb2x1bW4jMyEwIT4BBBgKMgk2XzE2JUIgZ3JvdXAgYnk6Wp8BIUskZnVuY3M6bWF4KB0lDGJhY2sBPRRuZF9zdWIhVwAuHcIIKS0+FXoALA1BHGZpcnN0cm93LkYALisCEGlkKS0+HWI2HACeRgABiiHhZkwAESKiUgAIeXBlak4ARTApI37iAEU/ZksABR+elgBRUGZPABEinlIAXV1mVQAdJaJYAFnZalgAGSWeWAAMc3RlcGZRAAEenkoALjMDZlIALiYALpAEADOBkBw4CTAJMC4wMl4IBWFIWtwCWZBeIQBFY1odAE01Wh4AWQRaIQAy0AFeJAAunAFaJAApb1odAC46ATIhBXZFBC5lARg0CTE3XzIwMWZQaW5uZXIgam9pbiwgZXF1YWw6W2VxLlkESloAcqMAAR0QKSBlcSiRtwQ3LLU8CDYpXS6LADA1CTNfMjEoQnVpbGQpEZEd+o57AEokADJmAQxjYXN0es8AWTcwZG91YmxlIEJJTkFSWb16ADcutgAUNgkzMF8yVacuGwAYNwk0N18yNRHSiDFfMAkxMAl0YWJsZTpzdCwgaW5kZXg6aWR4X2V4ZWNfaWQoDQhEKSwgcmFuZ2U6WyI6NDAwMCIsDQhQXSwga2VlcCBvcmRlcjpmYWxzZSwgQaocczpwc2V1ZG82fwAoMV8yNyhQcm9iZSkFfmVJBGluegEBAVBIZSwgInBlbmRpbmciLCAicnVubgELMCksIG5vdChpc251bGyCRwAIZXApIcjhGwEEHAo4CTQ1XzI2BYsyCQGm1ABFJAA5EdQYMAkyOS45Ny4lAj7dBl1ALhsAOeVeIQD+HAT+HAT+HAQ2HAQ++AIuDAGhQ17rAg7NCCG8AQRJ6wUTKXc2bQIQNDdfMzMu7AIAM1HsVetFWgAoBQZd4wxwYXVzQV0ALBUKKF0sIFsicmV2ZXJ0CRkZDAkbTY8ALFWZwhkDBDM1UUVhlwnQVtsCLisBBHN0UtQCBDM0BUYu8QCm0wI=')\n# Plan_digest: 19251e4d0852c3daee269dcb983554a856b9ab56b15a27ac9c282faeeb7e2e53\n# Binary_plan: tidb_decode_binary_plan('mRzACpYcCgdTb3J0XzEzEv4aCg1Qcm9qZWN0aW9uXzE1EpIYCgpIYXNoQWdnXzE2Ep0RCjIhABQ4EpEOCgsBISRKb2luXzIwEtoFMkMAZDIxEoEECg5JbmRleExvb2tVcF8yOBKiAQoRBRNAUmFuZ2VTY2FuXzI1GgEBIQABAQzQgUApAQigAAAkQDgCQAJKJQojCgVteXNxbBICc3QaFgoLaWR4X2V4ZWNfaWQSB2UJCQhSN3IBTiQ6WyI6NDAwMCIsDQiQXSwga2VlcCBvcmRlcjpmYWxzZSwgc3RhdHM6cHNldWRvcP///wkCBAF4CQgs////ARKdAgoMU2VsLQw8MjcSbgoRVGFibGVSb3dJRAm1ADYJsgRUpTqyAAgNCgsdsgRSHs6BAAgaAQIJXiyQpUApoNtLGqN1lD8hEBBSbmluKCUPYC50aWRiX2JhY2tncm91bmRfc3VidGFzay4B30hlLCAicGVuZGluZyIsICJydW5uAQswKSwgbm90KGlzbnVsbIJHAAxlcCkpViABHCGNRGyNMvVyHZwIAUABViwAIdsYqYPAp2MVdDYvAAhSlQF+yQAMZXAsIHYkAEBjb25jdXJyZW5jeSwgY2FzdHrWACEieF9rZXksIGRvdWJsZSBCSU5BUlkpLT5Db2x1bW4jMzdWxwAIEoYHNt0CEDkS5wMKMt0CDDM2Es9G3QIIMzMaUd0EuJpRKwA+Sd0IHAoaUSsUAXQaDgoFJbwAEgkHBFJtUdQMcGF1cyG/ACwVCihdLCBbInJldmVydAkZGQwJGy3xACw1+94KAwTWAS4KAwwzNRJtQgoDBDM0SawEqrk63wAIDAoKGd/6CQMoBLpAKbkehetR+D0lPARSKFbKAhhnbG9iYWxfIegILnN0asMCGIk7w9ZL4Y0dVgABZsMCIAIh6SCU+SYBjzYvAAhS2wJdny57AARpZDK6Ai4bAAGbSYNaPAAMdHlwZWI+AEUiYh4AHHByaW9yaXR5YiEAJGNyZWF0ZV90aW1mRQAyVANapAAhW2JlACR0YXJnZXRfc2NvAck+lgMuDAEhJ16JAwA2VokDRCHFqRolOc6UQCmJ0t7gC5OZPyG5WFJwaW5uZXIgam9pbiwgZXF1YWw6W2Vxeg4EcsYAAR0QKSBlcSiVGgQsIBELCDYpXVqeABh+/VR9SBaVOp4AAMv+KAL+KAL+KAL+KAKKKAJdakrWBl2VWnoBGM6mZ+JvmpWRhADwSRgEtwbhHxBwIGJ5Oh1hPoQCIGZ1bmNzOm1heHoxAh2G3TMENSwNQRxmaXJzdHJvdy5GADZrAAgpLT6ChwB+RgCRQWZMABEinpgAgXJqTgCFkCkjfpwAhZ9mSwAFH56WAJHNZk8AESKeUgCd/mZVAB0lolgAJoYIalgAGSWeWAAMc3RlcGZRAAEenkoALpMFZlIALiYAWmYDFDQNzkjW5D5mAwCr/uAE/uAEOuAEKRtaagNZNlohADKqAV4kAIpJBy5PAQAs1TwANVpaARSSxxdV2Pw+WgEAXlqAAIbFAIqhAARpZFaMAA==')\n# Resource_group: default\nselect t.id, t.task_key, t.type, t.state, t.step, t.priority, t.concurrency, t.create_time, t.target_scope, max(st.concurrency)    from mysql.tidb_global_task t join mysql.tidb_background_subtask st     on t.id = st.task_key and t.step = st.step    where t.state in ('running', 'reverting', 'pausing') and st.state in ('pending', 'running') and st.exec_id = ':4000'    group by t.id    order by priority asc, create_time asc, id asc;"]
[2024/09/14 15:30:22.896 +08:00] [WARN] [session.go:2161] ["run statement failed"] [schemaVersion=52] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.Trace\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:1213\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:556\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2149\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:1518\ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL\n\t/home/guojiangtao/work/tidb/pkg/util/sqlexec/restricted_sql_executor.go:252\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession.func1\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:178\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:142\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:177\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:265\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:193\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 0,\n  \"status\": 2,\n  \"strictMode\": false,\n  \"user\": null\n}"]
[2024/09/14 15:30:22.896 +08:00] [ERROR] [manager.go:369] ["task manager met error"] [server-id=:4000] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.Trace\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:1213\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:556\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2149\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:1518\ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL\n\t/home/guojiangtao/work/tidb/pkg/util/sqlexec/restricted_sql_executor.go:252\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession.func1\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:178\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:142\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:177\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:265\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:193\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [stack="github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).logErr\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:369\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:195\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157"] [stack="github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).logErr\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:369\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:195\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157"]
[2024/09/14 15:30:22.897 +08:00] [INFO] [tidb.go:276] ["rollbackTxn called due to ddl/autocommit failure"]
[2024/09/14 15:30:22.897 +08:00] [ERROR] [txn.go:634] ["active transaction fail"] [error="transaction future is not set"] [errorVerbose="transaction future is not set\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).changePendingToValid\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:290\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:633\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [stack="github.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:634"]
[2024/09/14 15:30:22.897 +08:00] [WARN] [session.go:2161] ["run statement failed"] [schemaVersion=52] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.Trace\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:1213\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:556\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2149\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:1518\ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL\n\t/home/guojiangtao/work/tidb/pkg/util/sqlexec/restricted_sql_executor.go:252\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession.func1\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:178\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:142\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:177\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:265\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:193\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 0,\n  \"status\": 2,\n  \"strictMode\": false,\n  \"user\": null\n}"]
[2024/09/14 15:30:22.897 +08:00] [ERROR] [manager.go:369] ["task manager met error"] [server-id=:4000] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\ngithub.com/pingcap/errors.Trace\n\t/home/guojiangtao/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:1213\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n\t/home/guojiangtao/work/tidb/pkg/executor/adapter.go:556\ngithub.com/pingcap/tidb/pkg/session.runStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2288\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:2149\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal\n\t/home/guojiangtao/work/tidb/pkg/session/session.go:1518\ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL\n\t/home/guojiangtao/work/tidb/pkg/util/sqlexec/restricted_sql_executor.go:252\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession.func1\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:178\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:142\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).ExecuteSQLWithNewSession\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:177\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/storage/task_table.go:265\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:193\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [stack="github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).logErr\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:369\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:195\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157"] [stack="github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).logErr\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:369\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:195\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\n\t/home/guojiangtao/work/tidb/pkg/disttask/framework/taskexecutor/manager.go:184\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\n\t/home/guojiangtao/work/tidb/pkg/util/wait_group_wrapper.go:157"]
[2024/09/14 15:30:22.897 +08:00] [INFO] [manager.go:179] ["handle tasks loop done"] [server-id=:4000]
[2024/09/14 15:30:22.897 +08:00] [INFO] [domain.go:1723] ["dist task executor manager stopped"]
[2024/09/14 15:30:22.897 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2024/09/14 15:30:23.094 +08:00] [WARN] [adapter.go:1688] ["# Txn_start_ts: 452538931109953536\n# Query_time: 3.001158066\n# Parse_time: 0\n# Compile_time: 0.000639906\n# Rewrite_time: 0.000137179\n# Optimize_time: 0.000336436\n# Wait_TS: 3.000212985\n# Cop_time: 0.000112557 Request_count: 1\n# Is_internal: true\n# Digest: 0d4a6a9b344a02e5650c3db5c0d18fa430e42f96bae1742b0a538fdee9eae1fb\n# Stats: tidb_mdl_info:pseudo[10000;0]\n# Num_cop_tasks: 1\n# Cop_proc_avg: 0 Cop_proc_addr: store1\n# Cop_wait_avg: 0 Cop_wait_addr: store1\n# Mem_max: 4096\n# Prepared: false\n# Plan_from_cache: false\n# Plan_from_binding: false\n# Has_more_results: false\n# KV_total: 0\n# PD_total: 0.000001932\n# Backoff_total: 0\n# Write_sql_response_total: 0\n# Result_rows: 0\n# Succ: true\n# IsExplicitTxn: false\n# IsSyncStatsFailed: false\n# Plan: tidb_decode_plan('4wPwWDAJMzFfNwkwCTExMDcuNzgJZGF0YTpTZWxlY3Rpb25fNgkwCXRpbWU6MTI5LjHCtXMsIGxvb3BzOjEsIGNvcF90YXNrOiB7bnVtOiAxLCBtYXg6IDk0LjPCASq4cHJvY19rZXlzOiAwLCBjb3ByX2NhY2hlX2hpdF9yYXRpbzogMC4wMCwgYnVpbGQFTQhfZHUFGhBuOiA1Lglx8ENtYXhfZGlzdHNxbF9jb25jdXJyZW5jeTogMX0sIHJwY19pbmZvOntDb3A6e251bV9ycGM6MSwgdG90YWxfdGltZTo4NAWSZH19CTE3OSBCeXRlcwlOL0EKMQkxXzYJMV8wFf9AbGUobXlzcWwudGlkYl9tZGwFXUwudmVyc2lvbiwgNTIpCTAJdGlrdgWuLDp7dGltZTo3MC4ywgHyKRwEMH0BXgEEHAoyCTQ0XzUJAWM0MzMzMy4zMwl0YWJsZToyYADALCByYW5nZTpbMCwraW5mXSwga2VlcCBvcmRlcjpmYWxzZSwgc3RhdHM6cHNldWRvCa6DAA==')\n# Plan_digest: 69814d4fca2bfbaafa8bbeb2ec461764763cd06128833c0a8ff10964011eea3d\n# Binary_plan: tidb_decode_binary_plan('ygSYCsUECg1UYWJsZVJlYWRlcl83Eq8CCgtTZWxlY3Rpb25fNhKrAQoQCSLwPGFuZ2VTY2FuXzUhAQAAAMCvDEEpq6qqqqoKqkA4AkACShgKFgoFbXlzcWwSDXRpZGJfbWRsX2luZm9SLnIBPfBPOlswLCtpbmZdLCBrZWVwIG9yZGVyOmZhbHNlLCBzdGF0czpwc2V1ZG9qIXRpa3ZfdGFzazp7dGltZTo3MC4ywrVzLCBsb29wczowfXD///8JAwQBeAkIDP///wEFmSxA6A1BKXMcx3EcT5EFmRRSI2xlKG0BmAAuMpcAOC52ZXJzaW9uLCA1MilqId50ABysqqqqKubRQBl0JAFAAVIQZGF0YTo9SghaFnQByhAxMjkuMR3LGDFiswFjb3AJ7Ugge251bTogMSwgbWF4OiA5NC4zBSu4cHJvY19rZXlzOiAwLCBjb3ByX2NhY2hlX2hpdF9yYXRpbzogMC4wMCwgYnVpbGQFTQhfZHUFGgxuOiA1DXJ8bWF4X2Rpc3RzcWxfY29uY3VycmVuY3k6IDF9LCBycGMlrRQ6e0NvcDoBiTRfcnBjOjEsIHRvdGFsXwW+ADgJkkR9fXCzAXj///////////8BGAE=')\n# Resource_group: default\nselect job_id, version, table_ids from mysql.tidb_mdl_info   where job_id >= 0 and version <= 52;"]
[2024/09/14 15:30:23.094 +08:00] [INFO] [domain.go:1066] ["loadSchemaInLoop exited."]
[2024/09/14 15:30:23.095 +08:00] [INFO] [wait_group_wrapper.go:140] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2024/09/14 15:30:23.095 +08:00] [INFO] [domain.go:1238] ["domain closed"] ["take time"=2.629715839s]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:567] ["Closing database"]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2024/09/14 15:30:23.095 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestGetTsoSlow (3.77s)
PASS
[2024/09/14 15:30:23.157 +08:00] [ERROR] [txn.go:634] ["active transaction fail"] [error="transaction future is not set"] [errorVerbose="transaction future is not set\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).changePendingToValid\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:290\ngithub.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:633\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1700"] [stack="github.com/pingcap/tidb/pkg/session.(*LazyTxn).waitWithSQLKiller.func1\n\t/home/guojiangtao/work/tidb/pkg/session/txn.go:634"]
ok  	github.com/pingcap/tidb/pkg/session/test/txn	4.801s
