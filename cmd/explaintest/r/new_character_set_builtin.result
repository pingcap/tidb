drop table if exists t;
create table t (a char(20) charset utf8mb4, b char(20) charset gbk, c binary(20));
insert into t values ('ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰');
select hex(a), hex(b), hex(c) from t;
hex(a)	hex(b)	hex(c)
E4B880E4BA8CE4B889	D2BBB6FEC8FD	E4B880E4BA8CE4B8890000000000000000000000
select length(a), length(b), length(c) from t;
length(a)	length(b)	length(c)
9	6	20
select ascii(a), ascii(b), ascii(c) from t;
ascii(a)	ascii(b)	ascii(c)
228	210	228
select octet_length(a), octet_length(b), octet_length(c) from t;
octet_length(a)	octet_length(b)	octet_length(c)
9	6	20
set @@tidb_enable_vectorized_expression = true;
select hex(a), hex(b), hex(c) from t;
hex(a)	hex(b)	hex(c)
E4B880E4BA8CE4B889	D2BBB6FEC8FD	E4B880E4BA8CE4B8890000000000000000000000
select length(a), length(b), length(c) from t;
length(a)	length(b)	length(c)
9	6	20
select ascii(a), ascii(b), ascii(c) from t;
ascii(a)	ascii(b)	ascii(c)
228	210	228
select octet_length(a), octet_length(b), octet_length(c) from t;
octet_length(a)	octet_length(b)	octet_length(c)
9	6	20
set @@tidb_enable_vectorized_expression = false;
drop table if exists t;
create table t (a char(100) charset utf8mb4, b char(100) charset gbk);
insert into t values ('Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«', 'Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«');
select upper(a), upper(b) from t;
upper(a)	upper(b)
Ã€ÃÃˆÃ‰ÃŠÃŒÃÃ’Ã“Ã™ÃšÃœÄ€Ä’ÄšÄªÅƒÅ‡ÅŒÅªÇÇÇ‘Ç“Ç•Ç—Ç™Ç›â…ªâ…«	Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«
select lower(a), lower(b) from t;
lower(a)	lower(b)
Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ºâ…»	Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«
set @@tidb_enable_vectorized_expression = true;
select upper(a), upper(b) from t;
upper(a)	upper(b)
Ã€ÃÃˆÃ‰ÃŠÃŒÃÃ’Ã“Ã™ÃšÃœÄ€Ä’ÄšÄªÅƒÅ‡ÅŒÅªÇÇÇ‘Ç“Ç•Ç—Ç™Ç›â…ªâ…«	Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«
select lower(a), lower(b) from t;
lower(a)	lower(b)
Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ºâ…»	Ã Ã¡Ã¨Ã©ÃªÃ¬Ã­Ã²Ã³Ã¹ÃºÃ¼ÄÄ“Ä›Ä«Å„ÅˆÅÅ«ÇŽÇÇ’Ç”Ç–Ç˜ÇšÇœâ…ªâ…«
set @@tidb_enable_vectorized_expression = false;
drop table if exists t;
create table t (a char(20) charset utf8mb4, b char(20) charset gbk, c binary(20));
insert into t values ('ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰');
select to_base64(a), to_base64(b), to_base64(c) from t;
to_base64(a)	to_base64(b)	to_base64(c)
5LiA5LqM5LiJ	0ru2/sj9	5LiA5LqM5LiJAAAAAAAAAAAAAAA=
set @@tidb_enable_vectorized_expression = true;
select to_base64(a), to_base64(b), to_base64(c) from t;
to_base64(a)	to_base64(b)	to_base64(c)
5LiA5LqM5LiJ	0ru2/sj9	5LiA5LqM5LiJAAAAAAAAAAAAAAA=
set @@tidb_enable_vectorized_expression = false;
drop table if exists t;
create table t(a char(10));
insert into t values ('ä¸­æ–‡'), ('å•Š'), ('a'), ('1'), ('ã…‚');
set @@tidb_enable_vectorized_expression = true;
select hex(convert(a using gbk)), convert(a using gbk) from t;
hex(convert(a using gbk))	convert(a using gbk)
D6D0CEC4	ä¸­æ–‡
B0A1	å•Š
61	a
31	1
3F	?
select hex(convert('ä¸­æ–‡' using gbk)), convert('ä¸­æ–‡' using gbk);
hex(convert('ä¸­æ–‡' using gbk))	convert('ä¸­æ–‡' using gbk)
D6D0CEC4	ä¸­æ–‡
select hex(convert('å•Š' using gbk)), convert('å•Š' using gbk);
hex(convert('å•Š' using gbk))	convert('å•Š' using gbk)
B0A1	å•Š
select hex(convert('a' using gbk)), convert('a' using gbk);
hex(convert('a' using gbk))	convert('a' using gbk)
61	a
select hex(convert('1' using gbk)), convert('1' using gbk);
hex(convert('1' using gbk))	convert('1' using gbk)
31	1
select hex(convert('ã…‚' using gbk)), convert('ã…‚' using gbk);
hex(convert('ã…‚' using gbk))	convert('ã…‚' using gbk)
3F	?
select convert(a using binary), convert(convert(a using gbk) using binary) from t;
convert(a using binary)	convert(convert(a using gbk) using binary)
ä¸­æ–‡	ÖÐÎÄ
å•Š	°¡
a	a
1	1
ã…‚	?
select convert(convert('ä¸­æ–‡' using gbk) using binary), convert('ä¸­æ–‡' using binary);
convert(convert('ä¸­æ–‡' using gbk) using binary)	convert('ä¸­æ–‡' using binary)
ÖÐÎÄ	ä¸­æ–‡
select convert(convert('ã…‚' using gbk) using binary), convert('ã…‚' using binary);
convert(convert('ã…‚' using gbk) using binary)	convert('ã…‚' using binary)
?	ã…‚
set @@tidb_enable_vectorized_expression = false;
select hex(convert(a using gbk)), convert(a using gbk) from t;
hex(convert(a using gbk))	convert(a using gbk)
D6D0CEC4	ä¸­æ–‡
B0A1	å•Š
61	a
31	1
3F	?
select hex(convert('ä¸­æ–‡' using gbk)), convert('ä¸­æ–‡' using gbk);
hex(convert('ä¸­æ–‡' using gbk))	convert('ä¸­æ–‡' using gbk)
D6D0CEC4	ä¸­æ–‡
select hex(convert('å•Š' using gbk)), convert('å•Š' using gbk);
hex(convert('å•Š' using gbk))	convert('å•Š' using gbk)
B0A1	å•Š
select hex(convert('a' using gbk)), convert('a' using gbk);
hex(convert('a' using gbk))	convert('a' using gbk)
61	a
select hex(convert('1' using gbk)), convert('1' using gbk);
hex(convert('1' using gbk))	convert('1' using gbk)
31	1
select hex(convert('ã…‚' using gbk)), convert('ã…‚' using gbk);
hex(convert('ã…‚' using gbk))	convert('ã…‚' using gbk)
3F	?
select convert(a using binary) from t;
convert(a using binary)
ä¸­æ–‡
å•Š
a
1
ã…‚
select convert(convert('ä¸­æ–‡' using gbk) using binary), convert('ä¸­æ–‡' using binary);
convert(convert('ä¸­æ–‡' using gbk) using binary)	convert('ä¸­æ–‡' using binary)
ÖÐÎÄ	ä¸­æ–‡
select convert(convert('ã…‚' using gbk) using binary), convert('ã…‚' using binary);
convert(convert('ã…‚' using gbk) using binary)	convert('ã…‚' using binary)
?	ã…‚
drop table if exists t;
create table t (a char(20) charset utf8mb4, b char(20) charset gbk, c binary(20));
insert into t values ('ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰');
select md5(a), md5(b), md5(c) from t;
md5(a)	md5(b)	md5(c)
8093a32450075324682d01456d6e3919	a45d4af7b243e7f393fa09bed72ac73e	aae0117857fe54811a5239275dd81133
set @@tidb_enable_vectorized_expression = true;
select md5(a), md5(b), md5(c) from t;
md5(a)	md5(b)	md5(c)
8093a32450075324682d01456d6e3919	a45d4af7b243e7f393fa09bed72ac73e	aae0117857fe54811a5239275dd81133
set @@tidb_enable_vectorized_expression = false;
drop table if exists t;
create table t (a char(20) charset utf8mb4, b char(20) charset gbk, c binary(20));
insert into t values ('ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰', 'ä¸€äºŒä¸‰');
select decode(encode(a,"monty"),"monty") = a, md5(decode(encode(b,"monty"),"monty")) = md5(b), decode(encode(c,"monty"),"monty") = c from t;
decode(encode(a,"monty"),"monty") = a	md5(decode(encode(b,"monty"),"monty")) = md5(b)	decode(encode(c,"monty"),"monty") = c
1	1	1
set @@tidb_enable_vectorized_expression = true;
select decode(encode(a,"monty"),"monty") = a, md5(decode(encode(b,"monty"),"monty")) = md5(b), decode(encode(c,"monty"),"monty") = c from t;
decode(encode(a,"monty"),"monty") = a	md5(decode(encode(b,"monty"),"monty")) = md5(b)	decode(encode(c,"monty"),"monty") = c
1	1	1
set @@tidb_enable_vectorized_expression = false;
set @@block_encryption_mode='aes-128-ecb';
select hex(aes_decrypt(0xC54279F381B0710E145E94106F03C94C, '123')) as a, hex(aes_decrypt(0x7A747EC6F1906276D036B1F3CE27BAAB, '123')) as b;
a	b
E4B880E4BA8CE4B889	D2BBB6FEC8FD
set @@block_encryption_mode='aes-128-ofb';
select hex(aes_decrypt(0x91C44DE866D0745252, '1234567890123456', '1234567890123456')) as a, hex(aes_decrypt(0xA7C77BF214A1, '1234567890123456', '1234567890123456')) as b;
a	b
E4B880E4BA8CE4B889	D2BBB6FEC8FD
set @@tidb_enable_vectorized_expression = true;
select hex(aes_decrypt(0x91C44DE866D0745252, '1234567890123456', '1234567890123456')) as a, hex(aes_decrypt(0xA7C77BF214A1, '1234567890123456', '1234567890123456')) as b;
a	b
E4B880E4BA8CE4B889	D2BBB6FEC8FD
set @@block_encryption_mode='aes-128-ecb';
select hex(aes_decrypt(0xC54279F381B0710E145E94106F03C94C, '123')) as a, hex(aes_decrypt(0x7A747EC6F1906276D036B1F3CE27BAAB, '123')) as b;
a	b
E4B880E4BA8CE4B889	D2BBB6FEC8FD
set @@tidb_enable_vectorized_expression = false;
