[
  {
    "Name": "TestFlatPhysicalPlan",
    "Cases": [
      {
        "SQL": "select * from t",
        "Main": [
          {
            "TextTreeExplainID": "TableReader_5",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 184001.33333333334
          },
          {
            "TextTreeExplainID": "└─TableFullScan_4",
            "Depth": 1,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 1785000
          }
        ],
        "CTEs": null
      },
      {
        "SQL": "select sum(t.a) from t join t2",
        "Main": [
          {
            "TextTreeExplainID": "HashAgg_8",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 1,
            "IsPhysicalPlan": true,
            "EstCost": 120121313.66766667
          },
          {
            "TextTreeExplainID": "└─Projection_34",
            "Depth": 1,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 100000000,
            "IsPhysicalPlan": true,
            "EstCost": 0
          },
          {
            "TextTreeExplainID": "  └─HashJoin_10",
            "Depth": 2,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 100000000,
            "IsPhysicalPlan": true,
            "EstCost": 60121280.666666664
          },
          {
            "TextTreeExplainID": "    ├─IndexReader_17(Build)",
            "Depth": 3,
            "DriverSide": 1,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 47834.666666666664
          },
          {
            "TextTreeExplainID": "    │ └─IndexFullScan_16",
            "Depth": 4,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 555000
          },
          {
            "TextTreeExplainID": "    └─TableReader_27(Probe)",
            "Depth": 3,
            "DriverSide": 2,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 43418
          },
          {
            "TextTreeExplainID": "      └─TableFullScan_26",
            "Depth": 4,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 570000
          }
        ],
        "CTEs": null
      },
      {
        "SQL": "select a from t use index (f) where f > 100",
        "Main": [
          {
            "TextTreeExplainID": "Projection_4",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 17963.77777777778
          },
          {
            "TextTreeExplainID": "└─IndexReader_6",
            "Depth": 1,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 15945.77777777778
          },
          {
            "TextTreeExplainID": "  └─IndexRangeScan_5",
            "Depth": 2,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 185000
          }
        ],
        "CTEs": null
      },
      {
        "SQL": "select a from t use index () where f > 100",
        "Main": [
          {
            "TextTreeExplainID": "Projection_4",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 126630.44444444445
          },
          {
            "TextTreeExplainID": "└─TableReader_7",
            "Depth": 1,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 124612.44444444445
          },
          {
            "TextTreeExplainID": "  └─Selection_6",
            "Depth": 2,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 3333.3333333333335,
            "IsPhysicalPlan": true,
            "EstCost": 1815000
          },
          {
            "TextTreeExplainID": "    └─TableFullScan_5",
            "Depth": 3,
            "DriverSide": 0,
            "IsRoot": false,
            "StoreType": 0,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 10000,
            "IsPhysicalPlan": true,
            "EstCost": 1785000
          }
        ],
        "CTEs": null
      },
      {
        "SQL": "with cte1 as (select a, b from t), cte2 as (select a, b from t2) select * from cte1 join cte2 on cte1.a = cte2.a",
        "Main": [
          {
            "TextTreeExplainID": "HashJoin_28",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 8000,
            "IsPhysicalPlan": true,
            "EstCost": 321729.7333333334
          },
          {
            "TextTreeExplainID": "├─Selection_30(Build)",
            "Depth": 1,
            "DriverSide": 1,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 6400,
            "IsPhysicalPlan": true,
            "EstCost": 189852.6666666667
          },
          {
            "TextTreeExplainID": "│ └─CTEFullScan_31",
            "Depth": 2,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 8000,
            "IsPhysicalPlan": true,
            "EstCost": 0
          },
          {
            "TextTreeExplainID": "└─Selection_32(Probe)",
            "Depth": 1,
            "DriverSide": 2,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 6400,
            "IsPhysicalPlan": true,
            "EstCost": 107852.66666666666
          },
          {
            "TextTreeExplainID": "  └─CTEFullScan_33",
            "Depth": 2,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 8000,
            "IsPhysicalPlan": true,
            "EstCost": 0
          }
        ],
        "CTEs": [
          [
            {
              "TextTreeExplainID": "CTE_0",
              "Depth": 0,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 8000,
              "IsPhysicalPlan": true,
              "EstCost": 0
            },
            {
              "TextTreeExplainID": "└─Selection_13(Seed Part)",
              "Depth": 1,
              "DriverSide": 3,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 8000,
              "IsPhysicalPlan": true,
              "EstCost": 165852.6666666667
            },
            {
              "TextTreeExplainID": "  └─TableReader_16",
              "Depth": 2,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 10000,
              "IsPhysicalPlan": true,
              "EstCost": 129834.66666666667
            },
            {
              "TextTreeExplainID": "    └─TableFullScan_15",
              "Depth": 3,
              "DriverSide": 0,
              "IsRoot": false,
              "StoreType": 0,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 10000,
              "IsPhysicalPlan": true,
              "EstCost": 1785000
            }
          ],
          [
            {
              "TextTreeExplainID": "CTE_1",
              "Depth": 0,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 8000,
              "IsPhysicalPlan": true,
              "EstCost": 0
            },
            {
              "TextTreeExplainID": "└─Selection_18(Seed Part)",
              "Depth": 1,
              "DriverSide": 3,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 8000,
              "IsPhysicalPlan": true,
              "EstCost": 83852.66666666666
            },
            {
              "TextTreeExplainID": "  └─IndexReader_23",
              "Depth": 2,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 10000,
              "IsPhysicalPlan": true,
              "EstCost": 47834.666666666664
            },
            {
              "TextTreeExplainID": "    └─IndexFullScan_22",
              "Depth": 3,
              "DriverSide": 0,
              "IsRoot": false,
              "StoreType": 0,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 10000,
              "IsPhysicalPlan": true,
              "EstCost": 555000
            }
          ]
        ]
      },
      {
        "SQL": "WITH RECURSIVE cte (n) AS(  SELECT 1  UNION ALL  SELECT n + 1 FROM cte WHERE n < 5)SELECT * FROM cte;",
        "Main": [
          {
            "TextTreeExplainID": "CTEFullScan_17",
            "Depth": 0,
            "DriverSide": 0,
            "IsRoot": true,
            "StoreType": 2,
            "ReqType": 0,
            "StatsInfoAvailable": true,
            "EstRows": 1.8,
            "IsPhysicalPlan": true,
            "EstCost": 0
          }
        ],
        "CTEs": [
          [
            {
              "TextTreeExplainID": "CTE_0",
              "Depth": 0,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 1.8,
              "IsPhysicalPlan": true,
              "EstCost": 0
            },
            {
              "TextTreeExplainID": "├─Projection_11(Seed Part)",
              "Depth": 1,
              "DriverSide": 3,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 1,
              "IsPhysicalPlan": true,
              "EstCost": 18.6
            },
            {
              "TextTreeExplainID": "│ └─TableDual_12",
              "Depth": 2,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 1,
              "IsPhysicalPlan": true,
              "EstCost": 0
            },
            {
              "TextTreeExplainID": "└─Projection_13(Recursive Part)",
              "Depth": 1,
              "DriverSide": 4,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 0.8,
              "IsPhysicalPlan": true,
              "EstCost": 21.48
            },
            {
              "TextTreeExplainID": "  └─Selection_14",
              "Depth": 2,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 0.8,
              "IsPhysicalPlan": true,
              "EstCost": 3
            },
            {
              "TextTreeExplainID": "    └─CTETable_15",
              "Depth": 3,
              "DriverSide": 0,
              "IsRoot": true,
              "StoreType": 2,
              "ReqType": 0,
              "StatsInfoAvailable": true,
              "EstRows": 1,
              "IsPhysicalPlan": true,
              "EstCost": 0
            }
          ]
        ]
      }
    ]
  }
]
