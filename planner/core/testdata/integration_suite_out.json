[
  {
    "Name": "TestPushLimitDownIndexLookUpReader",
    "Cases": null
  },
  {
    "Name": "TestIsFromUnixtimeNullRejective",
    "Cases": [
      {
        "SQL": "explain select * from t t1 left join t t2 on t1.a=t2.a where from_unixtime(t2.b);",
        "Plan": [
          "HashLeftJoin_8 9990.00 root inner join, inner:Selection_13, equal:[eq(test.t1.a, test.t2.a)]",
          "├─TableReader_12 9990.00 root data:Selection_11",
          "│ └─Selection_11 9990.00 cop not(isnull(test.t1.a))",
          "│   └─TableScan_10 10000.00 cop table:t1, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─Selection_13 7992.00 root from_unixtime(cast(test.t2.b))",
          "  └─TableReader_16 9990.00 root data:Selection_15",
          "    └─Selection_15 9990.00 cop not(isnull(test.t2.a))",
          "      └─TableScan_14 10000.00 cop table:t2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestSimplifyOuterJoinWithCast",
    "Cases": [
      {
        "SQL": "explain select * from t t1 left join t t2 on t1.a = t2.a where cast(t1.b as date) >= '2019-01-01'",
        "Plan": [
          "HashLeftJoin_8 10000.00 root left outer join, inner:TableReader_13, equal:[eq(test.t1.a, test.t2.a)]",
          "├─Selection_9 8000.00 root ge(cast(test.t1.b), 2019-01-01 00:00:00.000000)",
          "│ └─TableReader_11 10000.00 root data:TableScan_10",
          "│   └─TableScan_10 10000.00 cop table:t1, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_13 10000.00 root data:TableScan_12",
          "  └─TableScan_12 10000.00 cop table:t2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestMaxMinEliminate",
    "Cases": [
      {
        "SQL": "explain (select max(a) from t) union (select min(a) from t)",
        "Plan": [
          "HashAgg_19 2.00 root group by:max(a), funcs:firstrow(max(a))",
          "└─Union_20 2.00 root ",
          "  ├─StreamAgg_26 1.00 root funcs:max(test.t.a)",
          "  │ └─Limit_30 1.00 root offset:0, count:1",
          "  │   └─TableReader_40 1.00 root data:Limit_39",
          "  │     └─Limit_39 1.00 cop offset:0, count:1",
          "  │       └─TableScan_38 1.00 cop table:t, range:[-inf,+inf], keep order:true, desc, stats:pseudo",
          "  └─StreamAgg_48 1.00 root funcs:min(test.t.a)",
          "    └─Limit_52 1.00 root offset:0, count:1",
          "      └─TableReader_62 1.00 root data:Limit_61",
          "        └─Limit_61 1.00 cop offset:0, count:1",
          "          └─TableScan_60 1.00 cop table:t, range:[-inf,+inf], keep order:true, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestPartitionTableStats",
    "Cases": [
      {
        "SQL": "explain select * from t order by a",
        "Result": [
          "Sort_8 10005.00 root test.t.a:asc",
          "└─Union_11 10005.00 root ",
          "  ├─TableReader_13 10000.00 root data:TableScan_12",
          "  │ └─TableScan_12 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "  ├─TableReader_15 1.00 root data:TableScan_14",
          "  │ └─TableScan_14 1.00 cop table:t, partition:p1, range:[-inf,+inf], keep order:false",
          "  └─TableReader_17 4.00 root data:TableScan_16",
          "    └─TableScan_16 4.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false"
        ]
      },
      {
        "SQL": "select * from t order by a",
        "Result": [
          "15 5",
          "21 1",
          "22 2",
          "23 3",
          "24 4"
        ]
      },
      {
        "SQL": "explain select * from t order by a limit 3",
        "Result": [
          "TopN_16 3.00 root test.t.a:asc, offset:0, count:3",
          "└─Union_20 7.00 root ",
          "  ├─TopN_21 3.00 root test.t.a:asc, offset:0, count:3",
          "  │ └─TableReader_29 3.00 root data:TopN_28",
          "  │   └─TopN_28 3.00 cop test.t.a:asc, offset:0, count:3",
          "  │     └─TableScan_27 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "  ├─TopN_34 1.00 root test.t.a:asc, offset:0, count:3",
          "  │ └─TableReader_42 1.00 root data:TableScan_41",
          "  │   └─TableScan_41 1.00 cop table:t, partition:p1, range:[-inf,+inf], keep order:false",
          "  └─TopN_45 3.00 root test.t.a:asc, offset:0, count:3",
          "    └─TableReader_53 4.00 root data:TableScan_52",
          "      └─TableScan_52 4.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false"
        ]
      },
      {
        "SQL": "select * from t order by a limit 3",
        "Result": [
          "15 5",
          "21 1",
          "22 2"
        ]
      }
    ]
  },
  {
<<<<<<< HEAD
=======
    "Name": "TestIndexMerge",
    "Cases": [
      {
        "SQL": "explain select /*+ USE_INDEX_MERGE(t, a, b) */ * from t where a = 1 or b = 2",
        "Plan": [
          "IndexMerge_8 2.00 root  ",
          "├─IndexRangeScan_5(Build) 1.00 cop[tikv] table:t, index:a(a) range:[1,1], keep order:false, stats:pseudo",
          "├─IndexRangeScan_6(Build) 1.00 cop[tikv] table:t, index:b(b) range:[2,2], keep order:false, stats:pseudo",
          "└─TableRowIDScan_7(Probe) 2.00 cop[tikv] table:t keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select /*+ USE_INDEX_MERGE(t, primary) */ * from t where 1 or t.c",
        "Plan": [
          "IndexMerge_8 10000.00 root  ",
          "├─TableFullScan_5(Build) 10000.00 cop[tikv] table:t keep order:false, stats:pseudo",
          "├─TableRangeScan_6(Build) 6666.67 cop[tikv] table:t range:[-inf,0), (0,+inf], keep order:false, stats:pseudo",
          "└─TableRowIDScan_7(Probe) 10000.00 cop[tikv] table:t keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select /*+ USE_INDEX_MERGE(t, a, b, c) */ * from t where 1 or t.a = 1 or t.b = 2",
        "Plan": [
          "TableReader_7 8000.40 root  data:Selection_6",
          "└─Selection_6 8000.40 cop[tikv]  or(1, or(eq(test.t.a, 1), eq(test.t.b, 2)))",
          "  └─TableFullScan_5 10000.00 cop[tikv] table:t keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestIndexMergeHint4CNF",
    "Cases": [
      {
        "SQL": "explain select * from t where b = 1 and (a = 1 or c = 1)",
        "Plan": [
          "IndexLookUp_11 0.02 root  ",
          "├─IndexRangeScan_8(Build) 10.00 cop[tikv] table:t, index:b(b) range:[1,1], keep order:false, stats:pseudo",
          "└─Selection_10(Probe) 0.02 cop[tikv]  or(eq(test.t.a, 1), eq(test.t.c, 1))",
          "  └─TableRowIDScan_9 10.00 cop[tikv] table:t keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select /*+ USE_INDEX_MERGE(t, a, c) */ * from t where b = 1 and (a = 1 or c = 1)",
        "Plan": [
          "IndexMerge_9 0.02 root  ",
          "├─IndexRangeScan_5(Build) 10.00 cop[tikv] table:t, index:a(a) range:[1,1], keep order:false, stats:pseudo",
          "├─IndexRangeScan_6(Build) 10.00 cop[tikv] table:t, index:c(c) range:[1,1], keep order:false, stats:pseudo",
          "└─Selection_8(Probe) 0.02 cop[tikv]  eq(test.t.b, 1)",
          "  └─TableRowIDScan_7 19.99 cop[tikv] table:t keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestSubqueryWithTopN",
    "Cases": [
      {
        "SQL": "desc select t1.b from t t1 where t1.b in (select t2.a from t t2 order by t1.a+t2.a limit 1)",
        "Plan": [
          "Projection_11 9990.00 root  test.t.b",
          "└─Apply_13 9990.00 root  semi join, equal:[eq(test.t.b, test.t.a)]",
          "  ├─TableReader_16(Build) 9990.00 root  data:Selection_15",
          "  │ └─Selection_15 9990.00 cop[tikv]  not(isnull(test.t.b))",
          "  │   └─TableFullScan_14 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo",
          "  └─Selection_17(Probe) 0.80 root  not(isnull(test.t.a))",
          "    └─Projection_26 1.00 root  test.t.a",
          "      └─TopN_18 1.00 root  Column#7, offset:0, count:1",
          "        └─Projection_27 1.00 root  test.t.a, plus(test.t.a, test.t.a)->Column#7",
          "          └─TableReader_23 1.00 root  data:TopN_22",
          "            └─TopN_22 1.00 cop[tikv]  plus(test.t.a, test.t.a), offset:0, count:1",
          "              └─TableFullScan_21 10000.00 cop[tikv] table:t2 keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "desc select t1.a from t t1 order by (t1.b = 1 and exists (select 1 from t t2 where t1.b = t2.b)) limit 1",
        "Plan": [
          "Projection_11 1.00 root  test.t.a",
          "└─Projection_20 1.00 root  test.t.a, test.t.b, Column#8",
          "  └─TopN_14 1.00 root  Column#10, offset:0, count:1",
          "    └─Projection_21 10000.00 root  test.t.a, test.t.b, Column#8, and(eq(test.t.b, 1), Column#8)->Column#10",
          "      └─HashJoin_15 10000.00 root  left outer semi join, equal:[eq(test.t.b, test.t.b)]",
          "        ├─TableReader_19(Build) 10000.00 root  data:TableFullScan_18",
          "        │ └─TableFullScan_18 10000.00 cop[tikv] table:t2 keep order:false, stats:pseudo",
          "        └─TableReader_17(Probe) 10000.00 root  data:TableFullScan_16",
          "          └─TableFullScan_16 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "desc select * from (select b+b as x from t) t1, t t2 where t1.x=t2.b order by t1.x limit 1",
        "Plan": [
          "TopN_15 1.00 root  Column#4, offset:0, count:1",
          "└─Projection_19 10000.00 root  Column#4, test.t.a, test.t.b",
          "  └─HashJoin_20 10000.00 root  inner join, equal:[eq(test.t.b, Column#4)]",
          "    ├─Projection_25(Build) 8000.00 root  plus(test.t.b, test.t.b)->Column#4",
          "    │ └─TableReader_28 8000.00 root  data:Selection_27",
          "    │   └─Selection_27 8000.00 cop[tikv]  not(isnull(plus(test.t.b, test.t.b)))",
          "    │     └─TableFullScan_26 10000.00 cop[tikv] table:t keep order:false, stats:pseudo",
          "    └─TableReader_24(Probe) 9990.00 root  data:Selection_23",
          "      └─Selection_23 9990.00 cop[tikv]  not(isnull(test.t.b))",
          "        └─TableFullScan_22 10000.00 cop[tikv] table:t2 keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestIndexJoinTableRange",
    "Cases": [
      {
        "SQL": "desc select /*+ TIDB_INLJ(t2)*/ * from t1, t2 where t1.a = t2.a and t1.b = t2.b",
        "Plan": [
          "IndexJoin_14 12487.50 root  inner join, inner:TableReader_10, outer key:test.t1.a, inner key:test.t2.a, equal cond:eq(test.t1.a, test.t2.a), eq(test.t1.b, test.t2.b)",
          "├─IndexReader_19(Build) 9990.00 root  index:IndexFullScan_18",
          "│ └─IndexFullScan_18 9990.00 cop[tikv] table:t1, index:idx_t1_b(b) keep order:false, stats:pseudo",
          "└─TableReader_10(Probe) 1.00 root  data:Selection_9",
          "  └─Selection_9 1.00 cop[tikv]  not(isnull(test.t2.b))",
          "    └─TableRangeScan_8 1.00 cop[tikv] table:t2 range: decided by [test.t1.a], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "desc select /*+ TIDB_INLJ(t2)*/ * from t1, t2 where t1.a = t2.a and t1.b = t2.a and t1.b = t2.b",
        "Plan": [
          "IndexJoin_13 12487.50 root  inner join, inner:TableReader_9, outer key:test.t1.a, test.t1.b, inner key:test.t2.a, test.t2.a, equal cond:eq(test.t1.a, test.t2.a), eq(test.t1.b, test.t2.a), eq(test.t1.b, test.t2.b)",
          "├─IndexReader_18(Build) 9990.00 root  index:IndexFullScan_17",
          "│ └─IndexFullScan_17 9990.00 cop[tikv] table:t1, index:idx_t1_b(b) keep order:false, stats:pseudo",
          "└─TableReader_9(Probe) 1.00 root  data:Selection_8",
          "  └─Selection_8 1.00 cop[tikv]  not(isnull(test.t2.b))",
          "    └─TableRangeScan_7 1.00 cop[tikv] table:t2 range: decided by [test.t1.a test.t1.b], keep order:false, stats:pseudo"
        ]
      }
    ]
  },
  {
    "Name": "TestHintWithRequiredProperty",
    "Cases": [
      {
        "SQL": "desc select /*+ INL_JOIN(t2) */ * from t t1, t t2 where t1.a = t2.b order by t2.a",
        "Plan": [
          "Sort_7 12487.50 root  test.t.a",
          "└─IndexJoin_15 12487.50 root  inner join, inner:IndexLookUp_14, outer key:test.t.a, inner key:test.t.b, equal cond:eq(test.t.a, test.t.b)",
          "  ├─TableReader_25(Build) 10000.00 root  data:TableFullScan_24",
          "  │ └─TableFullScan_24 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo",
          "  └─IndexLookUp_14(Probe) 1.25 root  ",
          "    ├─Selection_13(Build) 1.25 cop[tikv]  not(isnull(test.t.b))",
          "    │ └─IndexRangeScan_11 1.25 cop[tikv] table:t2, index:b(b) range: decided by [eq(test.t.b, test.t.a)], keep order:false, stats:pseudo",
          "    └─TableRowIDScan_12(Probe) 1.25 cop[tikv] table:t2 keep order:false, stats:pseudo"
        ],
        "Warnings": []
      },
      {
        "SQL": "desc select /*+ INL_HASH_JOIN(t2) */ * from t t1, t t2 where t1.a = t2.b order by t2.a",
        "Plan": [
          "Sort_7 12487.50 root  test.t.a",
          "└─IndexHashJoin_17 12487.50 root  inner join, inner:IndexLookUp_14, outer key:test.t.a, inner key:test.t.b, equal cond:eq(test.t.a, test.t.b)",
          "  ├─TableReader_25(Build) 10000.00 root  data:TableFullScan_24",
          "  │ └─TableFullScan_24 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo",
          "  └─IndexLookUp_14(Probe) 1.25 root  ",
          "    ├─Selection_13(Build) 1.25 cop[tikv]  not(isnull(test.t.b))",
          "    │ └─IndexRangeScan_11 1.25 cop[tikv] table:t2, index:b(b) range: decided by [eq(test.t.b, test.t.a)], keep order:false, stats:pseudo",
          "    └─TableRowIDScan_12(Probe) 1.25 cop[tikv] table:t2 keep order:false, stats:pseudo"
        ],
        "Warnings": []
      },
      {
        "SQL": "desc select /*+ INL_MERGE_JOIN(t2)*/ t1.a, t2.a from t t1, t t2 ,t t3 where t1.a = t2.a and t3.a=t2.a",
        "Plan": [
          "HashJoin_23 15625.00 root  inner join, equal:[eq(test.t.a, test.t.a)]",
          "├─TableReader_62(Build) 10000.00 root  data:TableFullScan_61",
          "│ └─TableFullScan_61 10000.00 cop[tikv] table:t3 keep order:false, stats:pseudo",
          "└─IndexMergeJoin_60(Probe) 12500.00 root  inner join, inner:TableReader_55, outer key:test.t.a, inner key:test.t.a",
          "  ├─TableReader_47(Build) 10000.00 root  data:TableFullScan_46",
          "  │ └─TableFullScan_46 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo",
          "  └─TableReader_55(Probe) 1.00 root  data:TableRangeScan_54",
          "    └─TableRangeScan_54 1.00 cop[tikv] table:t2 range: decided by [test.t.a], keep order:true, stats:pseudo"
        ],
        "Warnings": []
      },
      {
        "SQL": "desc select * from t t1, (select /*+ HASH_AGG() */ b, max(a) from t t2 group by b) t2 where t1.b = t2.b order by t1.b",
        "Plan": [
          "Sort_10 9990.00 root  test.t.b",
          "└─Projection_12 9990.00 root  test.t.a, test.t.b, test.t.c, test.t.b, Column#7",
          "  └─HashJoin_27 9990.00 root  inner join, equal:[eq(test.t.b, test.t.b)]",
          "    ├─HashAgg_47(Build) 7992.00 root  group by:test.t.b, funcs:max(Column#10)->Column#7, funcs:firstrow(test.t.b)->test.t.b",
          "    │ └─IndexReader_48 7992.00 root  index:HashAgg_44",
          "    │   └─HashAgg_44 7992.00 cop[tikv]  group by:test.t.b, funcs:max(test.t.a)->Column#10",
          "    │     └─IndexFullScan_37 9990.00 cop[tikv] table:t2, index:b(b) keep order:false, stats:pseudo",
          "    └─TableReader_51(Probe) 9990.00 root  data:Selection_50",
          "      └─Selection_50 9990.00 cop[tikv]  not(isnull(test.t.b))",
          "        └─TableFullScan_49 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warnings": []
      },
      {
        "SQL": "desc select /*+ INL_HASH_JOIN(t2) */ distinct t2.a from t t1 join t t2 on t1.a = t2.a",
        "Plan": [
          "IndexHashJoin_15 12500.00 root  inner join, inner:TableReader_10, outer key:test.t.a, inner key:test.t.a, equal cond:eq(test.t.a, test.t.a)",
          "├─TableReader_19(Build) 10000.00 root  data:TableFullScan_18",
          "│ └─TableFullScan_18 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo",
          "└─TableReader_10(Probe) 1.00 root  data:TableRangeScan_9",
          "  └─TableRangeScan_9 1.00 cop[tikv] table:t2 range: decided by [test.t.a], keep order:false, stats:pseudo"
        ],
        "Warnings": []
      },
      {
        "SQL": "desc select /*+ INL_JOIN(t2) */ * from t t1, t t2 where t1.a = t2.c order by t1.a",
        "Plan": [
          "Sort_7 12487.50 root  test.t.a",
          "└─HashJoin_19 12487.50 root  inner join, equal:[eq(test.t.a, test.t.c)]",
          "  ├─TableReader_23(Build) 9990.00 root  data:Selection_22",
          "  │ └─Selection_22 9990.00 cop[tikv]  not(isnull(test.t.c))",
          "  │   └─TableFullScan_21 10000.00 cop[tikv] table:t2 keep order:false, stats:pseudo",
          "  └─TableReader_25(Probe) 10000.00 root  data:TableFullScan_24",
          "    └─TableFullScan_24 10000.00 cop[tikv] table:t1 keep order:false, stats:pseudo"
        ],
        "Warnings": [
          "[planner:1815]Optimizer Hint /*+ INL_JOIN(t2) */ or /*+ TIDB_INLJ(t2) */ is inapplicable",
          "[planner:1815]Optimizer Hint /*+ INL_JOIN(t2) */ or /*+ TIDB_INLJ(t2) */ is inapplicable"
        ]
      }
    ]
  },
  {
    "Name": "TestIndexHintWarning",
    "Cases": [
      {
        "SQL": "select /*+ USE_INDEX(t1, j) */ * from t1",
        "Warnings": [
          "[planner:1176]Key 'j' doesn't exist in table 't1'"
        ]
      },
      {
        "SQL": "select /*+ IGNORE_INDEX(t1, j) */ * from t1",
        "Warnings": [
          "[planner:1176]Key 'j' doesn't exist in table 't1'"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX(t2, a, b, c) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index(test.t2, a, b, c) is inapplicable, check whether the table(test.t2) exists"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX(t2) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index(test.t2) is inapplicable, check whether the table(test.t2) exists"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX(t1, a), USE_INDEX(t2, a), USE_INDEX(t3, a) */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]use_index(test.t3, a) is inapplicable, check whether the table(test.t3) exists"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX(t3, a), USE_INDEX(t4, b), IGNORE_INDEX(t3, a) */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]use_index(test.t3, a) is inapplicable, check whether the table(test.t3) exists",
          "[planner:1815]use_index(test.t4, b) is inapplicable, check whether the table(test.t4) exists",
          "[planner:1815]ignore_index(test.t3, a) is inapplicable, check whether the table(test.t3) exists"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE(t3, a, b, d) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index_merge(test.t3, a, b, d) is inapplicable, check whether the table(test.t3) exists"
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE(t1, a, b, c, d) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index_merge(test.t1, a, b, c, d) is inapplicable, check whether the indexes (c, d) exist, or the indexes are conflicted with use_index/ignore_index hints."
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE(t1, a, b), USE_INDEX(t1, a) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index_merge(test.t1, a, b) is inapplicable, check whether the indexes (b) exist, or the indexes are conflicted with use_index/ignore_index hints."
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE(t1, a, b), IGNORE_INDEX(t1, a) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index_merge(test.t1, a, b) is inapplicable, check whether the indexes (a) exist, or the indexes are conflicted with use_index/ignore_index hints."
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE(t1, primary, a, b, c) */ * from t1",
        "Warnings": [
          "[planner:1815]use_index_merge(test.t1, primary, a, b, c) is inapplicable, check whether the indexes (c) exist, or the indexes are conflicted with use_index/ignore_index hints."
        ]
      }
    ]
  },
  {
    "Name": "TestHintWithoutTableWarning",
    "Cases": [
      {
        "SQL": "select /*+ TIDB_SMJ() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint TIDB_SMJ() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ MERGE_JOIN() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint MERGE_JOIN() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ INL_JOIN() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint INL_JOIN() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ TIDB_INLJ() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint TIDB_INLJ() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ INL_HASH_JOIN() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint INL_HASH_JOIN() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ INL_MERGE_JOIN() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint INL_MERGE_JOIN() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ HASH_JOIN() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[planner:1815]Hint HASH_JOIN() is inapplicable. Please specify the table names in the arguments."
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[parser:1064]You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use [parser:8064]Optimizer hint syntax error at line 1 column 22 near \") */\" "
        ]
      },
      {
        "SQL": "select /*+ IGNORE_INDEX() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[parser:1064]You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use [parser:8064]Optimizer hint syntax error at line 1 column 25 near \") */\" "
        ]
      },
      {
        "SQL": "select /*+ USE_INDEX_MERGE() */ * from t1, t2 where t1.a=t2.a",
        "Warnings": [
          "[parser:1064]You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use [parser:8064]Optimizer hint syntax error at line 1 column 28 near \") */\" "
        ]
      }
    ]
  },
  {
>>>>>>> 857e3da6e... planner: join reorder should not change the order of output columns (#16852)
    "Name": "TestPartitionPruningForInExpr",
    "Cases": [
      {
        "SQL": "explain select * from t where a in (1, 2,'11')",
        "Plan": [
          "Union_8 60.00 root ",
          "├─TableReader_11 30.00 root data:Selection_10",
          "│ └─Selection_10 30.00 cop in(test.t.a, 1, 2, 11)",
          "│   └─TableScan_9 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_14 30.00 root data:Selection_13",
          "  └─Selection_13 30.00 cop in(test.t.a, 1, 2, 11)",
          "    └─TableScan_12 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select * from t where a in (17, null)",
        "Plan": [
          "Union_8 20.00 root ",
          "├─TableReader_11 10.00 root data:Selection_10",
          "│ └─Selection_10 10.00 cop in(test.t.a, 17, NULL)",
          "│   └─TableScan_9 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_14 10.00 root data:Selection_13",
          "  └─Selection_13 10.00 cop in(test.t.a, 17, NULL)",
          "    └─TableScan_12 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select * from t where a in (16, 'abc')",
        "Plan": [
          "Union_8 40.00 root ",
          "├─TableReader_11 20.00 root data:Selection_10",
          "│ └─Selection_10 20.00 cop in(test.t.a, 16, 0)",
          "│   └─TableScan_9 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_14 20.00 root data:Selection_13",
          "  └─Selection_13 20.00 cop in(test.t.a, 16, 0)",
          "    └─TableScan_12 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select * from t where a in (15, 0.12, 3.47)",
        "Plan": [
          "Union_9 30.00 root ",
          "├─TableReader_12 10.00 root data:Selection_11",
          "│ └─Selection_11 10.00 cop or(eq(test.t.a, 15), 0)",
          "│   └─TableScan_10 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "├─TableReader_15 10.00 root data:Selection_14",
          "│ └─Selection_14 10.00 cop or(eq(test.t.a, 15), 0)",
          "│   └─TableScan_13 10000.00 cop table:t, partition:p1, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_18 10.00 root data:Selection_17",
          "  └─Selection_17 10.00 cop or(eq(test.t.a, 15), 0)",
          "    └─TableScan_16 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select * from t where a in (0.12, 3.47)",
        "Plan": [
          "TableDual_6 0.00 root rows:0"
        ]
      },
      {
        "SQL": "explain select * from t where a in (14, floor(3.47))",
        "Plan": [
          "Union_8 40.00 root ",
          "├─TableReader_11 20.00 root data:Selection_10",
          "│ └─Selection_10 20.00 cop in(test.t.a, 14, 3)",
          "│   └─TableScan_9 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_14 20.00 root data:Selection_13",
          "  └─Selection_13 20.00 cop in(test.t.a, 14, 3)",
          "    └─TableScan_12 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      },
      {
        "SQL": "explain select * from t where b in (3, 4)",
        "Plan": [
          "Union_9 60.00 root ",
          "├─TableReader_12 20.00 root data:Selection_11",
          "│ └─Selection_11 20.00 cop in(test.t.b, 3, 4)",
          "│   └─TableScan_10 10000.00 cop table:t, partition:p0, range:[-inf,+inf], keep order:false, stats:pseudo",
          "├─TableReader_15 20.00 root data:Selection_14",
          "│ └─Selection_14 20.00 cop in(test.t.b, 3, 4)",
          "│   └─TableScan_13 10000.00 cop table:t, partition:p1, range:[-inf,+inf], keep order:false, stats:pseudo",
          "└─TableReader_18 20.00 root data:Selection_17",
          "  └─Selection_17 20.00 cop in(test.t.b, 3, 4)",
          "    └─TableScan_16 10000.00 cop table:t, partition:p2, range:[-inf,+inf], keep order:false, stats:pseudo"
        ]
      }
    ]
  }
]
