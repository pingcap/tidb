[
  {
    "Name": "TestExplainVisual",
    "Cases": [
      {
        "SQL": "create table t(a int, b int, index ia(a));",
        "Main": null
      },
      {
        "SQL": "create table t2(a int, b int);",
        "Main": null
      },
      {
        "SQL": "explain format = 'visual' select * from t",
        "Main": {
          "main": {
            "name": "TableReader_5",
            "cost": 48834.666666666664,
            "est_rows": 10000,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb",
            "children": [
              {
                "name": "TableFullScan_4",
                "cost": 570020,
                "est_rows": 10000,
                "act_rows": 0,
                "access_table": "t",
                "access_index": "",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tikv"
              }
            ]
          },
          "with_runtime_stats": false
        }
      },
      {
        "SQL": "explain format = 'visual' select sum(t.a) from t join t2",
        "Main": {
          "main": {
            "name": "HashAgg_8",
            "cost": 120107897.001,
            "est_rows": 1,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb",
            "children": [
              {
                "name": "Projection_20",
                "cost": 0,
                "est_rows": 100000000,
                "act_rows": 0,
                "access_table": "",
                "access_index": "",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tidb",
                "children": [
                  {
                    "name": "HashJoin_10",
                    "cost": 60107864,
                    "est_rows": 100000000,
                    "act_rows": 0,
                    "access_table": "",
                    "access_index": "",
                    "access_partition": "",
                    "time_us": 0,
                    "run_at": "tidb",
                    "children": [
                      {
                        "name": "IndexReader_15",
                        "cost": 34418,
                        "est_rows": 10000,
                        "act_rows": 0,
                        "access_table": "",
                        "access_index": "",
                        "access_partition": "",
                        "time_us": 0,
                        "run_at": "tidb",
                        "children": [
                          {
                            "name": "IndexFullScan_14",
                            "cost": 435020,
                            "est_rows": 10000,
                            "act_rows": 0,
                            "access_table": "t",
                            "access_index": "ia",
                            "access_partition": "",
                            "time_us": 0,
                            "run_at": "tikv"
                          }
                        ]
                      },
                      {
                        "name": "TableReader_17",
                        "cost": 43418,
                        "est_rows": 10000,
                        "act_rows": 0,
                        "access_table": "",
                        "access_index": "",
                        "access_partition": "",
                        "time_us": 0,
                        "run_at": "tidb",
                        "children": [
                          {
                            "name": "TableFullScan_16",
                            "cost": 570020,
                            "est_rows": 10000,
                            "act_rows": 0,
                            "access_table": "t2",
                            "access_index": "",
                            "access_partition": "",
                            "time_us": 0,
                            "run_at": "tikv"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "with_runtime_stats": false
        }
      },
      {
        "SQL": "explain format = 'visual' select a from t use index (ia) where a > 100",
        "Main": {
          "main": {
            "name": "IndexReader_6",
            "cost": 11473.555555555557,
            "est_rows": 3333.3333333333335,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb",
            "children": [
              {
                "name": "IndexRangeScan_5",
                "cost": 145020,
                "est_rows": 3333.3333333333335,
                "act_rows": 0,
                "access_table": "t",
                "access_index": "ia",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tikv"
              }
            ]
          },
          "with_runtime_stats": false
        }
      },
      {
        "SQL": "explain format = 'visual' select a from t use index () where a > 100",
        "Main": {
          "main": {
            "name": "TableReader_7",
            "cost": 41806.88888888889,
            "est_rows": 3333.3333333333335,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb",
            "children": [
              {
                "name": "Selection_6",
                "cost": 600020,
                "est_rows": 3333.3333333333335,
                "act_rows": 0,
                "access_table": "",
                "access_index": "",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tikv",
                "children": [
                  {
                    "name": "TableFullScan_5",
                    "cost": 570020,
                    "est_rows": 10000,
                    "act_rows": 0,
                    "access_table": "t",
                    "access_index": "",
                    "access_partition": "",
                    "time_us": 0,
                    "run_at": "tikv"
                  }
                ]
              }
            ]
          },
          "with_runtime_stats": false
        }
      },
      {
        "SQL": "explain format = 'visual' with cte1 as (select a, b from t), cte2 as (select a, b from t2) select * from cte1 join cte2 on cte1.a = cte2.a",
        "Main": {
          "main": {
            "name": "HashJoin_24",
            "cost": 241729.7333333333,
            "est_rows": 8000,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb",
            "children": [
              {
                "name": "Selection_26",
                "cost": 108852.66666666666,
                "est_rows": 6400,
                "act_rows": 0,
                "access_table": "",
                "access_index": "",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tidb",
                "children": [
                  {
                    "name": "CTEFullScan_27",
                    "cost": 0,
                    "est_rows": 8000,
                    "act_rows": 0,
                    "access_table": "",
                    "access_index": "",
                    "access_partition": "",
                    "time_us": 0,
                    "run_at": "tidb"
                  }
                ]
              },
              {
                "name": "Selection_28",
                "cost": 108852.66666666666,
                "est_rows": 6400,
                "act_rows": 0,
                "access_table": "",
                "access_index": "",
                "access_partition": "",
                "time_us": 0,
                "run_at": "tidb",
                "children": [
                  {
                    "name": "CTEFullScan_29",
                    "cost": 0,
                    "est_rows": 8000,
                    "act_rows": 0,
                    "access_table": "",
                    "access_index": "",
                    "access_partition": "",
                    "time_us": 0,
                    "run_at": "tidb"
                  }
                ]
              }
            ]
          },
          "ctes": [
            {
              "name": "CTE_0",
              "cost": 0,
              "est_rows": 8000,
              "act_rows": 0,
              "access_table": "",
              "access_index": "",
              "access_partition": "",
              "time_us": 0,
              "run_at": "tidb",
              "children": [
                {
                  "name": "Selection_13",
                  "cost": 84852.66666666666,
                  "est_rows": 8000,
                  "act_rows": 0,
                  "access_table": "",
                  "access_index": "",
                  "access_partition": "",
                  "time_us": 0,
                  "run_at": "tidb",
                  "children": [
                    {
                      "name": "TableReader_16",
                      "cost": 48834.666666666664,
                      "est_rows": 10000,
                      "act_rows": 0,
                      "access_table": "",
                      "access_index": "",
                      "access_partition": "",
                      "time_us": 0,
                      "run_at": "tidb",
                      "children": [
                        {
                          "name": "TableFullScan_15",
                          "cost": 570020,
                          "est_rows": 10000,
                          "act_rows": 0,
                          "access_table": "t",
                          "access_index": "",
                          "access_partition": "",
                          "time_us": 0,
                          "run_at": "tikv"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "CTE_1",
              "cost": 0,
              "est_rows": 8000,
              "act_rows": 0,
              "access_table": "",
              "access_index": "",
              "access_partition": "",
              "time_us": 0,
              "run_at": "tidb",
              "children": [
                {
                  "name": "Selection_18",
                  "cost": 84852.66666666666,
                  "est_rows": 8000,
                  "act_rows": 0,
                  "access_table": "",
                  "access_index": "",
                  "access_partition": "",
                  "time_us": 0,
                  "run_at": "tidb",
                  "children": [
                    {
                      "name": "TableReader_21",
                      "cost": 48834.666666666664,
                      "est_rows": 10000,
                      "act_rows": 0,
                      "access_table": "",
                      "access_index": "",
                      "access_partition": "",
                      "time_us": 0,
                      "run_at": "tidb",
                      "children": [
                        {
                          "name": "TableFullScan_20",
                          "cost": 570020,
                          "est_rows": 10000,
                          "act_rows": 0,
                          "access_table": "t2",
                          "access_index": "",
                          "access_partition": "",
                          "time_us": 0,
                          "run_at": "tikv"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "with_runtime_stats": false
        }
      },
      {
        "SQL": "explain format = 'visual' WITH RECURSIVE cte (n) AS(  SELECT 1  UNION ALL  SELECT n + 1 FROM cte WHERE n < 5)SELECT * FROM cte;",
        "Main": {
          "main": {
            "name": "CTEFullScan_17",
            "cost": 0,
            "est_rows": 1.8,
            "act_rows": 0,
            "access_table": "",
            "access_index": "",
            "access_partition": "",
            "time_us": 0,
            "run_at": "tidb"
          },
          "ctes": [
            {
              "name": "CTE_0",
              "cost": 0,
              "est_rows": 1.8,
              "act_rows": 0,
              "access_table": "",
              "access_index": "",
              "access_partition": "",
              "time_us": 0,
              "run_at": "tidb",
              "children": [
                {
                  "name": "Projection_11",
                  "cost": 18.6,
                  "est_rows": 1,
                  "act_rows": 0,
                  "access_table": "",
                  "access_index": "",
                  "access_partition": "",
                  "time_us": 0,
                  "run_at": "tidb",
                  "children": [
                    {
                      "name": "TableDual_12",
                      "cost": 0,
                      "est_rows": 1,
                      "act_rows": 0,
                      "access_table": "",
                      "access_index": "",
                      "access_partition": "",
                      "time_us": 0,
                      "run_at": "tidb"
                    }
                  ]
                },
                {
                  "name": "Projection_13",
                  "cost": 21.48,
                  "est_rows": 0.8,
                  "act_rows": 0,
                  "access_table": "",
                  "access_index": "",
                  "access_partition": "",
                  "time_us": 0,
                  "run_at": "tidb",
                  "children": [
                    {
                      "name": "Selection_14",
                      "cost": 3,
                      "est_rows": 0.8,
                      "act_rows": 0,
                      "access_table": "",
                      "access_index": "",
                      "access_partition": "",
                      "time_us": 0,
                      "run_at": "tidb",
                      "children": [
                        {
                          "name": "CTETable_15",
                          "cost": 0,
                          "est_rows": 1,
                          "act_rows": 0,
                          "access_table": "",
                          "access_index": "",
                          "access_partition": "",
                          "time_us": 0,
                          "run_at": "tidb"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "with_runtime_stats": false
        }
      }
    ]
  }
]
