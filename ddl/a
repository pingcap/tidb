=== RUN   TestT
[2022/02/16 12:41:55.351 +08:00] [INFO] [tidb.go:72] ["new domain"] [store=015b2584-2e04-47ea-abb5-59dc931a8d6c] ["ddl lease"=600ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2022/02/16 12:41:55.356 +08:00] [INFO] [domain.go:169] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=741.041µs]
[2022/02/16 12:41:55.356 +08:00] [INFO] [domain.go:432] ["full load and reset schema validator"]
[2022/02/16 12:41:55.356 +08:00] [INFO] [ddl.go:366] ["[ddl] start DDL"] [ID=74fa4f52-31d2-4efe-8b46-0463186052c3] [runWorker=true]
[2022/02/16 12:41:55.356 +08:00] [INFO] [ddl.go:355] ["[ddl] start delRangeManager OK"] ["is a emulator"=true]
[2022/02/16 12:41:55.356 +08:00] [INFO] [delete_range.go:142] ["[ddl] start delRange emulator"]
[2022/02/16 12:41:55.356 +08:00] [INFO] [ddl_worker.go:156] ["[ddl] start DDL worker"] [worker="worker 1, tp general"]
[2022/02/16 12:41:55.356 +08:00] [INFO] [ddl_worker.go:156] ["[ddl] start DDL worker"] [worker="worker 2, tp add index"]
[2022/02/16 12:41:55.357 +08:00] [INFO] [tidb.go:260] ["rollbackTxn called due to ddl/autocommit failure"]
[2022/02/16 12:41:55.357 +08:00] [WARN] [session.go:1862] ["run statement failed"] [schemaVersion=0] [error="[schema:1049]Unknown database 'mysql'"] [errorVerbose="[schema:1049]Unknown database 'mysql'\ngithub.com/pingcap/errors.AddStack\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20211224045212-9687c2b0f87c/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20211224045212-9687c2b0f87c/normalize.go:164\ngithub.com/pingcap/tidb/executor.(*SimpleExec).executeUse\n\t/Users/bba/pc/tidb/executor/simple.go:557\ngithub.com/pingcap/tidb/executor.(*SimpleExec).Next\n\t/Users/bba/pc/tidb/executor/simple.go:127\ngithub.com/pingcap/tidb/executor.Next\n\t/Users/bba/pc/tidb/executor/executor.go:286\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/Users/bba/pc/tidb/executor/adapter.go:635\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/Users/bba/pc/tidb/executor/adapter.go:490\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/Users/bba/pc/tidb/executor/adapter.go:439\ngithub.com/pingcap/tidb/session.runStmt\n\t/Users/bba/pc/tidb/session/session.go:1982\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/bba/pc/tidb/session/session.go:1859\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternal\n\t/Users/bba/pc/tidb/session/session.go:1485\ngithub.com/pingcap/tidb/session.checkBootstrapped\n\t/Users/bba/pc/tidb/session/bootstrap.go:668\ngithub.com/pingcap/tidb/session.bootstrap\n\t/Users/bba/pc/tidb/session/bootstrap.go:396\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/bba/pc/tidb/session/session.go:2909\ngithub.com/pingcap/tidb/session.BootstrapSession\n\t/Users/bba/pc/tidb/session/session.go:2751\ngithub.com/pingcap/tidb/ddl_test.setUpSuite\n\t/Users/bba/pc/tidb/ddl/db_test.go:120\ngithub.com/pingcap/tidb/ddl_test.(*testDBSuite).SetUpSuite\n\t/Users/bba/pc/tidb/ddl/db_test.go:142\nreflect.Value.call\n\t/Users/bba/.gvm/gos/go1.17.4/src/reflect/value.go:543\nreflect.Value.Call\n\t/Users/bba/.gvm/gos/go1.17.4/src/reflect/value.go:339\ngithub.com/pingcap/check.(*suiteRunner).runFixture.func1\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/check@v0.0.0-20211026125417-57bd13f7b5f0/check.go:799\ngithub.com/pingcap/check.(*suiteRunner).forkCall.func1\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/check@v0.0.0-20211026125417-57bd13f7b5f0/check.go:739\nruntime.goexit\n\t/Users/bba/.gvm/gos/go1.17.4/src/runtime/asm_arm64.s:1133"] [session="{\n  \"currDBName\": \"\",\n  \"id\": 0,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2022/02/16 12:41:55.358 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2022/02/16 12:41:55.359 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:2, Type:create schema, State:none, SchemaState:queueing, SchemaID:1, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.359 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.359 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:2, Type:create schema, State:none, SchemaState:queueing, SchemaID:1, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.359 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2022/02/16 12:41:55.360 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:2, Type:create schema, State:none, SchemaState:queueing, SchemaID:1, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.359 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.361 +08:00] [INFO] [domain.go:169] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=689.458µs]
[2022/02/16 12:41:55.361 +08:00] [INFO] [domain.go:432] ["full load and reset schema validator"]
[2022/02/16 12:41:55.363 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=1] ["take time"=2.25975ms] [job="ID:2, Type:create schema, State:done, SchemaState:public, SchemaID:1, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.359 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.363 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:2, Type:create schema, State:synced, SchemaState:public, SchemaID:1, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.359 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.363 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=2]
[2022/02/16 12:41:55.363 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.363 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2022/02/16 12:41:55.364 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:4, Type:create schema, State:none, SchemaState:queueing, SchemaID:3, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.364 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.364 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:4, Type:create schema, State:none, SchemaState:queueing, SchemaID:3, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.364 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS `mysql`"]
[2022/02/16 12:41:55.364 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:4, Type:create schema, State:none, SchemaState:queueing, SchemaID:3, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.364 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.365 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=108.5µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:55.367 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=2] ["take time"=2.26175ms] [job="ID:4, Type:create schema, State:done, SchemaState:public, SchemaID:3, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.364 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.367 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:4, Type:create schema, State:synced, SchemaState:public, SchemaID:3, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.364 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.368 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=4]
[2022/02/16 12:41:55.368 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.368 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2022/02/16 12:41:55.369 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:6, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:5, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.369 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:6, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:5, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, User));"]
[2022/02/16 12:41:55.369 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:6, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:5, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.371 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=482.375µs] [phyTblIDs="[5]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.373 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=3] ["take time"=2.26325ms] [job="ID:6, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:5, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.374 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:6, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:5, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.375 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=6]
[2022/02/16 12:41:55.375 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.375 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2022/02/16 12:41:55.376 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:8, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:7, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.376 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:8, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:7, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2022/02/16 12:41:55.376 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:8, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:7, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.377 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=191.25µs] [phyTblIDs="[7]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.379 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=4] ["take time"=2.259833ms] [job="ID:8, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:7, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.379 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:8, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:7, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.380 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=8]
[2022/02/16 12:41:55.380 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.380 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2022/02/16 12:41:55.381 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:10, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:9, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.381 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:10, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:9, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2022/02/16 12:41:55.381 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:10, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:9, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.383 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=340.292µs] [phyTblIDs="[9]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.385 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=5] ["take time"=2.260542ms] [job="ID:10, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:9, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.385 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:10, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:9, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.386 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=10]
[2022/02/16 12:41:55.386 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.386 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64),\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64),\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2022/02/16 12:41:55.387 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:12, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:11, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.387 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.387 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:12, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:11, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.387 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64),\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64),\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2022/02/16 12:41:55.387 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:12, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:11, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.387 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.388 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=217.041µs] [phyTblIDs="[11]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.390 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=6] ["take time"=2.261084ms] [job="ID:12, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:11, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.387 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.391 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:12, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:11, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.387 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.391 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=12]
[2022/02/16 12:41:55.391 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.391 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64),\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64),\n\t\tColumn_name\tCHAR(64),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2022/02/16 12:41:55.392 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:14, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:13, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.392 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.392 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:14, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:13, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.392 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64),\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64),\n\t\tColumn_name\tCHAR(64),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2022/02/16 12:41:55.392 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:14, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:13, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.392 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.393 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=220.042µs] [phyTblIDs="[13]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.395 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=7] ["take time"=2.256083ms] [job="ID:14, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:13, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.392 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.396 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:14, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:13, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.392 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.396 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=14]
[2022/02/16 12:41:55.396 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.396 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2022/02/16 12:41:55.397 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:16, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:15, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.397 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.397 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:16, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:15, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.397 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2022/02/16 12:41:55.397 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:16, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:15, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.397 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.398 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=160.291µs] [phyTblIDs="[15]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.400 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=8] ["take time"=2.261292ms] [job="ID:16, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:15, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.397 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.400 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:16, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:15, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.397 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.401 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=16]
[2022/02/16 12:41:55.401 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.401 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2022/02/16 12:41:55.401 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:18, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:17, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.401 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:18, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:17, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2022/02/16 12:41:55.402 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:18, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:17, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.402 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=170.667µs] [phyTblIDs="[17]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.404 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=9] ["take time"=2.259334ms] [job="ID:18, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:17, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.405 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:18, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:17, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.401 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.405 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=18]
[2022/02/16 12:41:55.405 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.405 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2022/02/16 12:41:55.406 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:20, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:19, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.406 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:20, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:19, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2022/02/16 12:41:55.406 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:20, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:19, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.407 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=194µs] [phyTblIDs="[19]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.409 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=10] ["take time"=2.256375ms] [job="ID:20, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:19, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.410 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:20, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:19, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.406 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.410 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=20]
[2022/02/16 12:41:55.410 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.410 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2022/02/16 12:41:55.411 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:22, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:21, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.411 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:22, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:21, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2022/02/16 12:41:55.411 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:22, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:21, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.412 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=185.667µs] [phyTblIDs="[21]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.414 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=11] ["take time"=2.25725ms] [job="ID:22, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:21, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.414 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:22, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:21, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.411 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.415 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=22]
[2022/02/16 12:41:55.415 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.415 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2022/02/16 12:41:55.415 +08:00] [INFO] [ddl_api.go:699] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2022/02/16 12:41:55.416 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:24, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:23, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.415 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.416 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:24, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:23, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.415 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2022/02/16 12:41:55.416 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:24, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:23, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.415 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.417 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=247.334µs] [phyTblIDs="[23]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.419 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=12] ["take time"=2.262833ms] [job="ID:24, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:23, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.415 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.420 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:24, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:23, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.415 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.420 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=24]
[2022/02/16 12:41:55.420 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.420 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2022/02/16 12:41:55.421 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:26, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:25, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.421 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.421 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:26, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:25, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.421 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2022/02/16 12:41:55.421 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:26, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:25, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.421 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.422 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=219.5µs] [phyTblIDs="[25]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.424 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=13] ["take time"=2.169875ms] [job="ID:26, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:25, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.421 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.425 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:26, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:25, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.421 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.425 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=26]
[2022/02/16 12:41:55.425 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.425 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2022/02/16 12:41:55.426 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:28, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:27, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.426 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:28, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:27, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2022/02/16 12:41:55.426 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:28, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:27, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.427 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=194.875µs] [phyTblIDs="[27]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.429 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=14] ["take time"=2.252125ms] [job="ID:28, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:27, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.429 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:28, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:27, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.430 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=28]
[2022/02/16 12:41:55.430 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.430 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2022/02/16 12:41:55.430 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:30, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:29, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.430 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:30, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:29, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2022/02/16 12:41:55.431 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:30, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:29, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.432 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=185.25µs] [phyTblIDs="[29]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.434 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=15] ["take time"=2.259334ms] [job="ID:30, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:29, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.434 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:30, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:29, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.43 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.434 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=30]
[2022/02/16 12:41:55.434 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.435 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2022/02/16 12:41:55.435 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:32, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:31, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.435 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.435 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:32, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:31, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.435 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2022/02/16 12:41:55.435 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:32, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:31, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.435 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.436 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=180.416µs] [phyTblIDs="[31]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.438 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=16] ["take time"=2.259125ms] [job="ID:32, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:31, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.435 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.439 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:32, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:31, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.435 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.439 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=32]
[2022/02/16 12:41:55.439 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.439 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2022/02/16 12:41:55.440 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:34, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:33, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.44 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.440 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:34, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:33, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.44 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2022/02/16 12:41:55.440 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:34, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:33, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.44 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.441 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=184.458µs] [phyTblIDs="[33]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.443 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=17] ["take time"=2.25975ms] [job="ID:34, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:33, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.44 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.443 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:34, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:33, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.44 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.444 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=34]
[2022/02/16 12:41:55.444 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.444 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2022/02/16 12:41:55.445 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:36, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:35, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.444 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.445 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:36, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:35, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.444 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2022/02/16 12:41:55.445 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:36, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:35, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.444 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.446 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=179.166µs] [phyTblIDs="[35]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.448 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=18] ["take time"=2.260375ms] [job="ID:36, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:35, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.444 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.448 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:36, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:35, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.444 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.448 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=36]
[2022/02/16 12:41:55.448 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.449 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2022/02/16 12:41:55.449 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:38, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:37, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.449 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.449 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:38, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:37, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.449 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2022/02/16 12:41:55.450 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:38, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:37, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.449 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.450 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=226µs] [phyTblIDs="[37]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.452 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=19] ["take time"=2.255958ms] [job="ID:38, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:37, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.449 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.453 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:38, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:37, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.449 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.453 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=38]
[2022/02/16 12:41:55.453 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.455 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2022/02/16 12:41:55.455 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:40, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:39, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.455 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.455 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:40, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:39, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.455 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2022/02/16 12:41:55.456 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:40, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:39, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.455 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.456 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=186.5µs] [phyTblIDs="[39]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.458 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=20] ["take time"=2.260625ms] [job="ID:40, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:39, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.455 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.459 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:40, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:39, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.455 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.459 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=40]
[2022/02/16 12:41:55.459 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.459 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2022/02/16 12:41:55.460 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:42, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:41, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.46 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.460 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:42, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:41, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.46 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2022/02/16 12:41:55.460 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:42, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:41, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.46 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.461 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=167.959µs] [phyTblIDs="[41]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.463 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=21] ["take time"=2.260708ms] [job="ID:42, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:41, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.46 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.463 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:42, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:41, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.46 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.464 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=42]
[2022/02/16 12:41:55.464 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.464 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2022/02/16 12:41:55.464 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:44, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:43, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.464 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.464 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:44, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:43, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.464 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2022/02/16 12:41:55.465 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:44, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:43, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.464 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.465 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=144.958µs] [phyTblIDs="[43]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.467 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=22] ["take time"=2.260875ms] [job="ID:44, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:43, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.464 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.468 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:44, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:43, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.464 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.468 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=44]
[2022/02/16 12:41:55.468 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.468 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2022/02/16 12:41:55.469 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:46, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:45, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.468 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.469 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:46, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:45, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.468 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2022/02/16 12:41:55.469 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:46, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:45, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.468 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.470 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=219.334µs] [phyTblIDs="[45]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.472 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=23] ["take time"=2.260834ms] [job="ID:46, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:45, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.468 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.472 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:46, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:45, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.468 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.473 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=46]
[2022/02/16 12:41:55.473 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.473 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2022/02/16 12:41:55.474 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:48, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:47, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.474 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:48, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:47, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2022/02/16 12:41:55.474 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:48, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:47, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.475 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=178.959µs] [phyTblIDs="[47]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.477 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=24] ["take time"=2.254292ms] [job="ID:48, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:47, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.477 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:48, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:47, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.478 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=48]
[2022/02/16 12:41:55.478 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.478 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2022/02/16 12:41:55.478 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:50, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:49, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.478 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:50, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:49, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2022/02/16 12:41:55.478 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:50, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:49, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.479 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=177.834µs] [phyTblIDs="[49]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.481 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=25] ["take time"=2.259708ms] [job="ID:50, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:49, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.482 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:50, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:49, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.482 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=50]
[2022/02/16 12:41:55.482 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.482 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2022/02/16 12:41:55.483 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:52, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:51, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.482 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.483 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:52, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:51, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.482 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2022/02/16 12:41:55.483 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:52, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:51, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.482 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.484 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=181.166µs] [phyTblIDs="[51]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.486 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=26] ["take time"=2.260416ms] [job="ID:52, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:51, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.482 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.486 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:52, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:51, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.482 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.487 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=52]
[2022/02/16 12:41:55.487 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.487 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2022/02/16 12:41:55.487 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:54, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:53, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.487 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.487 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:54, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:53, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.487 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2022/02/16 12:41:55.488 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:54, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:53, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.487 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.488 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=168.375µs] [phyTblIDs="[53]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.490 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=27] ["take time"=2.257208ms] [job="ID:54, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:53, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.487 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.491 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:54, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:53, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.487 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.491 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=54]
[2022/02/16 12:41:55.491 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.491 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2022/02/16 12:41:55.492 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:56, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:55, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.492 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.492 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:56, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:55, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.492 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2022/02/16 12:41:55.492 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:56, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:55, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.492 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.493 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=175.834µs] [phyTblIDs="[55]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.495 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=28] ["take time"=2.256ms] [job="ID:56, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:55, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.492 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.495 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:56, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:55, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.492 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.496 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=56]
[2022/02/16 12:41:55.496 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.496 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2022/02/16 12:41:55.496 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:58, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:57, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.496 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:58, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:57, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2022/02/16 12:41:55.497 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:58, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:57, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.497 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=171.125µs] [phyTblIDs="[57]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.499 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=29] ["take time"=2.261916ms] [job="ID:58, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:57, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.500 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:58, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:57, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.496 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.500 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=58]
[2022/02/16 12:41:55.500 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.500 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2022/02/16 12:41:55.500 +08:00] [INFO] [ddl_api.go:699] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2022/02/16 12:41:55.501 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:60, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:59, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.501 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:60, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:59, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2022/02/16 12:41:55.501 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:60, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:59, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.502 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=195.375µs] [phyTblIDs="[59]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.504 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=30] ["take time"=2.258709ms] [job="ID:60, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:59, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.505 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:60, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:59, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.501 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.505 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=60]
[2022/02/16 12:41:55.505 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.505 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no)\n\t);"] [user=]
[2022/02/16 12:41:55.506 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:62, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:61, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.505 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.506 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:62, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:61, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.505 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no)\n\t);"]
[2022/02/16 12:41:55.506 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 1, tp general"] [job="ID:62, Type:create table, State:none, SchemaState:queueing, SchemaID:3, TableID:61, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.505 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.507 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=194.458µs] [phyTblIDs="[61]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.509 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 1, tp general"] [ver=31] ["take time"=2.260917ms] [job="ID:62, Type:create table, State:done, SchemaState:public, SchemaID:3, TableID:61, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.505 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.509 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 1, tp general"] [job="ID:62, Type:create table, State:synced, SchemaState:public, SchemaID:3, TableID:61, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.505 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.510 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=62]
[2022/02/16 12:41:55.510 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.521 +08:00] [INFO] [bootstrap.go:413] ["bootstrap successful"] ["take time"=165.22225ms]
[2022/02/16 12:41:55.521 +08:00] [INFO] [ddl_worker.go:150] ["[ddl] DDL worker closed"] [worker="worker 1, tp general"] ["take time"=125ns]
[2022/02/16 12:41:55.521 +08:00] [INFO] [ddl_worker.go:150] ["[ddl] DDL worker closed"] [worker="worker 2, tp add index"] ["take time"=41ns]
[2022/02/16 12:41:55.521 +08:00] [INFO] [delete_range.go:132] ["[ddl] closing delRange"]
[2022/02/16 12:41:55.521 +08:00] [INFO] [session_pool.go:90] ["[ddl] closing sessionPool"]
[2022/02/16 12:41:55.521 +08:00] [INFO] [ddl.go:440] ["[ddl] DDL closed"] [ID=74fa4f52-31d2-4efe-8b46-0463186052c3] ["take time"=51.167µs]
[2022/02/16 12:41:55.522 +08:00] [INFO] [ddl.go:347] ["[ddl] stop DDL"] [ID=74fa4f52-31d2-4efe-8b46-0463186052c3]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:481] ["topNSlowQueryLoop exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:558] ["topologySyncerKeeper exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:589] ["loadSchemaInLoop exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:535] ["globalConfigSyncerKeeper exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:510] ["infoSyncerKeeper exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:1788] ["renew lease goroutine exited."]
[2022/02/16 12:41:55.522 +08:00] [INFO] [domain.go:716] ["domain closed"] ["take time"=112.333µs]
[2022/02/16 12:41:55.522 +08:00] [INFO] [tidb.go:72] ["new domain"] [store=015b2584-2e04-47ea-abb5-59dc931a8d6c] ["ddl lease"=600ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2022/02/16 12:41:55.524 +08:00] [INFO] [domain.go:169] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=31] ["start time"=2.778625ms]
[2022/02/16 12:41:55.524 +08:00] [INFO] [domain.go:432] ["full load and reset schema validator"]
[2022/02/16 12:41:55.524 +08:00] [INFO] [ddl.go:366] ["[ddl] start DDL"] [ID=c0df9b67-f0ed-4c6d-b30a-11e97762920d] [runWorker=true]
[2022/02/16 12:41:55.525 +08:00] [INFO] [ddl.go:355] ["[ddl] start delRangeManager OK"] ["is a emulator"=true]
[2022/02/16 12:41:55.525 +08:00] [INFO] [delete_range.go:142] ["[ddl] start delRange emulator"]
[2022/02/16 12:41:55.525 +08:00] [INFO] [ddl_worker.go:156] ["[ddl] start DDL worker"] [worker="worker 3, tp general"]
[2022/02/16 12:41:55.525 +08:00] [INFO] [ddl_worker.go:156] ["[ddl] start DDL worker"] [worker="worker 4, tp add index"]
[2022/02/16 12:41:55.526 +08:00] [WARN] [sysvar_cache.go:54] ["sysvar cache is empty, triggering rebuild"]
[2022/02/16 12:41:55.530 +08:00] [INFO] [telemetry.go:174] ["Telemetry configuration"] [endpoint=https://telemetry.pingcap.com/api/v1/tidb/report] [report_interval=6h0m0s] [enabled=true]
[2022/02/16 12:41:55.530 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=] [sql="create database test_db"] [user=]
[2022/02/16 12:41:55.530 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:64, Type:create schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.530 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:64, Type:create schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create database test_db"]
[2022/02/16 12:41:55.531 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:64, Type:create schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.531 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=73.042µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:55.533 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=32] ["take time"=2.260792ms] [job="ID:64, Type:create schema, State:done, SchemaState:public, SchemaID:63, TableID:0, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.533 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:64, Type:create schema, State:synced, SchemaState:public, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.534 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=64]
[2022/02/16 12:41:55.534 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.535 +08:00] [INFO] [set.go:139] ["set global var"] [conn=0] [name=tidb_max_delta_schema_count] [val=4096]
[2022/02/16 12:41:55.536 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=32] [cur_db=test_db] [sql="drop table if exists test_drop_column"] [user=]
[2022/02/16 12:41:55.536 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=32] [cur_db=test_db] [sql="create table test_drop_column(c1 int, c2 int)"] [user=]
[2022/02/16 12:41:55.536 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:66, Type:create table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.536 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:66, Type:create table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table test_drop_column(c1 int, c2 int)"]
[2022/02/16 12:41:55.537 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:66, Type:create table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.537 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=138.042µs] [phyTblIDs="[65]"] [actionTypes="[8]"]
[2022/02/16 12:41:55.539 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=33] ["take time"=2.260084ms] [job="ID:66, Type:create table, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:1, start time: 2022-02-16 12:41:55.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.540 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:66, Type:create table, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.540 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=66]
[2022/02/16 12:41:55.540 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.540 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=33] [cur_db=test_db] [sql="alter table test_drop_column add column c3 int, add column c4 int"] [user=]
[2022/02/16 12:41:55.540 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:67, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.540 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:67, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add column c3 int, add column c4 int"]
[2022/02/16 12:41:55.541 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.541 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:67, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.541 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:67, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.541 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":3,\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=2]
[2022/02/16 12:41:55.541 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":4,\"name\":{\"O\":\"c4\",\"L\":\"c4\"},\"offset\":3,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=3]
[2022/02/16 12:41:55.541 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=145µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:55.544 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=34] ["take time"=2.260083ms] [job="ID:67, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.544 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.544 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.544 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.544 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=138.625µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:55.546 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=35] ["take time"=2.094916ms] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.546 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.546 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.546 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.547 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=158.458µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:55.549 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=36] ["take time"=2.077792ms] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.549 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.549 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.549 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:67, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.550 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=144.333µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:55.552 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=37] ["take time"=2.069916ms] [job="ID:67, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.552 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.552 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:67, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.552 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:67, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.54 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.552 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=67]
[2022/02/16 12:41:55.553 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.553 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=37] [cur_db=test_db] [sql="alter table test_drop_column add index idx_c3(c3)"] [user=]
[2022/02/16 12:41:55.553 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:68, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.553 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:68, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add index idx_c3(c3)"]
[2022/02/16 12:41:55.553 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.553 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:68, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.553 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.553 +08:00] [INFO] [index.go:513] ["[ddl] run add index job"] [job="ID:68, Type:add index, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [indexInfo="{\"id\":1,\"idx_name\":{\"O\":\"idx_c3\",\"L\":\"idx_c3\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"length\":-1}],\"state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false}"]
[2022/02/16 12:41:55.554 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=155.958µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:55.556 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=38] ["take time"=2.229459ms] [job="ID:68, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.556 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.556 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:68, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.556 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.557 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=164.542µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:55.559 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=39] ["take time"=2.08925ms] [job="ID:68, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.559 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.559 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:68, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.559 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.560 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=164.583µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:55.561 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=40] ["take time"=2.069875ms] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.561 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [reorg.go:558] ["[ddl] get table range, endHandle < startHandle"] [table="&{65 test_drop_column utf8mb4 utf8mb4_bin [int(11) int(11) int(11) int(11)] [0x140068ac990] [] [] public false false 0  0 0 0 4 1 0 431223345134698497 0 0 0 0 0 <nil>  <nil> <nil> <nil> 4 <nil> false  disable <nil> <nil>}"] ["table/partition ID"=65] [endHandle="key: "] [startHandle="key: "]
[2022/02/16 12:41:55.562 +08:00] [INFO] [reorg.go:618] ["[ddl] job get table range"] [jobID=68] [physicalTableID=65] [startHandle="key: "] [endHandle="key: "]
[2022/02/16 12:41:55.562 +08:00] [INFO] [ddl_worker.go:916] ["[ddl] schema version doesn't change"] [worker="worker 4, tp add index"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.562 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.563 +08:00] [INFO] [ddl.go:756] ["sleep before DDL finishes to make async commit and 1PC safe"] [duration=0s]
[2022/02/16 12:41:55.563 +08:00] [INFO] [index.go:1360] ["[ddl] start to add table index"] [job="ID:68, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"] [reorgInfo="CurrElementType:_idx_,CurrElementID:1,StartHandle:key: ,EndHandle:key: ,First:false,PhysicalTableID:65"]
[2022/02/16 12:41:55.563 +08:00] [INFO] [reorg.go:240] ["[ddl] run reorg job done"] ["handled rows"=0]
[2022/02/16 12:41:55.563 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=157.5µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:55.565 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=41] ["take time"=2.220416ms] [job="ID:68, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.565 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.566 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 4, tp add index"] [job="ID:68, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.566 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:68, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.553 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345135484928"]
[2022/02/16 12:41:55.566 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=68]
[2022/02/16 12:41:55.566 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:55.566 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=41] [cur_db=test_db] [sql="alter table test_drop_column drop column c3, drop column c4"] [user=]
[2022/02/16 12:41:55.567 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:69, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:55.567 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:69, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column drop column c3, drop column c4"]
[2022/02/16 12:41:55.567 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:69, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.567 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:69, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.567 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:69, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:55.567 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:55.568 +08:00] [WARN] [ddl_worker.go:201] ["[ddl] handle DDL job failed"] [worker="worker 3, tp general"] [error="[kv:9007]Write conflict, txnStartTS=431223345136795650, conflictStartTS=431223345136795651, conflictCommitTS=431223345136795652, key=[]byte{0x6d, 0x44, 0x44, 0x4c, 0x4a, 0x6f, 0x62, 0x4c, 0x69, 0xff, 0x73, 0x74, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xf9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6c, 0x80, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0} primary=[]byte(nil) [try again later]"]
[2022/02/16 12:41:56.526 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:69, Type:drop multi-columns, State:cancelling, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.526 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:69, Type:drop multi-columns, State:cancelling, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.527 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:69, Type:drop multi-columns, State:cancelling, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.527 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.527 +08:00] [INFO] [rollingback.go:518] ["[ddl] the DDL job is cancelled normally"] [worker="worker 3, tp general"] [job="ID:69, Type:drop multi-columns, State:cancelled, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:[ddl:8214]Cancelled DDL job, ErrCount:1, SnapshotVersion:0"] [error="[ddl:8214]Cancelled DDL job"]
[2022/02/16 12:41:56.528 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:69, Type:drop multi-columns, State:cancelled, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:[ddl:8214]Cancelled DDL job, ErrCount:1, SnapshotVersion:0"]
[2022/02/16 12:41:56.529 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:69, Type:drop multi-columns, State:cancelled, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:55.566 +0800 CST, Err:[ddl:8214]Cancelled DDL job, ErrCount:1, SnapshotVersion:0"]
[2022/02/16 12:41:56.529 +08:00] [INFO] [ddl.go:662] ["[ddl] DDL job is failed"] [jobID=69]
[2022/02/16 12:41:56.529 +08:00] [INFO] [tidb.go:260] ["rollbackTxn called due to ddl/autocommit failure"]
[2022/02/16 12:41:56.529 +08:00] [WARN] [session.go:1862] ["run statement failed"] [schemaVersion=41] [error="[ddl:8214]Cancelled DDL job"] [errorVerbose="[ddl:8214]Cancelled DDL job\ngithub.com/pingcap/errors.AddStack\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20211224045212-9687c2b0f87c/errors.go:174\ngithub.com/pingcap/errors.Trace\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20211224045212-9687c2b0f87c/juju_adaptor.go:15\ngithub.com/pingcap/tidb/ddl.(*ddl).doDDLJob\n\t/Users/bba/pc/tidb/ddl/ddl.go:663\ngithub.com/pingcap/tidb/ddl.(*ddl).DropColumns\n\t/Users/bba/pc/tidb/ddl/ddl_api.go:3804\ngithub.com/pingcap/tidb/ddl.(*ddl).AlterTable\n\t/Users/bba/pc/tidb/ddl/ddl_api.go:2752\ngithub.com/pingcap/tidb/executor.(*DDLExec).executeAlterTable\n\t/Users/bba/pc/tidb/executor/ddl.go:567\ngithub.com/pingcap/tidb/executor.(*DDLExec).Next\n\t/Users/bba/pc/tidb/executor/ddl.go:143\ngithub.com/pingcap/tidb/executor.Next\n\t/Users/bba/pc/tidb/executor/executor.go:286\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/Users/bba/pc/tidb/executor/adapter.go:635\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/Users/bba/pc/tidb/executor/adapter.go:490\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/Users/bba/pc/tidb/executor/adapter.go:439\ngithub.com/pingcap/tidb/session.runStmt\n\t/Users/bba/pc/tidb/session/session.go:1982\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/bba/pc/tidb/session/session.go:1859\ngithub.com/pingcap/tidb/util/testkit.(*TestKit).Exec\n\t/Users/bba/pc/tidb/util/testkit/testkit.go:199\ngithub.com/pingcap/tidb/ddl_test.(*testDBSuite3).TestCancelDropColumns\n\t/Users/bba/pc/tidb/ddl/db_test.go:1894\nreflect.Value.call\n\t/Users/bba/.gvm/gos/go1.17.4/src/reflect/value.go:543\nreflect.Value.Call\n\t/Users/bba/.gvm/gos/go1.17.4/src/reflect/value.go:339\ngithub.com/pingcap/check.(*suiteRunner).forkTest.func1\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/check@v0.0.0-20211026125417-57bd13f7b5f0/check.go:850\ngithub.com/pingcap/check.(*suiteRunner).forkCall.func1\n\t/Users/bba/.gvm/pkgsets/go1.17.4/global/pkg/mod/github.com/pingcap/check@v0.0.0-20211026125417-57bd13f7b5f0/check.go:739\nruntime.goexit\n\t/Users/bba/.gvm/gos/go1.17.4/src/runtime/asm_arm64.s:1133"] [session="{\n  \"currDBName\": \"test_db\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2022/02/16 12:41:56.530 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=41] [cur_db=test_db] [sql="alter table test_drop_column drop column c3, drop column c4"] [user=]
[2022/02/16 12:41:56.531 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:70, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.531 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:70, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column drop column c3, drop column c4"]
[2022/02/16 12:41:56.531 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.531 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:70, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.531 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:70, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.532 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.533 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=404.792µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.535 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=42] ["take time"=2.263917ms] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.535 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.535 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.536 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.536 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.537 +08:00] [ERROR] [column.go:467] [aaaaa] [="[1]"]
[2022/02/16 12:41:56.538 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=393.75µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.539 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=43] ["take time"=2.266917ms] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.540 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.540 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.540 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.540 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[1]"]
[2022/02/16 12:41:56.541 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=343µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.543 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=44] ["take time"=2.210667ms] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.543 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.543 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.543 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:70, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.544 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[1]"]
[2022/02/16 12:41:56.545 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=325.333µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.547 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=45] ["take time"=2.207625ms] [job="ID:70, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.547 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.547 +08:00] [ERROR] [delete_range.go:398] [bbbb] [="[1]"]
[2022/02/16 12:41:56.547 +08:00] [INFO] [delete_range.go:432] ["[ddl] batch insert into delete-range indices"] [jobID=70] [elementIDs="[1]"]
[2022/02/16 12:41:56.549 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=70] [jobType="drop multi-columns"]
[2022/02/16 12:41:56.550 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:70, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.550 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:70, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.551 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=70]
[2022/02/16 12:41:56.551 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.551 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=45] [cur_db=test_db] [sql="alter table test_drop_column add column c3 int, add column c4 int"] [user=]
[2022/02/16 12:41:56.552 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:71, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.552 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:71, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add column c3 int, add column c4 int"]
[2022/02/16 12:41:56.552 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.552 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:71, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.552 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:71, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.553 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":5,\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=2]
[2022/02/16 12:41:56.553 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":6,\"name\":{\"O\":\"c4\",\"L\":\"c4\"},\"offset\":3,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=3]
[2022/02/16 12:41:56.554 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=351.459µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.554 +08:00] [INFO] [delete_range.go:238] ["[ddl] delRange emulator complete task"] [jobID=70] [elementID=1] [startKey=7480000000000000415f698000000000000001] [endKey=7480000000000000415f698000000000000002]
[2022/02/16 12:41:56.556 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=46] ["take time"=2.26325ms] [job="ID:71, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.556 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.556 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.556 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.558 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=346.875µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.560 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=47] ["take time"=2.217917ms] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.560 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.560 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.560 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.562 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=343.208µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.563 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=48] ["take time"=2.198083ms] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.563 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.564 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.564 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:71, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.565 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=351.5µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.567 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=49] ["take time"=2.208333ms] [job="ID:71, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.567 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.568 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:71, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.569 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:71, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.551 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.569 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=71]
[2022/02/16 12:41:56.569 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.569 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=49] [cur_db=test_db] [sql="alter table test_drop_column add index idx_c3(c3)"] [user=]
[2022/02/16 12:41:56.570 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:72, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.570 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:72, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add index idx_c3(c3)"]
[2022/02/16 12:41:56.570 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.570 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:72, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.570 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.571 +08:00] [INFO] [index.go:513] ["[ddl] run add index job"] [job="ID:72, Type:add index, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [indexInfo="{\"id\":2,\"idx_name\":{\"O\":\"idx_c3\",\"L\":\"idx_c3\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"length\":-1}],\"state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false}"]
[2022/02/16 12:41:56.572 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=49] [neededSchemaVersion=50] ["start time"=315.833µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.574 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=50] ["take time"=2.261708ms] [job="ID:72, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.575 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.575 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:72, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.575 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.577 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=50] [neededSchemaVersion=51] ["start time"=654.792µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.579 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=51] ["take time"=2.29ms] [job="ID:72, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.579 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.579 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:72, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.579 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.581 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=51] [neededSchemaVersion=52] ["start time"=381.458µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.582 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=52] ["take time"=2.19725ms] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.582 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.583 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.583 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.583 +08:00] [INFO] [reorg.go:558] ["[ddl] get table range, endHandle < startHandle"] [table="&{65 test_drop_column utf8mb4 utf8mb4_bin [int(11) int(11) int(11) int(11)] [0x14006d40ea0] [] [] public false false 0  0 0 0 6 2 0 431223345402085377 0 0 0 0 0 <nil>  <nil> <nil> <nil> 4 <nil> false  disable <nil> <nil>}"] ["table/partition ID"=65] [endHandle="key: "] [startHandle="key: "]
[2022/02/16 12:41:56.583 +08:00] [INFO] [reorg.go:618] ["[ddl] job get table range"] [jobID=72] [physicalTableID=65] [startHandle="key: "] [endHandle="key: "]
[2022/02/16 12:41:56.584 +08:00] [INFO] [ddl_worker.go:916] ["[ddl] schema version doesn't change"] [worker="worker 4, tp add index"]
[2022/02/16 12:41:56.584 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.584 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.584 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.585 +08:00] [INFO] [ddl.go:756] ["sleep before DDL finishes to make async commit and 1PC safe"] [duration=0s]
[2022/02/16 12:41:56.585 +08:00] [INFO] [index.go:1360] ["[ddl] start to add table index"] [job="ID:72, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"] [reorgInfo="CurrElementType:_idx_,CurrElementID:2,StartHandle:key: ,EndHandle:key: ,First:false,PhysicalTableID:65"]
[2022/02/16 12:41:56.585 +08:00] [INFO] [reorg.go:240] ["[ddl] run reorg job done"] ["handled rows"=0]
[2022/02/16 12:41:56.587 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=52] [neededSchemaVersion=53] ["start time"=269.375µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.588 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=53] ["take time"=2.263958ms] [job="ID:72, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.589 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.589 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 4, tp add index"] [job="ID:72, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.589 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:72, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345403133952"]
[2022/02/16 12:41:56.590 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=72]
[2022/02/16 12:41:56.590 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.590 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=53] [cur_db=test_db] [sql="alter table test_drop_column drop column c3, drop column c4"] [user=]
[2022/02/16 12:41:56.591 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:73, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.591 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:73, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column drop column c3, drop column c4"]
[2022/02/16 12:41:56.591 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.591 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:73, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.591 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:73, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.591 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.592 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=53] [neededSchemaVersion=54] ["start time"=272.167µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.594 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=54] ["take time"=2.260416ms] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.594 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.595 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.595 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.595 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.595 +08:00] [ERROR] [column.go:467] [aaaaa] [="[2]"]
[2022/02/16 12:41:56.596 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=54] [neededSchemaVersion=55] ["start time"=265.083µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.598 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=55] ["take time"=2.153083ms] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.598 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.598 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.598 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.598 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[2]"]
[2022/02/16 12:41:56.599 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=55] [neededSchemaVersion=56] ["start time"=264.5µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.601 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=56] ["take time"=2.180125ms] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.601 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.601 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.601 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:73, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.602 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[2]"]
[2022/02/16 12:41:56.602 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=56] [neededSchemaVersion=57] ["start time"=239.708µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.604 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=57] ["take time"=2.143041ms] [job="ID:73, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.604 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.605 +08:00] [ERROR] [delete_range.go:398] [bbbb] [="[2]"]
[2022/02/16 12:41:56.605 +08:00] [INFO] [delete_range.go:432] ["[ddl] batch insert into delete-range indices"] [jobID=73] [elementIDs="[2]"]
[2022/02/16 12:41:56.606 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=73] [jobType="drop multi-columns"]
[2022/02/16 12:41:56.606 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:73, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.606 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:73, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.59 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.606 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=73]
[2022/02/16 12:41:56.606 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.608 +08:00] [INFO] [delete_range.go:238] ["[ddl] delRange emulator complete task"] [jobID=73] [elementID=2] [startKey=7480000000000000415f698000000000000002] [endKey=7480000000000000415f698000000000000003]
[2022/02/16 12:41:56.609 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=57] [cur_db=test_db] [sql="alter table test_drop_column add column c3 int, add column c4 int"] [user=]
[2022/02/16 12:41:56.609 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:74, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.609 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:74, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add column c3 int, add column c4 int"]
[2022/02/16 12:41:56.610 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.610 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:74, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.610 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:74, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.610 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":7,\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=2]
[2022/02/16 12:41:56.610 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":8,\"name\":{\"O\":\"c4\",\"L\":\"c4\"},\"offset\":3,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=3]
[2022/02/16 12:41:56.611 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=57] [neededSchemaVersion=58] ["start time"=284.291µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.613 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=58] ["take time"=2.264417ms] [job="ID:74, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.613 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.613 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.613 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.614 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=58] [neededSchemaVersion=59] ["start time"=255.791µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.616 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=59] ["take time"=2.1505ms] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.616 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.617 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.617 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.618 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=59] [neededSchemaVersion=60] ["start time"=265.416µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.619 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=60] ["take time"=2.144542ms] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.620 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.620 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.620 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:74, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.621 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=60] [neededSchemaVersion=61] ["start time"=266.333µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.623 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=61] ["take time"=2.1505ms] [job="ID:74, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.623 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.623 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:74, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.624 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:74, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.609 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.624 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=74]
[2022/02/16 12:41:56.624 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.624 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=61] [cur_db=test_db] [sql="alter table test_drop_column add index idx_c3(c3)"] [user=]
[2022/02/16 12:41:56.625 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:75, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.625 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:75, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add index idx_c3(c3)"]
[2022/02/16 12:41:56.625 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.625 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:75, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.625 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.625 +08:00] [INFO] [index.go:513] ["[ddl] run add index job"] [job="ID:75, Type:add index, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [indexInfo="{\"id\":3,\"idx_name\":{\"O\":\"idx_c3\",\"L\":\"idx_c3\"},\"tbl_name\":{\"O\":\"\",\"L\":\"\"},\"idx_cols\":[{\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"length\":-1}],\"state\":0,\"comment\":\"\",\"index_type\":1,\"is_unique\":false,\"is_primary\":false,\"is_invisible\":false,\"is_global\":false}"]
[2022/02/16 12:41:56.626 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=61] [neededSchemaVersion=62] ["start time"=270.083µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.628 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=62] ["take time"=2.260834ms] [job="ID:75, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.628 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.629 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:75, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.629 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.630 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=62] [neededSchemaVersion=63] ["start time"=269.959µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.631 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=63] ["take time"=2.026542ms] [job="ID:75, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.631 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.632 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:75, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.632 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.633 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=63] [neededSchemaVersion=64] ["start time"=268.208µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.635 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=64] ["take time"=2.118791ms] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.635 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.635 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.635 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.635 +08:00] [INFO] [reorg.go:558] ["[ddl] get table range, endHandle < startHandle"] [table="&{65 test_drop_column utf8mb4 utf8mb4_bin [int(11) int(11) int(11) int(11)] [0x14004abacf0] [] [] public false false 0  0 0 0 8 3 0 431223345415716865 0 0 0 0 0 <nil>  <nil> <nil> <nil> 4 <nil> false  disable <nil> <nil>}"] ["table/partition ID"=65] [endHandle="key: "] [startHandle="key: "]
[2022/02/16 12:41:56.635 +08:00] [INFO] [reorg.go:618] ["[ddl] job get table range"] [jobID=75] [physicalTableID=65] [startHandle="key: "] [endHandle="key: "]
[2022/02/16 12:41:56.636 +08:00] [INFO] [ddl_worker.go:916] ["[ddl] schema version doesn't change"] [worker="worker 4, tp add index"]
[2022/02/16 12:41:56.636 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.636 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.636 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.637 +08:00] [INFO] [ddl.go:756] ["sleep before DDL finishes to make async commit and 1PC safe"] [duration=0s]
[2022/02/16 12:41:56.637 +08:00] [INFO] [index.go:1360] ["[ddl] start to add table index"] [job="ID:75, Type:add index, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"] [reorgInfo="CurrElementType:_idx_,CurrElementID:3,StartHandle:key: ,EndHandle:key: ,First:false,PhysicalTableID:65"]
[2022/02/16 12:41:56.637 +08:00] [INFO] [reorg.go:240] ["[ddl] run reorg job done"] ["handled rows"=0]
[2022/02/16 12:41:56.638 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=64] [neededSchemaVersion=65] ["start time"=272.042µs] [phyTblIDs="[65]"] [actionTypes="[128]"]
[2022/02/16 12:41:56.640 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 4, tp add index"] [ver=65] ["take time"=2.042042ms] [job="ID:75, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.640 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:6, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.640 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 4, tp add index"] [job="ID:75, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.641 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:75, Type:add index, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.624 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:431223345416765442"]
[2022/02/16 12:41:56.641 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=75]
[2022/02/16 12:41:56.641 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.641 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=65] [cur_db=test_db] [sql="alter table test_drop_column drop column c3, drop column c4"] [user=]
[2022/02/16 12:41:56.642 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:76, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.642 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:76, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column drop column c3, drop column c4"]
[2022/02/16 12:41:56.642 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.642 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:76, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.642 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:76, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.642 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.643 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=65] [neededSchemaVersion=66] ["start time"=260.333µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.645 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=66] ["take time"=2.260292ms] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.645 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.645 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.645 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.645 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.646 +08:00] [ERROR] [column.go:467] [aaaaa] [="[3]"]
[2022/02/16 12:41:56.646 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=66] [neededSchemaVersion=67] ["start time"=261.208µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.648 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=67] ["take time"=2.156292ms] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.648 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.648 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.648 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.649 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[3]"]
[2022/02/16 12:41:56.650 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=67] [neededSchemaVersion=68] ["start time"=256.375µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.651 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=68] ["take time"=2.13775ms] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.652 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.652 +08:00] [INFO] [callback_test.go:83] ["on job run before"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.652 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:76, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.652 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[3]"]
[2022/02/16 12:41:56.653 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=68] [neededSchemaVersion=69] ["start time"=233.125µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.655 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=69] ["take time"=2.167792ms] [job="ID:76, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.655 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.655 +08:00] [ERROR] [delete_range.go:398] [bbbb] [="[3]"]
[2022/02/16 12:41:56.655 +08:00] [INFO] [delete_range.go:432] ["[ddl] batch insert into delete-range indices"] [jobID=76] [elementIDs="[3]"]
[2022/02/16 12:41:56.656 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=76] [jobType="drop multi-columns"]
[2022/02/16 12:41:56.656 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:76, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.657 +08:00] [INFO] [callback_test.go:98] ["on job updated"] [job="ID:76, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.657 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=76]
[2022/02/16 12:41:56.657 +08:00] [INFO] [callback_test.go:62] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.658 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=69] [cur_db=test_db] [sql="alter table test_drop_column add column c3 int, add column c4 int"] [user=]
[2022/02/16 12:41:56.658 +08:00] [INFO] [delete_range.go:238] ["[ddl] delRange emulator complete task"] [jobID=76] [elementID=3] [startKey=7480000000000000415f698000000000000003] [endKey=7480000000000000415f698000000000000004]
[2022/02/16 12:41:56.658 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:77, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.658 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:77, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column add column c3 int, add column c4 int"]
[2022/02/16 12:41:56.659 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:77, Type:add multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.659 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:77, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":9,\"name\":{\"O\":\"c3\",\"L\":\"c3\"},\"offset\":2,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=2]
[2022/02/16 12:41:56.659 +08:00] [INFO] [column.go:347] ["[ddl] run add columns job"] [job="ID:77, Type:add multi-columns, State:running, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [columnInfo="{\"id\":10,\"name\":{\"O\":\"c4\",\"L\":\"c4\"},\"offset\":3,\"origin_default\":null,\"origin_default_bit\":null,\"default\":null,\"default_bit\":null,\"default_is_expr\":false,\"generated_expr_string\":\"\",\"generated_stored\":false,\"dependences\":null,\"type\":{\"Tp\":3,\"Flag\":0,\"Flen\":11,\"Decimal\":0,\"Charset\":\"binary\",\"Collate\":\"binary\",\"Elems\":null},\"state\":0,\"comment\":\"\",\"hidden\":false,\"change_state_info\":null,\"version\":2}"] [offset=3]
[2022/02/16 12:41:56.660 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=69] [neededSchemaVersion=70] ["start time"=263.167µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.662 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=70] ["take time"=2.2595ms] [job="ID:77, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.662 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:77, Type:add multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.663 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=70] [neededSchemaVersion=71] ["start time"=246.875µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.665 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=71] ["take time"=2.156583ms] [job="ID:77, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.666 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:77, Type:add multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.667 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=71] [neededSchemaVersion=72] ["start time"=255µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.669 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=72] ["take time"=2.208875ms] [job="ID:77, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.669 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:77, Type:add multi-columns, State:running, SchemaState:write reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.670 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=72] [neededSchemaVersion=73] ["start time"=249.667µs] [phyTblIDs="[65]"] [actionTypes="[137438953472]"]
[2022/02/16 12:41:56.672 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=73] ["take time"=2.156625ms] [job="ID:77, Type:add multi-columns, State:done, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:4, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.672 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:77, Type:add multi-columns, State:synced, SchemaState:public, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.658 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.673 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=77]
[2022/02/16 12:41:56.673 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.673 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=73] [cur_db=test_db] [sql="alter table test_drop_column drop column c3, drop column c4"] [user=]
[2022/02/16 12:41:56.674 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:78, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.674 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:78, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table test_drop_column drop column c3, drop column c4"]
[2022/02/16 12:41:56.674 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:78, Type:drop multi-columns, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.674 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.675 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=73] [neededSchemaVersion=74] ["start time"=251.875µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.677 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=74] ["take time"=2.262875ms] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.677 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.677 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.678 +08:00] [ERROR] [column.go:467] [aaaaa] [="[]"]
[2022/02/16 12:41:56.678 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=74] [neededSchemaVersion=75] ["start time"=247.042µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.680 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=75] ["take time"=2.149791ms] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.680 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.681 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.681 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=75] [neededSchemaVersion=76] ["start time"=250.625µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.683 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=76] ["take time"=2.130542ms] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:2, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.684 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:78, Type:drop multi-columns, State:running, SchemaState:delete reorganization, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.684 +08:00] [ERROR] [column.go:512] [gggggggggggggggg] [="[]"]
[2022/02/16 12:41:56.685 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=76] [neededSchemaVersion=77] ["start time"=231.5µs] [phyTblIDs="[65]"] [actionTypes="[274877906944]"]
[2022/02/16 12:41:56.686 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=77] ["take time"=2.124625ms] [job="ID:78, Type:drop multi-columns, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.687 +08:00] [ERROR] [delete_range.go:398] [bbbb] [="[]"]
[2022/02/16 12:41:56.687 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=78] [jobType="drop multi-columns"]
[2022/02/16 12:41:56.687 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:78, Type:drop multi-columns, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.673 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.688 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=78]
[2022/02/16 12:41:56.688 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.688 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=77] [cur_db=test_db] [sql="drop table test_drop_column;"] [user=]
[2022/02/16 12:41:56.688 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:79, Type:drop table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.688 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:79, Type:drop table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="drop table test_drop_column;"]
[2022/02/16 12:41:56.689 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:79, Type:drop table, State:none, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.689 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=77] [neededSchemaVersion=78] ["start time"=63.125µs] [phyTblIDs="[65]"] [actionTypes="[16]"]
[2022/02/16 12:41:56.692 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=78] ["take time"=2.263792ms] [job="ID:79, Type:drop table, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.692 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:79, Type:drop table, State:running, SchemaState:write only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.693 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=78] [neededSchemaVersion=79] ["start time"=62.125µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:56.695 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=79] ["take time"=2.140333ms] [job="ID:79, Type:drop table, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.695 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:79, Type:drop table, State:running, SchemaState:delete only, SchemaID:63, TableID:65, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.696 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=79] [neededSchemaVersion=80] ["start time"=67.042µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:56.698 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=80] ["take time"=2.152042ms] [job="ID:79, Type:drop table, State:done, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.698 +08:00] [INFO] [delete_range.go:452] ["[ddl] insert into delete-range table"] [jobID=79] [elementID=65]
[2022/02/16 12:41:56.699 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=79] [jobType="drop table"]
[2022/02/16 12:41:56.699 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:79, Type:drop table, State:synced, SchemaState:queueing, SchemaID:63, TableID:65, RowCount:0, ArgLen:3, start time: 2022-02-16 12:41:56.688 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.700 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=79]
[2022/02/16 12:41:56.700 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
PASS: db_test.go:1832: testDBSuite3.TestCancelDropColumns	1.164s
[2022/02/16 12:41:56.700 +08:00] [INFO] [session.go:3203] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=80] [cur_db=] [sql="drop database if exists test_db"] [user=]
[2022/02/16 12:41:56.701 +08:00] [INFO] [ddl_worker.go:322] ["[ddl] add DDL jobs"] ["batch count"=1] [jobs="ID:80, Type:drop schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "]
[2022/02/16 12:41:56.701 +08:00] [INFO] [ddl.go:594] ["[ddl] start DDL job"] [job="ID:80, Type:drop schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="drop database if exists test_db"]
[2022/02/16 12:41:56.701 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:80, Type:drop schema, State:none, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.701 +08:00] [INFO] [delete_range.go:238] ["[ddl] delRange emulator complete task"] [jobID=79] [elementID=65] [startKey=748000000000000041] [endKey=748000000000000042]
[2022/02/16 12:41:56.702 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=80] [neededSchemaVersion=81] ["start time"=61.917µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:56.704 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=81] ["take time"=2.262167ms] [job="ID:80, Type:drop schema, State:running, SchemaState:write only, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.704 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:80, Type:drop schema, State:running, SchemaState:write only, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.705 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=81] [neededSchemaVersion=82] ["start time"=64.5µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:56.707 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=82] ["take time"=2.118709ms] [job="ID:80, Type:drop schema, State:running, SchemaState:delete only, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.707 +08:00] [INFO] [ddl_worker.go:737] ["[ddl] run DDL job"] [worker="worker 3, tp general"] [job="ID:80, Type:drop schema, State:running, SchemaState:delete only, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.708 +08:00] [INFO] [domain.go:138] ["diff load InfoSchema success"] [currentSchemaVersion=82] [neededSchemaVersion=83] ["start time"=70.209µs] [phyTblIDs="[]"] [actionTypes="[]"]
[2022/02/16 12:41:56.710 +08:00] [INFO] [ddl_worker.go:942] ["[ddl] wait latest schema version changed"] [worker="worker 3, tp general"] [ver=83] ["take time"=2.119667ms] [job="ID:80, Type:drop schema, State:done, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.710 +08:00] [INFO] [delete_range.go:107] ["[ddl] add job into delete-range table"] [jobID=80] [jobType="drop schema"]
[2022/02/16 12:41:56.710 +08:00] [INFO] [ddl_worker.go:436] ["[ddl] finish DDL job"] [worker="worker 3, tp general"] [job="ID:80, Type:drop schema, State:synced, SchemaState:queueing, SchemaID:63, TableID:0, RowCount:0, ArgLen:0, start time: 2022-02-16 12:41:56.7 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2022/02/16 12:41:56.711 +08:00] [INFO] [ddl.go:657] ["[ddl] DDL job is finished"] [jobID=80]
[2022/02/16 12:41:56.711 +08:00] [INFO] [callback.go:107] ["performing DDL change, must reload"]
[2022/02/16 12:41:56.711 +08:00] [INFO] [ddl_worker.go:150] ["[ddl] DDL worker closed"] [worker="worker 3, tp general"] ["take time"=125ns]
[2022/02/16 12:41:56.711 +08:00] [INFO] [ddl_worker.go:150] ["[ddl] DDL worker closed"] [worker="worker 4, tp add index"] ["take time"=84ns]
[2022/02/16 12:41:56.711 +08:00] [INFO] [delete_range.go:132] ["[ddl] closing delRange"]
[2022/02/16 12:41:56.711 +08:00] [INFO] [session_pool.go:90] ["[ddl] closing sessionPool"]
[2022/02/16 12:41:56.711 +08:00] [INFO] [ddl.go:440] ["[ddl] DDL closed"] [ID=c0df9b67-f0ed-4c6d-b30a-11e97762920d] ["take time"=48.625µs]
[2022/02/16 12:41:56.711 +08:00] [INFO] [ddl.go:347] ["[ddl] stop DDL"] [ID=c0df9b67-f0ed-4c6d-b30a-11e97762920d]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:481] ["topNSlowQueryLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1171] ["TelemetryReportLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1017] ["LoadSysVarCacheLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:589] ["loadSchemaInLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:535] ["globalConfigSyncerKeeper exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1788] ["renew lease goroutine exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:558] ["topologySyncerKeeper exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:967] ["loadPrivilegeInLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:510] ["infoSyncerKeeper exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [handle_hist.go:143] ["SubLoadWorker exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1138] ["handleEvolvePlanTasksLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [handle_hist.go:143] ["SubLoadWorker exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1201] ["TelemetryRotateSubWindowLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [handle_hist.go:143] ["SubLoadWorker exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1223] ["PlanReplayerLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [handle_hist.go:143] ["SubLoadWorker exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:1095] ["globalBindHandleWorkerLoop exited."]
[2022/02/16 12:41:56.711 +08:00] [INFO] [domain.go:716] ["domain closed"] ["take time"=179µs]
[2022/02/16 12:41:56.711 +08:00] [INFO] [handle_hist.go:143] ["SubLoadWorker exited."]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:567] ["Closing database"]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2022/02/16 12:41:56.731 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
OK: 1 passed
--- PASS: TestT (1.47s)
PASS
ok  	github.com/pingcap/tidb/ddl	2.525s
