[2023/09/09 23:17:28.730 +08:00] [INFO] [region_cache.go:2656] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/09/09 23:17:28.731 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:28.731 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:28.732 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:28.732 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:28.732 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:28.733 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=8972b740-44d8-4dae-b05e-b39c5a3ae398] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/09/09 23:17:28.742 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/09/09 23:17:28.743 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/09/09 23:17:28.743 +08:00] [WARN] [domain.go:233] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/home/jiyf/mone/aa/t4/domain/domain.go:315\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/home/jiyf/mone/aa/t4/domain/domain.go:231\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/home/jiyf/mone/aa/t4/domain/domain.go:581\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/home/jiyf/mone/aa/t4/domain/domain.go:1226\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/home/jiyf/mone/aa/t4/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/home/jiyf/mone/aa/t4/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/home/jiyf/mone/aa/t4/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/home/jiyf/mone/aa/t4/session/session.go:3598\ngithub.com/pingcap/tidb/session.createSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3590\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3540\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/home/jiyf/mone/aa/t4/session/session.go:3325\ngithub.com/pingcap/tidb/session.BootstrapSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3291\ngithub.com/pingcap/tidb/testkit.bootstrap\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:227\ngithub.com/pingcap/tidb/testkit.CreateMockStoreAndDomain\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:200\ngithub.com/pingcap/tidb/testkit.CreateMockStore\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:68\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:821\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [version=0]
[2023/09/09 23:17:28.746 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=2.759392ms]
[2023/09/09 23:17:28.746 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:28.746 +08:00] [INFO] [ddl.go:758] ["start DDL"] [category=ddl] [ID=f9e5244b-ae8d-4e72-b317-100f8c380595] [runWorker=true]
[2023/09/09 23:17:28.746 +08:00] [INFO] [ddl.go:721] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/09/09 23:17:28.746 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:28.746 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:28.746 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:28.746 +08:00] [WARN] [domain.go:1292] ["pd / etcd client not provided, won't begin Advancer."]
[2023/09/09 23:17:28.747 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/09/09 23:17:28.747 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/09/09 23:17:28.751 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:28.75 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.751 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:28.75 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/09/09 23:17:28.796 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:28.796 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/09/09 23:17:28.802 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.75 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.807 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=3.096402ms]
[2023/09/09 23:17:28.807 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:28.808 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.808 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/09/09 23:17:28.810 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=6.857383ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:28.75 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.813 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=3] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.75 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.815 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/09/09 23:17:28.815 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.815 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/09/09 23:17:28.816 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/09/09 23:17:28.819 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.817 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.820 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.817 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/09/09 23:17:28.824 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=5] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.817 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.830 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=793.621µs] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.831 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.831 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/09/09 23:17:28.832 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=2.688713ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.817 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.836 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=5] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.817 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.840 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/09/09 23:17:28.840 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.841 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/09/09 23:17:28.843 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.842 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.843 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.842 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/09/09 23:17:28.846 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=7] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.842 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.849 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=192.394µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.850 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.850 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/09/09 23:17:28.852 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=2.853095ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.842 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.854 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=7] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.842 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.856 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/09/09 23:17:28.856 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.856 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/09/09 23:17:28.859 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.858 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.859 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.858 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/09/09 23:17:28.863 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=9] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.858 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.864 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=186.873µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.865 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.865 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/09/09 23:17:28.866 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=2.328252ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.858 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.869 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=9] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.858 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.871 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/09/09 23:17:28.871 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.871 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/09/09 23:17:28.873 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.872 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.873 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.872 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/09/09 23:17:28.877 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=11] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.872 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.881 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=442.791µs] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.881 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.881 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/09/09 23:17:28.882 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=2.281229ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.872 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.885 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=11] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.872 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.889 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/09/09 23:17:28.889 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.889 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/09/09 23:17:28.892 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.891 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.892 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.891 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/09/09 23:17:28.900 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=13] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.891 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.903 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=273.727µs] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.904 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.904 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/09/09 23:17:28.905 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=2.187335ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.891 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.907 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=13] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.891 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.910 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/09/09 23:17:28.910 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.911 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/09/09 23:17:28.913 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.912 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.913 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.912 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/09/09 23:17:28.916 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=15] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.912 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.919 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=214.357µs] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.919 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.919 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/09/09 23:17:28.921 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=2.067009ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.912 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.923 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=15] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.912 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.927 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/09/09 23:17:28.927 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.927 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/09/09 23:17:28.928 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.928 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.929 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.928 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/09/09 23:17:28.933 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=17] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.928 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.934 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=153.261µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.935 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.935 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/09/09 23:17:28.936 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=2.268245ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.928 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.938 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=17] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.928 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.940 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/09/09 23:17:28.940 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.941 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/09/09 23:17:28.942 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.942 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/09/09 23:17:28.946 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=19] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.948 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=222.186µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.949 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.949 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/09/09 23:17:28.950 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=2.364679ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.953 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=19] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.942 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.954 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/09/09 23:17:28.954 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.954 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/09/09 23:17:28.957 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.956 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.957 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.956 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/09/09 23:17:28.960 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=21] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.956 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.962 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=194.25µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.963 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.963 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/09/09 23:17:28.964 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=2.624482ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.956 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.967 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=21] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.956 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.969 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/09/09 23:17:28.969 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.969 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/09/09 23:17:28.970 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.971 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/09/09 23:17:28.976 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.978 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=193.048µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.978 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.978 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/09/09 23:17:28.979 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=2.025597ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.982 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=23] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.97 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.984 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/09/09 23:17:28.984 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:28.984 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:28.984 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/09/09 23:17:28.986 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.985 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:28.986 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.985 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:28.989 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=25] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.985 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.992 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=299.221µs] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/09/09 23:17:28.993 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:28.993 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/09/09 23:17:28.995 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=2.853658ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:28.985 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:28.998 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=25] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:28.985 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.001 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/09/09 23:17:29.001 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.002 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/09/09 23:17:29.003 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.002 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.003 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.002 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/09/09 23:17:29.007 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=27] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.002 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.010 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=293.516µs] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.011 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.011 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/09/09 23:17:29.013 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=2.840114ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.002 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.015 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=27] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.002 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.019 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/09/09 23:17:29.019 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.019 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/09/09 23:17:29.021 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.02 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.021 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.02 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/09/09 23:17:29.024 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=29] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.02 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.026 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=238.767µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.027 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.027 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/09/09 23:17:29.029 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=2.990637ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.02 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.031 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=29] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.02 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.034 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/09/09 23:17:29.034 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.034 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/09/09 23:17:29.037 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.036 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.037 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.036 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/09/09 23:17:29.042 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=31] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.036 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.044 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=206.383µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.045 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.045 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/09/09 23:17:29.047 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=2.694139ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.036 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.052 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=31] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.036 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.055 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/09/09 23:17:29.055 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.055 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:29.057 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.056 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.057 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.056 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:29.061 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=33] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.056 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.063 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=195.311µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.064 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.064 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/09/09 23:17:29.065 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=2.119481ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.056 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.068 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=33] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.056 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.069 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/09/09 23:17:29.069 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.070 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/09/09 23:17:29.071 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.071 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/09/09 23:17:29.075 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=35] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.077 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=213.096µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.078 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.078 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/09/09 23:17:29.079 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=2.049841ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.082 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=35] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.084 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/09/09 23:17:29.084 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.084 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/09/09 23:17:29.085 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.085 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/09/09 23:17:29.089 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=37] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.091 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=191.364µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.092 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.092 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/09/09 23:17:29.093 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=2.209641ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.096 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=37] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.098 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/09/09 23:17:29.099 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.099 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:29.101 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.1 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.101 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.1 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:29.105 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=39] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.1 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.108 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=297.367µs] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.108 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.108 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/09/09 23:17:29.109 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=2.137767ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.1 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.112 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=39] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.1 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.115 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/09/09 23:17:29.115 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.116 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:29.117 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.117 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:29.121 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=41] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.127 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=327.421µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.129 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.129 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/09/09 23:17:29.133 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=5.93022ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.137 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=41] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.139 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/09/09 23:17:29.139 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.140 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/09/09 23:17:29.141 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.141 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/09/09 23:17:29.145 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.146 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=150.521µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.147 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.147 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/09/09 23:17:29.148 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=2.19638ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.151 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=43] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.152 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/09/09 23:17:29.152 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.153 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/09/09 23:17:29.154 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.154 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.154 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.154 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/09/09 23:17:29.158 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=45] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.154 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.159 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=125.455µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.160 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.160 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/09/09 23:17:29.162 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=2.977549ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.154 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.164 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=45] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.154 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.166 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/09/09 23:17:29.166 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.166 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/09/09 23:17:29.168 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.167 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.168 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.167 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/09/09 23:17:29.171 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=47] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.167 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.174 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=230.681µs] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.175 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.175 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/09/09 23:17:29.176 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=2.162473ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.167 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.179 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=47] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.167 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.181 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/09/09 23:17:29.181 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.181 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/09/09 23:17:29.182 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.182 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/09/09 23:17:29.186 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=49] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.188 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=179.069µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.188 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.188 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/09/09 23:17:29.190 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=2.015425ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.192 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=49] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.182 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.193 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/09/09 23:17:29.193 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.193 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:29.195 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.195 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.195 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.195 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:29.199 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=51] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.195 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.200 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=166.427µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.201 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.201 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/09/09 23:17:29.202 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=2.277927ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.195 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.205 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=51] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.195 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.206 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/09/09 23:17:29.206 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.207 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/09/09 23:17:29.208 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.208 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.209 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.208 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/09/09 23:17:29.212 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=53] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.208 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.214 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=274.343µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.214 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.214 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/09/09 23:17:29.216 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=2.543993ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.208 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.219 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=53] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.208 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.222 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/09/09 23:17:29.222 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.222 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/09/09 23:17:29.223 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.223 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.224 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.223 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/09/09 23:17:29.227 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=55] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.223 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.228 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=150.99µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.229 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.229 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/09/09 23:17:29.231 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=2.686823ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.223 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.234 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=55] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.223 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.235 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/09/09 23:17:29.236 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.236 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/09/09 23:17:29.237 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.236 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.237 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.236 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/09/09 23:17:29.241 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=57] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.236 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.243 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=188.635µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.243 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.243 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/09/09 23:17:29.245 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=3.030964ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.236 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.248 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=57] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.236 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.250 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/09/09 23:17:29.250 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.250 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/09/09 23:17:29.252 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.251 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.252 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.251 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/09/09 23:17:29.257 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=59] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.251 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.258 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=148.728µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.259 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.259 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/09/09 23:17:29.261 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=2.692811ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.251 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.264 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=59] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.251 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.266 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/09/09 23:17:29.266 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.266 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/09/09 23:17:29.266 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/09/09 23:17:29.267 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.267 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.267 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.267 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/09/09 23:17:29.272 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=61] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.267 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.274 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=192.619µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.274 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.274 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/09/09 23:17:29.276 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=3.015359ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.267 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.279 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=61] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.267 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.281 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/09/09 23:17:29.281 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.281 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/09/09 23:17:29.283 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.282 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.283 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.282 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/09/09 23:17:29.286 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.282 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.289 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=241.869µs] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.290 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.290 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/09/09 23:17:29.291 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=2.818214ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.282 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.295 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=63] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.282 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.297 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/09/09 23:17:29.297 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.297 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/09/09 23:17:29.299 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.298 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.299 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.298 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/09/09 23:17:29.303 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=65] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.298 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.306 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=270.515µs] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.307 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.307 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/09/09 23:17:29.308 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=2.023665ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.298 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.311 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=65] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.298 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.313 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/09/09 23:17:29.313 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.313 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/09/09 23:17:29.315 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.314 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.315 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.314 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/09/09 23:17:29.319 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=67] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.314 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.322 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=271.722µs] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.323 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.323 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/09/09 23:17:29.325 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=2.92284ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.314 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.327 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=67] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.314 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.330 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/09/09 23:17:29.330 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.330 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/09/09 23:17:29.331 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.33 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.331 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.33 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/09/09 23:17:29.335 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=69] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.33 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.336 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=149.185µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.336 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.337 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/09/09 23:17:29.338 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=2.15554ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.33 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.340 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=69] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.33 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.342 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/09/09 23:17:29.342 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.344 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:29.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.344 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:29.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/09/09 23:17:29.353 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=71] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.357 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=367.645µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/09/09 23:17:29.359 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.359 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/09/09 23:17:29.359 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=2.008808ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:29.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.365 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=71] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.367 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/09/09 23:17:29.367 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.367 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/09/09 23:17:29.368 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.368 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/09/09 23:17:29.372 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=73] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.374 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=218.88µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.374 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.374 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/09/09 23:17:29.377 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=2.961091ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.379 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=73] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.381 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/09/09 23:17:29.381 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.381 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/09/09 23:17:29.382 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.382 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.382 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.382 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/09/09 23:17:29.386 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=75] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.382 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.387 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=154.802µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.388 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.388 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/09/09 23:17:29.389 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=2.267245ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.382 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.392 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=75] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.382 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.393 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/09/09 23:17:29.393 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.393 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/09/09 23:17:29.395 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.395 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/09/09 23:17:29.398 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=77] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.400 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=143.33µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.401 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.401 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/09/09 23:17:29.402 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=2.13822ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.405 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=77] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.407 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/09/09 23:17:29.407 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.407 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/09/09 23:17:29.409 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.409 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/09/09 23:17:29.413 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=79] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.415 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=317.213µs] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.416 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.416 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/09/09 23:17:29.418 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=2.581213ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.420 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=79] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.423 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/09/09 23:17:29.423 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.424 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/09/09 23:17:29.426 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.426 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/09/09 23:17:29.429 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=81] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.432 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=285.466µs] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.433 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.433 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/09/09 23:17:29.435 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=2.963299ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.438 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=81] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.440 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/09/09 23:17:29.440 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.440 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/09/09 23:17:29.442 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.442 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/09/09 23:17:29.445 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.448 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=332.869µs] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.449 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.449 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/09/09 23:17:29.450 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=2.62745ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.453 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=83] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.455 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/09/09 23:17:29.455 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.455 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/09/09 23:17:29.457 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.456 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.457 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.456 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/09/09 23:17:29.460 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=85] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.456 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.463 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=274.919µs] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.464 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.464 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/09/09 23:17:29.465 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=2.877539ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.456 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.468 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=85] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.456 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.470 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/09/09 23:17:29.470 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.470 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/09/09 23:17:29.472 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.471 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.472 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.471 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/09/09 23:17:29.476 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=87] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.471 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.479 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=376.392µs] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.480 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.480 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/09/09 23:17:29.481 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=2.619784ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.471 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.484 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=87] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.471 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.486 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/09/09 23:17:29.486 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.486 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/09/09 23:17:29.489 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.488 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.489 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.488 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/09/09 23:17:29.492 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=89] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.488 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.495 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=322.016µs] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.495 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.495 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/09/09 23:17:29.496 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=2.014089ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.488 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.502 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=89] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.488 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.505 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/09/09 23:17:29.505 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.506 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:29.509 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.508 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.509 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.508 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:29.512 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=91] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.508 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.515 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=264.777µs] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.515 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.515 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/09/09 23:17:29.517 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=2.471045ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.508 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.520 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=91] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.508 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.522 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/09/09 23:17:29.522 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.522 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:29.524 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.524 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:29.527 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=93] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.529 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=214.16µs] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.530 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.530 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/09/09 23:17:29.531 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=2.025417ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.533 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=93] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.535 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/09/09 23:17:29.535 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.536 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/09/09 23:17:29.538 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.537 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.538 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.537 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/09/09 23:17:29.541 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=95] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.537 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.545 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=387.546µs] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.545 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.545 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/09/09 23:17:29.546 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=2.102417ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.537 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.552 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=95] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.537 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.554 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/09/09 23:17:29.554 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.555 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:29.557 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.557 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:29.561 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=97] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.563 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=237.549µs] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.564 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.564 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/09/09 23:17:29.565 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=2.06483ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.567 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=97] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.556 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.570 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/09/09 23:17:29.570 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.570 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=48] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(100) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        keyspace_id bigint(8) NOT NULL DEFAULT -1);"] [user=]
[2023/09/09 23:17:29.572 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(100) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        keyspace_id bigint(8) NOT NULL DEFAULT -1);"]
[2023/09/09 23:17:29.572 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.584 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=99] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.587 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=169.412µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.587 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.588 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=99] [version=49]
[2023/09/09 23:17:29.589 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=2.241713ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.591 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [jobID=99] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.571 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.593 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=99]
[2023/09/09 23:17:29.593 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.611 +08:00] [INFO] [bootstrap.go:705] ["bootstrap successful"] ["take time"=864.133932ms]
[2023/09/09 23:17:29.611 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=f9e5244b-ae8d-4e72-b317-100f8c380595] [ownerKey=/tidb/ddl/fg/owner]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 2, tp add index"] [category=ddl] ["take time"=910ns]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 1, tp general"] [category=ddl] ["take time"=812ns]
[2023/09/09 23:17:29.611 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/09/09 23:17:29.611 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl.go:881] ["DDL closed"] [category=ddl] [ID=f9e5244b-ae8d-4e72-b317-100f8c380595] ["take time"=436.605µs]
[2023/09/09 23:17:29.611 +08:00] [INFO] [ddl.go:713] ["stop DDL"] [category=ddl] [ID=f9e5244b-ae8d-4e72-b317-100f8c380595]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:879] ["loadSchemaInLoop exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:736] ["topologySyncerKeeper exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:712] ["globalConfigSyncerKeeper exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:686] ["infoSyncerKeeper exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:658] ["topNSlowQueryLoop exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:1322] ["closestReplicaReadCheckLoop exited."]
[2023/09/09 23:17:29.611 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:29.611 +08:00] [INFO] [domain.go:1043] ["domain closed"] ["take time"=639.424µs]
[2023/09/09 23:17:29.611 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=8972b740-44d8-4dae-b05e-b39c5a3ae398] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/09/09 23:17:29.617 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/09/09 23:17:29.617 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/09/09 23:17:29.627 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=49] ["start time"=9.363402ms]
[2023/09/09 23:17:29.627 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:29.627 +08:00] [INFO] [ddl.go:758] ["start DDL"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a] [runWorker=true]
[2023/09/09 23:17:29.627 +08:00] [INFO] [ddl.go:721] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/09/09 23:17:29.627 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/09/09 23:17:29.627 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:29.627 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:29.627 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:29.627 +08:00] [WARN] [domain.go:1292] ["pd / etcd client not provided, won't begin Advancer."]
[2023/09/09 23:17:29.629 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/09/09 23:17:29.629 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/09/09 23:17:29.629 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/09/09 23:17:29.631 +08:00] [INFO] [sysvar.go:2477] ["set resource control"] [enable=true]
[2023/09/09 23:17:29.631 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/09/09 23:17:29.636 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/09/09 23:17:29.637 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/09/09 23:17:29.638 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/09/09 23:17:29.638 +08:00] [INFO] [domain.go:2086] ["dumpFileGcChecker started"]
[2023/09/09 23:17:29.639 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/09/09 23:17:29.639 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/09/09 23:17:29.639 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/09/09 23:17:29.639 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/09/09 23:17:29.639 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/09/09 23:17:29.639 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/09/09 23:17:29.639 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=49] [cur_db=] [sql="create database check_constraint"] [user=]
[2023/09/09 23:17:29.641 +08:00] [INFO] [domain.go:1478] ["dist task scheduler started"]
[2023/09/09 23:17:29.642 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.642 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create database check_constraint"]
[2023/09/09 23:17:29.678 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:29.678 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/09/09 23:17:29.684 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=101] [conn=1] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.687 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=49] [neededSchemaVersion=50] ["start time"=51.265µs] [gotSchemaVersion=50] [phyTblIDs="[]"] [actionTypes="[]"]
[2023/09/09 23:17:29.688 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=101] [version=50]
[2023/09/09 23:17:29.690 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=50] ["take time"=2.670364ms] [job="ID:101, Type:create schema, State:done, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.692 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=101] [conn=1] [job="ID:101, Type:create schema, State:synced, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.642 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.693 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=101]
[2023/09/09 23:17:29.693 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.696 +08:00] [INFO] [set.go:164] ["set global var"] [conn=1] [name=tidb_enable_check_constraint] [val=1]
[2023/09/09 23:17:29.696 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=50] [cur_db=check_constraint] [sql="create table nt (a int check (a > 75) not ENFORCED, b int check (b > 50) ENFORCED)"] [user=]
[2023/09/09 23:17:29.698 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.698 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table nt (a int check (a > 75) not ENFORCED, b int check (b > 50) ENFORCED)"]
[2023/09/09 23:17:29.701 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=103] [conn=1] [category=ddl] [job="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.703 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=50] [neededSchemaVersion=51] ["start time"=305.198µs] [gotSchemaVersion=51] [phyTblIDs="[102]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.704 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=103] [version=51]
[2023/09/09 23:17:29.705 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=51] ["take time"=2.209507ms] [job="ID:103, Type:create table, State:done, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.708 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=103] [conn=1] [job="ID:103, Type:create table, State:synced, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.697 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.709 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=103]
[2023/09/09 23:17:29.709 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.709 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=51] [cur_db=check_constraint] [sql="create table pt (a int check (a < 75) ENFORCED, b int check (b < 75) ENFORCED) partition by range (a) (partition p0 values less than (50), partition p1 values less than (100) )"] [user=]
[2023/09/09 23:17:29.711 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.711 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table pt (a int check (a < 75) ENFORCED, b int check (b < 75) ENFORCED) partition by range (a) (partition p0 values less than (50), partition p1 values less than (100) )"]
[2023/09/09 23:17:29.715 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=107] [conn=1] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.717 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=51] [neededSchemaVersion=52] ["start time"=456.052µs] [gotSchemaVersion=52] [phyTblIDs="[104,105,106]"] [actionTypes="[3,3,3]"]
[2023/09/09 23:17:29.718 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=107] [version=52]
[2023/09/09 23:17:29.719 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=52] ["take time"=2.269488ms] [job="ID:107, Type:create table, State:done, SchemaState:public, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.722 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=107] [conn=1] [job="ID:107, Type:create table, State:synced, SchemaState:public, SchemaID:100, TableID:104, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.711 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.724 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=107]
[2023/09/09 23:17:29.724 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.727 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=3] [schemaVersion=52] [cur_db=check_constraint] [sql="alter table pt exchange partition p1 with table nt"] [user=]
[2023/09/09 23:17:29.728 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:29.727 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.728 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:29.727 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table pt exchange partition p1 with table nt"]
[2023/09/09 23:17:29.733 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=108] [conn=3] [category=ddl] [job="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.727 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.736 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=52] [neededSchemaVersion=53] ["start time"=663.56µs] [gotSchemaVersion=53] [phyTblIDs="[104,105,106,102]"] [actionTypes="[42,42,42,42]"]
[2023/09/09 23:17:29.782 +08:00] [INFO] [partition_test.go:858] ["Got state"] [State="write only"]
[2023/09/09 23:17:29.783 +08:00] [WARN] [2pc.go:1783] ["schemaLeaseChecker is not set for this transaction"] [sessionID=1] [startTS=444143409504714753] [checkTS=444143409504714754]
[2023/09/09 23:17:29.783 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.783 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_1' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.783 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.783 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_2' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.784 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.784 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_1' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.785 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.785 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_2' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.785 +08:00] [WARN] [2pc.go:1783] ["schemaLeaseChecker is not set for this transaction"] [sessionID=1] [startTS=444143409505239041] [checkTS=444143409505239042]
[2023/09/09 23:17:29.785 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.785 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'nt_chk_2' is violated."] [errorVerbose="[table:3819]Check constraint 'nt_chk_2' is violated.\ngithub.com/pingcap/tidb/table/tables.partitionedTableAddRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1613\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).AddRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1591\ngithub.com/pingcap/tidb/executor.(*InsertValues).addRecordWithAutoIDHint\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:1394\ngithub.com/pingcap/tidb/executor.(*InsertExec).exec\n\t/home/jiyf/mone/aa/t4/executor/insert.go:104\ngithub.com/pingcap/tidb/executor.insertRows\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:252\ngithub.com/pingcap/tidb/executor.(*InsertExec).Next\n\t/home/jiyf/mone/aa/t4/executor/insert.go:307\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:794\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustContainErrMsg\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:432\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:878\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.786 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.787 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'nt_chk_2' is violated."] [errorVerbose="[table:3819]Check constraint 'nt_chk_2' is violated.\ngithub.com/pingcap/tidb/table/tables.partitionedTableUpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1746\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).UpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1713\ngithub.com/pingcap/tidb/executor.updateRecord\n\t/home/jiyf/mone/aa/t4/executor/write.go:196\ngithub.com/pingcap/tidb/executor.(*UpdateExec).exec\n\t/home/jiyf/mone/aa/t4/executor/update.go:201\ngithub.com/pingcap/tidb/executor.(*UpdateExec).updateRows\n\t/home/jiyf/mone/aa/t4/executor/update.go:319\ngithub.com/pingcap/tidb/executor.(*UpdateExec).Next\n\t/home/jiyf/mone/aa/t4/executor/update.go:240\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:794\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustContainErrMsg\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:432\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:880\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 1,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.789 +08:00] [INFO] [set.go:164] ["set global var"] [conn=1] [name=tidb_enable_check_constraint] [val=0]
[2023/09/09 23:17:29.796 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=108] [version=53]
[2023/09/09 23:17:29.798 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=53] ["take time"=62.515991ms] [job="ID:108, Type:exchange partition, State:running, SchemaState:write only, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:29.727 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.800 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 3, tp general"] [category=ddl] [jobID=108] [conn=3] [category=ddl] [job="ID:108, Type:exchange partition, State:running, SchemaState:write only, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.727 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.804 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=53] [neededSchemaVersion=54] ["start time"=908.306µs] [gotSchemaVersion=54] [phyTblIDs="[104,105,102,102,106]"] [actionTypes="[42,42,42,42,42]"]
[2023/09/09 23:17:29.852 +08:00] [INFO] [partition_test.go:858] ["Got state"] [State=none]
[2023/09/09 23:17:29.855 +08:00] [INFO] [set.go:164] ["set global var"] [conn=1] [name=tidb_enable_check_constraint] [val=1]
[2023/09/09 23:17:29.855 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'nt_chk_2' is violated."] [errorVerbose="[table:3819]Check constraint 'nt_chk_2' is violated.\ngithub.com/pingcap/tidb/table/tables.partitionedTableAddRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1613\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).AddRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1591\ngithub.com/pingcap/tidb/executor.(*InsertValues).addRecordWithAutoIDHint\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:1394\ngithub.com/pingcap/tidb/executor.(*InsertExec).exec\n\t/home/jiyf/mone/aa/t4/executor/insert.go:104\ngithub.com/pingcap/tidb/executor.insertRows\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:252\ngithub.com/pingcap/tidb/executor.(*InsertExec).Next\n\t/home/jiyf/mone/aa/t4/executor/insert.go:307\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1029\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:791\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustContainErrMsg\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:432\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:912\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 5,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"444143409507336193\",\n  \"user\": null\n}"]
[2023/09/09 23:17:29.857 +08:00] [WARN] [charset.go:178] ["unable to get collation name from collation ID, return default charset and collation instead"] [ID=0] [stack="github.com/pingcap/tidb/parser/charset.GetCharsetInfoByID\n\t/home/jiyf/mone/aa/t4/parser/charset/charset.go:181\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.fieldTypeFromPBColumn\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:608\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPTableScan\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:91\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:530\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPSel\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:467\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:546\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.buildAndRunMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:184\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.handleCopDAGRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:144\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.HandleCopRequestWithMPPCtx\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:71\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.HandleCopRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:59\ngithub.com/pingcap/tidb/store/mockstore/unistore/tikv.(*Server).Coprocessor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/tikv/server.go:576\ngithub.com/pingcap/tidb/store/mockstore/unistore.(*RPCClient).SendRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/rpc.go:251\ngithub.com/pingcap/tidb/store/mockstore.(*clientRedirector).SendRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/redirector.go:72\ngithub.com/tikv/client-go/v2/tikv.(*CodecClient).SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/tikv/test_util.go:60\ngithub.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest.func1\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:59\ngithub.com/pingcap/tidb/util/topsql/stmtstats.(*KvExecCounter).RPCInterceptor.func1.1\n\t/home/jiyf/mone/aa/t4/util/topsql/stmtstats/kv_exec_count.go:57\ngithub.com/tikv/client-go/v2/internal/client.buildResourceControlInterceptor.func1.1\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:125\ngithub.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:60\ngithub.com/tikv/client-go/v2/internal/client.reqCollapse.SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_collapse.go:74\ngithub.com/tikv/client-go/v2/internal/locate.(*RegionRequestSender).sendReqToRegion\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/locate/region_request.go:1661\ngithub.com/tikv/client-go/v2/internal/locate.(*RegionRequestSender).SendReqCtx\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/locate/region_request.go:1442\ngithub.com/tikv/client-go/v2/txnkv/txnsnapshot.(*ClientHelper).SendReqCtx\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/txnkv/txnsnapshot/client_helper.go:146\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTaskOnce\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:1230\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTask\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:1129\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).run\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:816"]
[2023/09/09 23:17:29.858 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'nt_chk_2' is violated."] [errorVerbose="[table:3819]Check constraint 'nt_chk_2' is violated.\ngithub.com/pingcap/tidb/table/tables.partitionedTableUpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1746\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).UpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1713\ngithub.com/pingcap/tidb/executor.updateRecord\n\t/home/jiyf/mone/aa/t4/executor/write.go:196\ngithub.com/pingcap/tidb/executor.(*UpdateExec).exec\n\t/home/jiyf/mone/aa/t4/executor/update.go:201\ngithub.com/pingcap/tidb/executor.(*UpdateExec).updateRows\n\t/home/jiyf/mone/aa/t4/executor/update.go:319\ngithub.com/pingcap/tidb/executor.(*UpdateExec).Next\n\t/home/jiyf/mone/aa/t4/executor/update.go:240\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1029\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:791\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustContainErrMsg\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:432\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:917\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 5,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"444143409507336193\",\n  \"user\": null\n}"]
[2023/09/09 23:17:29.859 +08:00] [WARN] [charset.go:178] ["unable to get collation name from collation ID, return default charset and collation instead"] [ID=0] [stack="github.com/pingcap/tidb/parser/charset.GetCharsetInfoByID\n\t/home/jiyf/mone/aa/t4/parser/charset/charset.go:181\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.fieldTypeFromPBColumn\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:608\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPTableScan\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:91\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:530\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPSel\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:467\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.(*mppExecBuilder).buildMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/mpp.go:546\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.buildAndRunMPPExecutor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:184\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.handleCopDAGRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:144\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.HandleCopRequestWithMPPCtx\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:71\ngithub.com/pingcap/tidb/store/mockstore/unistore/cophandler.HandleCopRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/cophandler/cop_handler.go:59\ngithub.com/pingcap/tidb/store/mockstore/unistore/tikv.(*Server).Coprocessor\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/tikv/server.go:576\ngithub.com/pingcap/tidb/store/mockstore/unistore.(*RPCClient).SendRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/unistore/rpc.go:251\ngithub.com/pingcap/tidb/store/mockstore.(*clientRedirector).SendRequest\n\t/home/jiyf/mone/aa/t4/store/mockstore/redirector.go:72\ngithub.com/tikv/client-go/v2/tikv.(*CodecClient).SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/tikv/test_util.go:60\ngithub.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest.func1\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:59\ngithub.com/pingcap/tidb/util/topsql/stmtstats.(*KvExecCounter).RPCInterceptor.func1.1\n\t/home/jiyf/mone/aa/t4/util/topsql/stmtstats/kv_exec_count.go:57\ngithub.com/tikv/client-go/v2/internal/client.buildResourceControlInterceptor.func1.1\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:125\ngithub.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_interceptor.go:60\ngithub.com/tikv/client-go/v2/internal/client.reqCollapse.SendRequest\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/client/client_collapse.go:74\ngithub.com/tikv/client-go/v2/internal/locate.(*RegionRequestSender).sendReqToRegion\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/locate/region_request.go:1661\ngithub.com/tikv/client-go/v2/internal/locate.(*RegionRequestSender).SendReqCtx\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/internal/locate/region_request.go:1442\ngithub.com/tikv/client-go/v2/txnkv/txnsnapshot.(*ClientHelper).SendReqCtx\n\t/home/jiyf/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20230905034839-5dd12b06bc3c/txnkv/txnsnapshot/client_helper.go:146\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTaskOnce\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:1230\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTask\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:1129\ngithub.com/pingcap/tidb/store/copr.(*copIteratorWorker).run\n\t/home/jiyf/mone/aa/t4/store/copr/coprocessor.go:816"]
[2023/09/09 23:17:29.860 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'nt_chk_2' is violated."] [errorVerbose="[table:3819]Check constraint 'nt_chk_2' is violated.\ngithub.com/pingcap/tidb/table/tables.partitionedTableUpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1746\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).UpdateRecord\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1713\ngithub.com/pingcap/tidb/executor.updateRecord\n\t/home/jiyf/mone/aa/t4/executor/write.go:196\ngithub.com/pingcap/tidb/executor.(*UpdateExec).exec\n\t/home/jiyf/mone/aa/t4/executor/update.go:201\ngithub.com/pingcap/tidb/executor.(*UpdateExec).updateRows\n\t/home/jiyf/mone/aa/t4/executor/update.go:319\ngithub.com/pingcap/tidb/executor.(*UpdateExec).Next\n\t/home/jiyf/mone/aa/t4/executor/update.go:240\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1029\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:791\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustContainErrMsg\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:432\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:922\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 5,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"444143409507336193\",\n  \"user\": null\n}"]
[2023/09/09 23:17:29.860 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:1748]Found a row not matching the given partition set"] [errorVerbose="[table:1748]Found a row not matching the given partition set\ngithub.com/pingcap/tidb/table/tables.(*partitionedTable).CheckForExchangePartition\n\t/home/jiyf/mone/aa/t4/table/tables/partition.go:1279\ngithub.com/pingcap/tidb/executor.checkRowForExchangePartition\n\t/home/jiyf/mone/aa/t4/executor/write.go:329\ngithub.com/pingcap/tidb/executor.(*InsertValues).fillRow\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:696\ngithub.com/pingcap/tidb/executor.(*InsertValues).fastEvalRow\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:411\ngithub.com/pingcap/tidb/executor.insertRows\n\t/home/jiyf/mone/aa/t4/executor/insert_common.go:219\ngithub.com/pingcap/tidb/executor.(*InsertExec).Next\n\t/home/jiyf/mone/aa/t4/executor/insert.go:307\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1029\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:791\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:134\ngithub.com/pingcap/tidb/testkit.(*TestKit).MustExec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:129\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:924\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 6,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"444143409507598336\",\n  \"user\": null\n}"]
[2023/09/09 23:17:29.860 +08:00] [INFO] [ddl.go:1110] ["DoDDLJob will quit because context done"] [category=ddl]
[2023/09/09 23:17:29.860 +08:00] [INFO] [ddl_worker.go:1223] ["wait latest schema version encounter error"] [category=ddl] [ver=54] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/jiyf/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.Trace\n\t/home/jiyf/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/juju_adaptor.go:15\ngithub.com/pingcap/tidb/ddl.(*MockSchemaSyncer).OwnerCheckAllVersions\n\t/home/jiyf/mone/aa/t4/ddl/mock.go:126\ngithub.com/pingcap/tidb/ddl.waitSchemaChanged\n\t/home/jiyf/mone/aa/t4/ddl/ddl_worker.go:1221\ngithub.com/pingcap/tidb/ddl.(*ddl).delivery2worker.func1\n\t/home/jiyf/mone/aa/t4/ddl/job_table.go:431\ngithub.com/pingcap/tidb/util.(*WaitGroupWrapper).Run.func1\n\t/home/jiyf/mone/aa/t4/util/wait_group_wrapper.go:154\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"]
[2023/09/09 23:17:29.860 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:29.861 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=52] [error="context canceled"] [errorVerbose="context canceled\ngithub.com/pingcap/errors.AddStack\n\t/home/jiyf/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.Trace\n\t/home/jiyf/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/juju_adaptor.go:15\ngithub.com/pingcap/tidb/ddl.(*ddl).ExchangeTablePartition\n\t/home/jiyf/mone/aa/t4/ddl/ddl_api.go:5035\ngithub.com/pingcap/tidb/ddl.(*ddl).AlterTable\n\t/home/jiyf/mone/aa/t4/ddl/ddl_api.go:3684\ngithub.com/pingcap/tidb/executor.(*DDLExec).executeAlterTable\n\t/home/jiyf/mone/aa/t4/executor/ddl.go:385\ngithub.com/pingcap/tidb/executor.(*DDLExec).Next\n\t/home/jiyf/mone/aa/t4/executor/ddl.go:149\ngithub.com/pingcap/tidb/executor/internal/exec.Next\n\t/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283\ngithub.com/pingcap/tidb/executor.(*ExecStmt).next\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:1223\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:968\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:794\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jiyf/mone/aa/t4/executor/adapter.go:575\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2420\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/home/jiyf/mone/aa/t4/session/session.go:2270\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:342\ngithub.com/pingcap/tidb/testkit.(*TestKit).Exec\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:315\ngithub.com/pingcap/tidb/testkit.(*TestKit).ExecToErr\n\t/home/jiyf/mone/aa/t4/testkit/testkit.go:377\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates.func1\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:845\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 3,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:29.861 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a] [ownerKey=/tidb/ddl/fg/owner]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 4, tp add index"] [category=ddl] ["take time"=1.822µs]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 3, tp general"] [category=ddl] ["take time"=1.366µs]
[2023/09/09 23:17:29.861 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/09/09 23:17:29.861 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl.go:881] ["DDL closed"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a] ["take time"=764.148µs]
[2023/09/09 23:17:29.861 +08:00] [INFO] [ddl.go:713] ["stop DDL"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a]
[2023/09/09 23:17:29.861 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/09/09 23:17:29.861 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/09/09 23:17:29.861 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:29.861 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:879] ["loadSchemaInLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1480] ["stopping dist task scheduler"]
[2023/09/09 23:17:29.862 +08:00] [INFO] [manager.go:185] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:2915] ["ttlJobManager exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/09/09 23:17:29.862 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a] [ownerKey=/tidb/stats/owner]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/09/09 23:17:29.862 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:2090] ["dumpFileGcChecker exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1690] ["LoadSysVarCacheLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1640] ["loadPrivilegeInLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=f42460d6-5331-4e3c-a72f-e4eff887776a] [ownerKey=/tidb/bindinfo/owner]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1869] ["handleEvolvePlanTasksLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1826] ["globalBindHandleWorkerLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:736] ["topologySyncerKeeper exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:712] ["globalConfigSyncerKeeper exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:686] ["infoSyncerKeeper exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:658] ["topNSlowQueryLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1322] ["closestReplicaReadCheckLoop exited."]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [manager.go:165] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1482] ["dist task scheduler stopped"]
[2023/09/09 23:17:29.862 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/09/09 23:17:29.862 +08:00] [INFO] [domain.go:1043] ["domain closed"] ["take time"=1.899707ms]
[2023/09/09 23:17:29.865 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/09/09 23:17:29.866 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/09/09 23:17:29.866 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/09/09 23:17:29.866 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/09/09 23:17:29.866 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/09/09 23:17:29.866 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- FAIL: TestExchangePartitionCheckConstraintStates (1.17s)
    testkit.go:136: 
        	Error Trace:	/home/jiyf/mone/aa/t4/testkit/testkit.go:136
        	            				/home/jiyf/mone/aa/t4/testkit/testkit.go:129
        	            				/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:924
        	Error:      	Received unexpected error:
        	            	[table:1748]Found a row not matching the given partition set
        	            	github.com/pingcap/tidb/table/tables.(*partitionedTable).CheckForExchangePartition
        	            		/home/jiyf/mone/aa/t4/table/tables/partition.go:1279
        	            	github.com/pingcap/tidb/executor.checkRowForExchangePartition
        	            		/home/jiyf/mone/aa/t4/executor/write.go:329
        	            	github.com/pingcap/tidb/executor.(*InsertValues).fillRow
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:696
        	            	github.com/pingcap/tidb/executor.(*InsertValues).fastEvalRow
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:411
        	            	github.com/pingcap/tidb/executor.insertRows
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:219
        	            	github.com/pingcap/tidb/executor.(*InsertExec).Next
        	            		/home/jiyf/mone/aa/t4/executor/insert.go:307
        	            	github.com/pingcap/tidb/executor/internal/exec.Next
        	            		/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).next
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:1223
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:968
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:1029
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:791
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).Exec
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:575
        	            	github.com/pingcap/tidb/session.runStmt
        	            		/home/jiyf/mone/aa/t4/session/session.go:2420
        	            	github.com/pingcap/tidb/session.(*session).ExecuteStmt
        	            		/home/jiyf/mone/aa/t4/session/session.go:2270
        	            	github.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:342
        	            	github.com/pingcap/tidb/testkit.(*TestKit).MustExecWithContext
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:134
        	            	github.com/pingcap/tidb/testkit.(*TestKit).MustExec
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:129
        	            	github.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates
        	            		/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:924
        	            	testing.tRunner
        	            		/usr/local/go/src/testing/testing.go:1595
        	            	runtime.goexit
        	            		/usr/local/go/src/runtime/asm_amd64.s:1650
        	Test:       	TestExchangePartitionCheckConstraintStates
        	Messages:   	sql:insert into nt values (60, 60), [], error stack [table:1748]Found a row not matching the given partition set
        	            	github.com/pingcap/tidb/table/tables.(*partitionedTable).CheckForExchangePartition
        	            		/home/jiyf/mone/aa/t4/table/tables/partition.go:1279
        	            	github.com/pingcap/tidb/executor.checkRowForExchangePartition
        	            		/home/jiyf/mone/aa/t4/executor/write.go:329
        	            	github.com/pingcap/tidb/executor.(*InsertValues).fillRow
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:696
        	            	github.com/pingcap/tidb/executor.(*InsertValues).fastEvalRow
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:411
        	            	github.com/pingcap/tidb/executor.insertRows
        	            		/home/jiyf/mone/aa/t4/executor/insert_common.go:219
        	            	github.com/pingcap/tidb/executor.(*InsertExec).Next
        	            		/home/jiyf/mone/aa/t4/executor/insert.go:307
        	            	github.com/pingcap/tidb/executor/internal/exec.Next
        	            		/home/jiyf/mone/aa/t4/executor/internal/exec/executor.go:283
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).next
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:1223
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:968
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:1029
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:791
        	            	github.com/pingcap/tidb/executor.(*ExecStmt).Exec
        	            		/home/jiyf/mone/aa/t4/executor/adapter.go:575
        	            	github.com/pingcap/tidb/session.runStmt
        	            		/home/jiyf/mone/aa/t4/session/session.go:2420
        	            	github.com/pingcap/tidb/session.(*session).ExecuteStmt
        	            		/home/jiyf/mone/aa/t4/session/session.go:2270
        	            	github.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:342
        	            	github.com/pingcap/tidb/testkit.(*TestKit).MustExecWithContext
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:134
        	            	github.com/pingcap/tidb/testkit.(*TestKit).MustExec
        	            		/home/jiyf/mone/aa/t4/testkit/testkit.go:129
        	            	github.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStates
        	            		/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:924
        	            	testing.tRunner
        	            		/usr/local/go/src/testing/testing.go:1595
        	            	runtime.goexit
        	            		/usr/local/go/src/runtime/asm_amd64.s:1650
[2023/09/09 23:17:29.884 +08:00] [INFO] [region_cache.go:2656] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/09/09 23:17:29.884 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:29.884 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:29.884 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:29.884 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:29.885 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/09/09 23:17:29.886 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=78965643-d4dc-4f66-b266-846695142c82] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/09/09 23:17:29.892 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/09/09 23:17:29.892 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/09/09 23:17:29.892 +08:00] [WARN] [domain.go:233] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/home/jiyf/mone/aa/t4/domain/domain.go:315\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/home/jiyf/mone/aa/t4/domain/domain.go:231\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/home/jiyf/mone/aa/t4/domain/domain.go:581\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/home/jiyf/mone/aa/t4/domain/domain.go:1226\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/home/jiyf/mone/aa/t4/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/home/jiyf/mone/aa/t4/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/home/jiyf/mone/aa/t4/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/home/jiyf/mone/aa/t4/session/session.go:3598\ngithub.com/pingcap/tidb/session.createSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3590\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3540\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/home/jiyf/mone/aa/t4/session/session.go:3325\ngithub.com/pingcap/tidb/session.BootstrapSession\n\t/home/jiyf/mone/aa/t4/session/session.go:3291\ngithub.com/pingcap/tidb/testkit.bootstrap\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:227\ngithub.com/pingcap/tidb/testkit.CreateMockStoreAndDomain\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:200\ngithub.com/pingcap/tidb/testkit.CreateMockStore\n\t/home/jiyf/mone/aa/t4/testkit/mockstore.go:68\ngithub.com/pingcap/tidb/table/tables/test/partition.TestExchangePartitionCheckConstraintStatesTwo\n\t/home/jiyf/mone/aa/t4/table/tables/test/partition/partition_test.go:940\ntesting.tRunner\n\t/usr/local/go/src/testing/testing.go:1595\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1650"] [version=0]
[2023/09/09 23:17:29.894 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=2.103471ms]
[2023/09/09 23:17:29.894 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:29.894 +08:00] [INFO] [ddl.go:758] ["start DDL"] [category=ddl] [ID=fc0d8b61-fd2f-4aa5-8ef6-1a36b907b7d7] [runWorker=true]
[2023/09/09 23:17:29.895 +08:00] [INFO] [ddl.go:721] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/09/09 23:17:29.895 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/09/09 23:17:29.895 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:29.895 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:29.895 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:29.895 +08:00] [WARN] [domain.go:1292] ["pd / etcd client not provided, won't begin Advancer."]
[2023/09/09 23:17:29.895 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/09/09 23:17:29.895 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/09/09 23:17:29.897 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.896 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.897 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.896 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/09/09 23:17:29.946 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:29.946 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/09/09 23:17:29.951 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=3] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.896 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.956 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=2.134636ms]
[2023/09/09 23:17:29.956 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:29.957 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.957 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/09/09 23:17:29.959 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=4.57176ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:29.896 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.961 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=3] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.896 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.962 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/09/09 23:17:29.962 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.962 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/09/09 23:17:29.963 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/09/09 23:17:29.967 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.965 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.967 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.965 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/09/09 23:17:29.971 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=5] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.965 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.977 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=643.137µs] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.978 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.978 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/09/09 23:17:29.979 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=2.052075ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.965 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.982 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=5] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.965 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.986 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/09/09 23:17:29.986 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:29.987 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/09/09 23:17:29.988 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:29.988 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/09/09 23:17:29.991 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=7] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:29.993 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=160.854µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/09/09 23:17:29.994 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:29.994 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/09/09 23:17:29.995 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=2.604308ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:29.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.000 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=7] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:29.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.002 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/09/09 23:17:30.002 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.002 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/09/09 23:17:30.003 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.003 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.003 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.003 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/09/09 23:17:30.007 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=9] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.003 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.010 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=160.79µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.010 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.010 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/09/09 23:17:30.011 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=2.192262ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.003 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.014 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=9] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.003 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.016 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/09/09 23:17:30.016 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.016 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/09/09 23:17:30.018 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.017 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.018 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.017 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/09/09 23:17:30.021 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.017 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.025 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=412.117µs] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.026 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.026 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/09/09 23:17:30.027 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=2.483185ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.017 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.031 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=11] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.017 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.033 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/09/09 23:17:30.033 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.034 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/09/09 23:17:30.036 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.036 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/09/09 23:17:30.040 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=13] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.042 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=232.72µs] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.042 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.043 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/09/09 23:17:30.044 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=2.03746ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.046 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=13] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.035 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.049 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/09/09 23:17:30.049 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.049 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/09/09 23:17:30.050 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.05 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.050 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.05 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/09/09 23:17:30.054 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=15] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.05 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.056 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=218.607µs] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.057 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.057 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/09/09 23:17:30.058 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=2.021526ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.05 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.061 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=15] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.05 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.063 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/09/09 23:17:30.063 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.063 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/09/09 23:17:30.066 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.065 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.066 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.065 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/09/09 23:17:30.069 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=17] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.065 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.072 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=150.582µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.072 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.072 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/09/09 23:17:30.074 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=3.013913ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.065 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.077 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=17] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.065 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.079 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/09/09 23:17:30.079 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.079 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/09/09 23:17:30.080 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.080 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/09/09 23:17:30.085 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=19] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.087 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=164.843µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.088 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.088 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/09/09 23:17:30.089 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=2.085032ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.091 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=19] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.079 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.093 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/09/09 23:17:30.093 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.094 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/09/09 23:17:30.095 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.095 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/09/09 23:17:30.099 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=21] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.101 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=177.611µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.102 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.102 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/09/09 23:17:30.103 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=2.162811ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.107 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=21] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.109 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/09/09 23:17:30.109 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.109 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/09/09 23:17:30.110 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.110 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/09/09 23:17:30.114 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=23] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.116 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=180.07µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.117 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.117 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/09/09 23:17:30.119 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=2.687829ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.122 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=23] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.124 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/09/09 23:17:30.124 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.124 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:30.124 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/09/09 23:17:30.128 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.127 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.128 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.127 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:30.132 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=25] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.127 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.135 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=292.14µs] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.135 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.135 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/09/09 23:17:30.136 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=2.090251ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.127 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.139 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=25] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.127 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.141 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/09/09 23:17:30.141 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.141 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/09/09 23:17:30.145 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.145 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/09/09 23:17:30.148 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=27] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.151 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=228.989µs] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.152 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.152 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/09/09 23:17:30.153 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=2.331971ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.156 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=27] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.144 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.158 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/09/09 23:17:30.158 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.159 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/09/09 23:17:30.160 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.160 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/09/09 23:17:30.164 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=29] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.165 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=201.172µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.166 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.166 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/09/09 23:17:30.168 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=3.046284ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.170 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=29] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.172 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/09/09 23:17:30.172 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.172 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/09/09 23:17:30.175 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.174 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.175 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.174 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/09/09 23:17:30.178 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.174 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.180 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=192.509µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.181 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.181 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/09/09 23:17:30.183 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=3.049619ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.174 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.185 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=31] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.174 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.187 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/09/09 23:17:30.187 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.187 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:30.189 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.188 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.189 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.188 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:30.194 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=33] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.188 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.198 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=203.62µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.199 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.199 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/09/09 23:17:30.200 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=2.062972ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.188 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.202 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=33] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.188 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.204 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/09/09 23:17:30.204 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.204 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/09/09 23:17:30.207 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.207 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/09/09 23:17:30.210 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=35] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.212 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=216.53µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.213 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.213 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/09/09 23:17:30.214 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=2.051824ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.217 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=35] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.206 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.219 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/09/09 23:17:30.219 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.219 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/09/09 23:17:30.221 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.22 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.221 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.22 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/09/09 23:17:30.225 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=37] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.22 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.227 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=284.542µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.228 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.228 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/09/09 23:17:30.229 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=2.368871ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.22 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.232 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=37] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.22 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.234 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/09/09 23:17:30.234 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.234 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:30.236 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.235 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.236 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.235 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:30.240 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=39] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.235 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.243 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=290.985µs] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.244 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.244 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/09/09 23:17:30.245 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=2.206378ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.235 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.252 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=39] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.235 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.256 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/09/09 23:17:30.256 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.257 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:30.258 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.258 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.258 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.258 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:30.262 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=41] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.258 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.264 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=242.192µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.265 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.265 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/09/09 23:17:30.266 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=2.271746ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.258 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.269 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=41] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.258 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.272 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/09/09 23:17:30.272 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.272 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/09/09 23:17:30.273 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.273 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/09/09 23:17:30.278 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=43] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.281 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=156.383µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.281 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.281 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/09/09 23:17:30.282 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=2.065597ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.285 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=43] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.273 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.287 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/09/09 23:17:30.287 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.288 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/09/09 23:17:30.290 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.290 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/09/09 23:17:30.295 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=45] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.299 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=136.071µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.299 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.299 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/09/09 23:17:30.301 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=3.072339ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.305 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=45] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.289 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.307 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/09/09 23:17:30.307 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.307 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/09/09 23:17:30.312 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.312 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/09/09 23:17:30.317 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=47] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.320 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=280.414µs] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.320 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.320 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/09/09 23:17:30.322 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=2.246019ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.324 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=47] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.327 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/09/09 23:17:30.327 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.327 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/09/09 23:17:30.329 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.328 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.329 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.328 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/09/09 23:17:30.334 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=49] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.328 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.336 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=215.266µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.336 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.336 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/09/09 23:17:30.337 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=2.025526ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.328 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.340 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=49] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.328 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.342 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/09/09 23:17:30.342 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.342 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/09/09 23:17:30.344 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.344 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/09/09 23:17:30.348 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.350 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=198.49µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.350 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.350 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/09/09 23:17:30.352 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=2.34064ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.354 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=51] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.356 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/09/09 23:17:30.356 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.357 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/09/09 23:17:30.358 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.357 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.358 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.357 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/09/09 23:17:30.363 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=53] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.357 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.366 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=190.858µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.366 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.366 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/09/09 23:17:30.367 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=2.161329ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.357 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.370 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=53] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.357 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.372 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/09/09 23:17:30.372 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.372 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/09/09 23:17:30.377 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.377 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/09/09 23:17:30.380 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=55] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.383 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=169.872µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.384 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.384 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/09/09 23:17:30.385 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=2.066791ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.388 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=55] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.376 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.389 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/09/09 23:17:30.389 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.390 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/09/09 23:17:30.391 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.391 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/09/09 23:17:30.396 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=57] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.399 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=199.397µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.400 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.400 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/09/09 23:17:30.401 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=2.076692ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.405 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=57] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.39 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.407 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/09/09 23:17:30.407 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.407 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/09/09 23:17:30.409 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.409 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/09/09 23:17:30.413 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=59] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.416 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=186.506µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.417 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.417 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/09/09 23:17:30.419 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=2.988874ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.422 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=59] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.408 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.424 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/09/09 23:17:30.424 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.424 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/09/09 23:17:30.424 +08:00] [INFO] [ddl_api.go:1088] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/09/09 23:17:30.425 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.426 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/09/09 23:17:30.430 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=61] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.432 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=196.497µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.433 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.433 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/09/09 23:17:30.435 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=2.834258ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.438 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=61] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.425 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.440 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/09/09 23:17:30.440 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.440 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/09/09 23:17:30.442 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.442 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/09/09 23:17:30.447 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=63] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.451 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=336.456µs] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.451 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.451 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/09/09 23:17:30.453 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=2.395225ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.458 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=63] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.460 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/09/09 23:17:30.460 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.461 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/09/09 23:17:30.463 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.463 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/09/09 23:17:30.467 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=65] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.470 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=245.16µs] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.471 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.471 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/09/09 23:17:30.473 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=2.689036ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.475 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=65] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.462 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.477 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/09/09 23:17:30.477 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.478 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/09/09 23:17:30.480 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.479 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.480 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.479 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/09/09 23:17:30.485 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=67] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.479 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.489 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=312.87µs] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.490 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.490 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/09/09 23:17:30.492 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=3.004869ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.479 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.495 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=67] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.479 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.498 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/09/09 23:17:30.498 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.498 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/09/09 23:17:30.500 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.500 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/09/09 23:17:30.504 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=69] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.505 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=140.329µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.506 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.506 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/09/09 23:17:30.507 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=2.196288ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.512 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=69] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.499 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.514 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/09/09 23:17:30.514 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.516 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:30.515 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.516 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:30.515 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/09/09 23:17:30.520 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.515 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.523 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=224.311µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/09/09 23:17:30.523 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.523 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/09/09 23:17:30.525 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=2.063016ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-09-09 23:17:30.515 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.527 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=71] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.515 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.530 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/09/09 23:17:30.530 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.530 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/09/09 23:17:30.534 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.533 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.534 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.533 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/09/09 23:17:30.537 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=73] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.533 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.539 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=237.255µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.540 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.540 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/09/09 23:17:30.541 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=2.120257ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.533 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.544 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=73] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.533 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.546 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/09/09 23:17:30.547 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.547 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/09/09 23:17:30.548 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.547 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.548 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.547 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/09/09 23:17:30.554 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=75] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.547 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.556 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=229.005µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.557 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.557 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/09/09 23:17:30.559 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=2.842564ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.547 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.563 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=75] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.547 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.566 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/09/09 23:17:30.566 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.566 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/09/09 23:17:30.568 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.568 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/09/09 23:17:30.571 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=77] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.573 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=191.981µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.574 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.574 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/09/09 23:17:30.575 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=2.167054ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.578 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=77] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.581 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/09/09 23:17:30.581 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.581 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/09/09 23:17:30.583 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.583 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/09/09 23:17:30.588 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=79] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.592 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=353.357µs] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.593 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.593 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/09/09 23:17:30.594 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=2.242151ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.597 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=79] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.582 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.600 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/09/09 23:17:30.600 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.600 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/09/09 23:17:30.602 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.602 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/09/09 23:17:30.606 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=81] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.610 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=485.682µs] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.611 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.611 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/09/09 23:17:30.611 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=2.262535ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.616 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=81] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.601 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.619 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/09/09 23:17:30.619 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.619 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/09/09 23:17:30.622 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.621 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.622 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.621 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/09/09 23:17:30.626 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=83] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.621 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.630 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=366.891µs] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.631 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.631 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/09/09 23:17:30.632 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=2.04934ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.621 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.635 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=83] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.621 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.638 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/09/09 23:17:30.638 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.638 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/09/09 23:17:30.640 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.639 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.640 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.639 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/09/09 23:17:30.644 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=85] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.639 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.647 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=311.263µs] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.647 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.648 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/09/09 23:17:30.649 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=2.46043ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.639 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.651 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=85] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.639 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.654 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/09/09 23:17:30.654 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.654 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/09/09 23:17:30.656 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.655 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.656 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.655 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/09/09 23:17:30.661 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=87] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.655 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.665 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=344.334µs] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.666 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.666 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/09/09 23:17:30.668 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=2.840846ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.655 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.671 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=87] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.655 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.674 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/09/09 23:17:30.674 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.674 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/09/09 23:17:30.676 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.676 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/09/09 23:17:30.681 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=89] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.685 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=511.871µs] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.686 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.686 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/09/09 23:17:30.686 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=2.130792ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.689 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=89] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.675 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.692 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/09/09 23:17:30.692 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.692 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:30.694 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.693 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.694 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.693 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:30.699 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.693 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.701 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=277.042µs] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.702 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.702 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/09/09 23:17:30.703 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=2.150549ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.693 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.707 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=91] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.693 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.709 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/09/09 23:17:30.709 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.709 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:30.711 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.71 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.711 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.71 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:30.715 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=93] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.71 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.718 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=256.126µs] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.718 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.718 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/09/09 23:17:30.719 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=2.11435ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.71 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.722 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=93] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.71 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.724 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/09/09 23:17:30.724 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.725 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/09/09 23:17:30.727 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.727 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/09/09 23:17:30.732 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=95] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.735 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=442.497µs] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.736 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.736 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/09/09 23:17:30.737 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=2.470136ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.740 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=95] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.744 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/09/09 23:17:30.744 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.745 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/09/09 23:17:30.750 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.749 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.750 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.749 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/09/09 23:17:30.753 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=97] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.749 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.756 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=251.807µs] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.756 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.756 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/09/09 23:17:30.758 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=2.188204ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.749 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.760 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=97] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.749 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.762 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/09/09 23:17:30.762 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.762 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=48] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(100) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        keyspace_id bigint(8) NOT NULL DEFAULT -1);"] [user=]
[2023/09/09 23:17:30.764 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.763 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.764 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.763 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.dist_framework_meta (\n        host VARCHAR(100) NOT NULL PRIMARY KEY,\n        role VARCHAR(64),\n        keyspace_id bigint(8) NOT NULL DEFAULT -1);"]
[2023/09/09 23:17:30.769 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=99] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.763 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.771 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=184.196µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.772 +08:00] [INFO] [domain.go:841] ["session manager is nil"]
[2023/09/09 23:17:30.772 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=99] [version=49]
[2023/09/09 23:17:30.774 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=2.422824ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.763 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.777 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 5, tp general"] [category=ddl] [jobID=99] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:98, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.763 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.781 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=99]
[2023/09/09 23:17:30.781 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.802 +08:00] [INFO] [bootstrap.go:705] ["bootstrap successful"] ["take time"=907.105101ms]
[2023/09/09 23:17:30.802 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=fc0d8b61-fd2f-4aa5-8ef6-1a36b907b7d7] [ownerKey=/tidb/ddl/fg/owner]
[2023/09/09 23:17:30.802 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:30.802 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 6, tp add index"] [category=ddl] ["take time"=1.019µs]
[2023/09/09 23:17:30.802 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:30.802 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 5, tp general"] [category=ddl] ["take time"=802ns]
[2023/09/09 23:17:30.802 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/09/09 23:17:30.802 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/09/09 23:17:30.803 +08:00] [INFO] [ddl.go:881] ["DDL closed"] [category=ddl] [ID=fc0d8b61-fd2f-4aa5-8ef6-1a36b907b7d7] ["take time"=473.836µs]
[2023/09/09 23:17:30.803 +08:00] [INFO] [ddl.go:713] ["stop DDL"] [category=ddl] [ID=fc0d8b61-fd2f-4aa5-8ef6-1a36b907b7d7]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:879] ["loadSchemaInLoop exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:736] ["topologySyncerKeeper exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:686] ["infoSyncerKeeper exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:712] ["globalConfigSyncerKeeper exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:658] ["topNSlowQueryLoop exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:1322] ["closestReplicaReadCheckLoop exited."]
[2023/09/09 23:17:30.803 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:30.803 +08:00] [INFO] [domain.go:1043] ["domain closed"] ["take time"=746.885µs]
[2023/09/09 23:17:30.803 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=78965643-d4dc-4f66-b266-846695142c82] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/09/09 23:17:30.809 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/09/09 23:17:30.809 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/09/09 23:17:30.819 +08:00] [INFO] [domain.go:295] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=49] ["start time"=10.216126ms]
[2023/09/09 23:17:30.819 +08:00] [INFO] [domain.go:610] ["full load and reset schema validator"]
[2023/09/09 23:17:30.819 +08:00] [INFO] [ddl.go:758] ["start DDL"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195] [runWorker=true]
[2023/09/09 23:17:30.819 +08:00] [INFO] [ddl.go:721] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/09/09 23:17:30.820 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:30.820 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:30.820 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:30.820 +08:00] [WARN] [domain.go:1292] ["pd / etcd client not provided, won't begin Advancer."]
[2023/09/09 23:17:30.820 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/09/09 23:17:30.820 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/09/09 23:17:30.820 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/09/09 23:17:30.822 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/09/09 23:17:30.822 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/09/09 23:17:30.822 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/09/09 23:17:30.830 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/09/09 23:17:30.832 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/09/09 23:17:30.833 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/09/09 23:17:30.833 +08:00] [INFO] [domain.go:2086] ["dumpFileGcChecker started"]
[2023/09/09 23:17:30.833 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/09/09 23:17:30.833 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/09/09 23:17:30.834 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/09/09 23:17:30.834 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/09/09 23:17:30.834 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/09/09 23:17:30.834 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/09/09 23:17:30.834 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=7] [schemaVersion=49] [cur_db=] [sql="create database check_constraint"] [user=]
[2023/09/09 23:17:30.835 +08:00] [INFO] [domain.go:1478] ["dist task scheduler started"]
[2023/09/09 23:17:30.837 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:30.836 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.837 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:30.836 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create database check_constraint"]
[2023/09/09 23:17:30.840 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=101] [conn=7] [category=ddl] [job="ID:101, Type:create schema, State:queueing, SchemaState:none, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.836 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.842 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=49] [neededSchemaVersion=50] ["start time"=53.425µs] [gotSchemaVersion=50] [phyTblIDs="[]"] [actionTypes="[]"]
[2023/09/09 23:17:30.843 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=101] [version=50]
[2023/09/09 23:17:30.844 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=50] ["take time"=2.529532ms] [job="ID:101, Type:create schema, State:done, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:1, start time: 2023-09-09 23:17:30.836 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.847 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=101] [conn=7] [job="ID:101, Type:create schema, State:synced, SchemaState:public, SchemaID:100, TableID:0, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.836 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.849 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=101]
[2023/09/09 23:17:30.849 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.851 +08:00] [INFO] [set.go:164] ["set global var"] [conn=7] [name=tidb_enable_check_constraint] [val=1]
[2023/09/09 23:17:30.852 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=7] [schemaVersion=50] [cur_db=check_constraint] [sql="create table nt (a int, b int)"] [user=]
[2023/09/09 23:17:30.853 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.853 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table nt (a int, b int)"]
[2023/09/09 23:17:30.858 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=103] [conn=7] [category=ddl] [job="ID:103, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.860 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=50] [neededSchemaVersion=51] ["start time"=139.903µs] [gotSchemaVersion=51] [phyTblIDs="[102]"] [actionTypes="[3]"]
[2023/09/09 23:17:30.860 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=103] [version=51]
[2023/09/09 23:17:30.861 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=51] ["take time"=2.050417ms] [job="ID:103, Type:create table, State:done, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.865 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=103] [conn=7] [job="ID:103, Type:create table, State:synced, SchemaState:public, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.853 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.867 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=103]
[2023/09/09 23:17:30.867 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.867 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=7] [schemaVersion=51] [cur_db=check_constraint] [sql="create table pt (a int check (a < 75) ENFORCED, b int check (b < 75) ENFORCED) partition by range (a) (partition p0 values less than (50), partition p1 values less than (100) )"] [user=]
[2023/09/09 23:17:30.869 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.870 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table pt (a int check (a < 75) ENFORCED, b int check (b < 75) ENFORCED) partition by range (a) (partition p0 values less than (50), partition p1 values less than (100) )"]
[2023/09/09 23:17:30.874 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=107] [conn=7] [category=ddl] [job="ID:107, Type:create table, State:queueing, SchemaState:none, SchemaID:100, TableID:104, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.876 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=51] [neededSchemaVersion=52] ["start time"=560.47µs] [gotSchemaVersion=52] [phyTblIDs="[104,105,106]"] [actionTypes="[3,3,3]"]
[2023/09/09 23:17:30.877 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=107] [version=52]
[2023/09/09 23:17:30.879 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=52] ["take time"=2.856044ms] [job="ID:107, Type:create table, State:done, SchemaState:public, SchemaID:100, TableID:104, RowCount:0, ArgLen:2, start time: 2023-09-09 23:17:30.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.881 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=107] [conn=7] [job="ID:107, Type:create table, State:synced, SchemaState:public, SchemaID:100, TableID:104, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.883 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=107]
[2023/09/09 23:17:30.883 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.887 +08:00] [INFO] [session.go:3917] ["CRUCIAL OPERATION"] [conn=9] [schemaVersion=52] [cur_db=check_constraint] [sql="alter table pt exchange partition p1 with table nt"] [user=]
[2023/09/09 23:17:30.888 +08:00] [INFO] [ddl_worker.go:250] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/09/09 23:17:30.888 +08:00] [INFO] [ddl.go:1076] ["start DDL job"] [category=ddl] [job="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="alter table pt exchange partition p1 with table nt"]
[2023/09/09 23:17:30.893 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=108] [conn=9] [category=ddl] [job="ID:108, Type:exchange partition, State:queueing, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.895 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=52] [neededSchemaVersion=53] ["start time"=156.28µs] [gotSchemaVersion=53] [phyTblIDs="[102]"] [actionTypes="[42]"]
[2023/09/09 23:17:30.945 +08:00] [INFO] [partition_test.go:976] ["Got state"] [State="write only"]
[2023/09/09 23:17:30.945 +08:00] [WARN] [2pc.go:1783] ["schemaLeaseChecker is not set for this transaction"] [sessionID=7] [startTS=444143409809326081] [checkTS=444143409809326082]
[2023/09/09 23:17:30.946 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:30.946 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_1' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 7,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:30.946 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:30.946 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_2' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 7,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:30.947 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:30.947 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_1' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 7,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:30.948 +08:00] [INFO] [tidb.go:285] ["rollbackTxn called due to ddl/autocommit failure"]
[2023/09/09 23:17:30.948 +08:00] [WARN] [session.go:2282] ["run statement failed"] [schemaVersion=53] [error="[table:3819]Check constraint 'pt_chk_2' is violated."] [session="{\n  \"currDBName\": \"check_constraint\",\n  \"id\": 7,\n  \"status\": 2,\n  \"strictMode\": true,\n  \"user\": null\n}"]
[2023/09/09 23:17:30.948 +08:00] [WARN] [2pc.go:1783] ["schemaLeaseChecker is not set for this transaction"] [sessionID=7] [startTS=444143409810112513] [checkTS=444143409810112514]
[2023/09/09 23:17:30.954 +08:00] [INFO] [set.go:164] ["set global var"] [conn=7] [name=tidb_enable_check_constraint] [val=0]
[2023/09/09 23:17:30.959 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=108] [version=53]
[2023/09/09 23:17:30.961 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=53] ["take time"=66.229459ms] [job="ID:108, Type:exchange partition, State:running, SchemaState:write only, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.965 +08:00] [INFO] [ddl_worker.go:995] ["run DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=108] [conn=9] [category=ddl] [job="ID:108, Type:exchange partition, State:running, SchemaState:write only, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.969 +08:00] [INFO] [domain.go:262] ["diff load InfoSchema success"] [currentSchemaVersion=53] [neededSchemaVersion=54] ["start time"=1.165528ms] [gotSchemaVersion=54] [phyTblIDs="[104,105,102,102,106]"] [actionTypes="[42,42,42,42,42]"]
[2023/09/09 23:17:30.970 +08:00] [INFO] [domain.go:860] ["mdl gets lock, update to owner"] [jobID=108] [version=54]
[2023/09/09 23:17:30.972 +08:00] [INFO] [ddl_worker.go:1226] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=54] ["take time"=4.874955ms] [job="ID:108, Type:exchange partition, State:done, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:5, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.976 +08:00] [INFO] [ddl_worker.go:615] ["finish DDL job"] [worker="worker 7, tp general"] [category=ddl] [jobID=108] [conn=9] [job="ID:108, Type:exchange partition, State:synced, SchemaState:none, SchemaID:100, TableID:102, RowCount:0, ArgLen:0, start time: 2023-09-09 23:17:30.888 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/09/09 23:17:30.978 +08:00] [INFO] [ddl.go:1178] ["DDL job is finished"] [category=ddl] [jobID=108]
[2023/09/09 23:17:30.978 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/09/09 23:17:30.981 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195] [ownerKey=/tidb/ddl/fg/owner]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 8, tp add index"] [category=ddl] ["take time"=1.308µs]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl_worker.go:181] ["DDL worker closed"] [worker="worker 7, tp general"] [category=ddl] ["take time"=535ns]
[2023/09/09 23:17:30.981 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/09/09 23:17:30.981 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl.go:881] ["DDL closed"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195] ["take time"=2.78136ms]
[2023/09/09 23:17:30.981 +08:00] [INFO] [ddl.go:713] ["stop DDL"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195]
[2023/09/09 23:17:30.981 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/09/09 23:17:30.981 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/09/09 23:17:30.981 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/09/09 23:17:30.981 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:879] ["loadSchemaInLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1690] ["LoadSysVarCacheLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1640] ["loadPrivilegeInLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195] [ownerKey=/tidb/bindinfo/owner]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1480] ["stopping dist task scheduler"]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1826] ["globalBindHandleWorkerLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [manager.go:185] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:2915] ["ttlJobManager exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:736] ["topologySyncerKeeper exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/09/09 23:17:30.982 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:712] ["globalConfigSyncerKeeper exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=693382d9-0246-4552-ab64-c362db44c195] [ownerKey=/tidb/stats/owner]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/09/09 23:17:30.982 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:2090] ["dumpFileGcChecker exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1869] ["handleEvolvePlanTasksLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [manager.go:165] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:686] ["infoSyncerKeeper exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1482] ["dist task scheduler stopped"]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1322] ["closestReplicaReadCheckLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:658] ["topNSlowQueryLoop exited."]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/09/09 23:17:30.982 +08:00] [INFO] [domain.go:1043] ["domain closed"] ["take time"=4.012556ms]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/09/09 23:17:30.984 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
FAIL
exit status 1
FAIL	github.com/pingcap/tidb/table/tables/test/partition	2.385s
