language: go

go_import_path: github.com/pingcap/tidb


matrix:
  include:
    - go: "1.12"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check"
    - go: "1.11.3"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check"
    - go: "1.12"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check-fail"
  fast_finish: true
  allow_failures:
    - go: "1.12"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check"
    - go: "1.11.3"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check"
    - go: "1.12"
      env: TRAVIS_COVERAGE=0 TEST_SUITE="check-fail"

before_install:  
  # create /logs/unit-test for unit test.
  - sudo mkdir /logs
  - sudo touch /logs/unit-test
  # See https://github.com/golang/go/issues/12933
  - bash gitcookie.sh
script:
  - make $TEST_SUITE
