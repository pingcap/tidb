=== RUN   TestFrameworkRollback
[2023/08/01 18:02:09.474 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/01 18:02:09.476 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:09.476 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:09.479 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:09.479 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:09.480 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:09.483 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=a322d87c-1ff5-4f00-a897-60a62a1e4a85] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:09.492 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:09.492 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:09.505 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkRollback\n\t/Users/zzywq/code/tidb/disttask/framework/framework_rollback_test.go:125\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/01 18:02:09.513 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=7.465084ms]
[2023/08/01 18:02:09.513 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:09.513 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=3c97d25a-8750-420c-aa14-ab789cc63133] [runWorker=true]
[2023/08/01 18:02:09.513 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:09.513 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:09.514 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:09.514 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:09.514 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:09.514 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:09.514 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:09.517 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/01 18:02:09.525 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:09.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/01 18:02:09.525 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:09.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.536 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.547 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=7.250375ms]
[2023/08/01 18:02:09.548 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:09.550 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.550 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/01 18:02:09.552 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=12.236541ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:09.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.558 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.523 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.563 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/01 18:02:09.563 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.563 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/01 18:02:09.566 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/01 18:02:09.579 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.568 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.579 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.568 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/01 18:02:09.589 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.568 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.623 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=4.320208ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.625 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.625 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/01 18:02:09.626 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=8.033083ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.568 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.639 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.568 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.657 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/01 18:02:09.657 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.658 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/01 18:02:09.663 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.663 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/01 18:02:09.670 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.681 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=783.25µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.683 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.683 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/01 18:02:09.684 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.049667ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.690 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.66 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.696 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/01 18:02:09.696 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.696 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/01 18:02:09.701 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.698 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.701 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.698 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/01 18:02:09.710 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.698 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.720 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=626µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.721 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.721 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/01 18:02:09.723 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.075541ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.698 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.737 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.698 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.742 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/01 18:02:09.742 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.743 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/01 18:02:09.752 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.752 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/01 18:02:09.760 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.779 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.328875ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.781 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.781 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/01 18:02:09.783 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.055167ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.793 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.745 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.804 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/01 18:02:09.804 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.805 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/01 18:02:09.810 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.807 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.810 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.807 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/01 18:02:09.818 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.807 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.828 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.102417ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.830 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.830 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/01 18:02:09.831 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.062291ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.807 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.838 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.807 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.845 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/01 18:02:09.845 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.845 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/01 18:02:09.851 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.847 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.851 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.847 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/01 18:02:09.858 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.847 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.868 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.046583ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.869 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.869 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/01 18:02:09.871 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.065125ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.847 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.877 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.847 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.884 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/01 18:02:09.884 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.884 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/01 18:02:09.889 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.886 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.889 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.886 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/01 18:02:09.897 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.886 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.903 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=604.5µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.904 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.904 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/01 18:02:09.906 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.032292ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.886 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.912 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.886 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.917 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/01 18:02:09.917 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.917 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/01 18:02:09.922 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.922 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/01 18:02:09.931 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.937 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=616.291µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.938 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.938 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/01 18:02:09.940 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.088208ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.949 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.953 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/01 18:02:09.953 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.955 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/01 18:02:09.960 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:09.960 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/01 18:02:09.971 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.979 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=904.958µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/01 18:02:09.981 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:09.981 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/01 18:02:09.982 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.018333ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.990 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:09.996 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/01 18:02:09.996 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:09.997 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/01 18:02:10.002 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.999 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.002 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.999 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/01 18:02:10.010 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.999 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.018 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=879.709µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.020 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.020 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/01 18:02:10.021 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.098292ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:09.999 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.035 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:09.999 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.041 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/01 18:02:10.041 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.042 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:10.042 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/01 18:02:10.048 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.048 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:10.059 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.073 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.490958ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.074 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.074 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/01 18:02:10.075 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=4.112667ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.083 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.044 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.091 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/01 18:02:10.091 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.092 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/01 18:02:10.098 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.098 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/01 18:02:10.106 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.117 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.528458ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.121 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.121 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/01 18:02:10.122 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=6.202958ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.129 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.094 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.136 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/01 18:02:10.136 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.137 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:10.144 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.141 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.144 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.141 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:10.154 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.141 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.162 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=827.542µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.163 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.163 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/01 18:02:10.165 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.093458ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.141 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.181 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.141 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.186 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/01 18:02:10.186 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.187 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:10.192 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.192 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:10.203 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.212 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=790µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.214 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.214 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/01 18:02:10.216 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.179292ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.229 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.189 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.234 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/01 18:02:10.234 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.235 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:10.241 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.237 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.241 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.237 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:10.253 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.237 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.260 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=709.583µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.261 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.261 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/01 18:02:10.263 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=4.090708ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.237 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.269 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.237 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.275 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/01 18:02:10.275 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.276 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/01 18:02:10.282 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.282 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/01 18:02:10.322 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.343 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=860.25µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.345 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.345 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/01 18:02:10.346 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.223125ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.358 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.278 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.364 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/01 18:02:10.365 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.365 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/01 18:02:10.372 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.372 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/01 18:02:10.381 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.390 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=961.959µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.392 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.392 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/01 18:02:10.393 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.072625ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.400 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.409 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/01 18:02:10.409 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.410 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:10.418 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.418 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:10.427 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.442 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.612208ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.443 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.444 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/01 18:02:10.444 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=4.234833ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.455 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.465 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/01 18:02:10.465 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.470 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:10.477 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.477 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:10.495 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.505 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=938.708µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.507 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.507 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/01 18:02:10.508 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.193208ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.515 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.473 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.515 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:10.515 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:10.521 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/01 18:02:10.521 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.522 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/01 18:02:10.526 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.524 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.526 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.524 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/01 18:02:10.535 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.524 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.541 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=557.25µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.543 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.543 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/01 18:02:10.545 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.056542ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.524 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.551 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.524 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.557 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/01 18:02:10.557 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.557 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/01 18:02:10.562 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.559 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.562 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.559 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/01 18:02:10.571 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.559 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.576 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=407.5µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.578 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.578 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/01 18:02:10.580 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.175167ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.559 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.585 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.559 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.590 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/01 18:02:10.590 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.590 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/01 18:02:10.597 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.597 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/01 18:02:10.606 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.618 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.226917ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.619 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.619 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/01 18:02:10.620 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.018167ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.628 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.592 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.634 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/01 18:02:10.634 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.635 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/01 18:02:10.640 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.640 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/01 18:02:10.648 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.658 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=840.875µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.660 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.660 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/01 18:02:10.661 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.120375ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.668 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.637 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.674 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/01 18:02:10.674 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.684 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:10.689 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.686 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:10.689 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.686 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.698 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.686 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.706 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=754.542µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.708 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.708 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/01 18:02:10.709 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.121375ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.686 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.716 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.686 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.721 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/01 18:02:10.721 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.722 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/01 18:02:10.726 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.726 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/01 18:02:10.735 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.742 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=742.208µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.744 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.744 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/01 18:02:10.745 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.163458ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.752 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.757 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/01 18:02:10.757 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.758 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/01 18:02:10.762 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.76 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/01 18:02:10.762 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.76 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.770 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.76 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.777 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=627.083µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.779 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.779 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/01 18:02:10.780 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.030792ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.76 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.786 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.76 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.791 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/01 18:02:10.791 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.792 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:10.796 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.794 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.796 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.794 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:10.804 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.794 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.811 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=729.083µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.813 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.813 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/01 18:02:10.815 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.083583ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.794 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.825 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.794 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.831 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/01 18:02:10.831 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.831 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/01 18:02:10.841 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.841 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/01 18:02:10.853 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.860 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=671.25µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.862 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.862 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/01 18:02:10.863 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.1575ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.875 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.880 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/01 18:02:10.880 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.881 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:10.881 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/01 18:02:10.887 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.884 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.887 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.884 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:10.895 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.884 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.903 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=921.5µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.905 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.905 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/01 18:02:10.906 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.016958ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.884 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.913 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.884 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.919 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/01 18:02:10.919 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.919 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:10.925 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.921 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.925 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.921 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:10.933 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.921 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.942 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.028292ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.944 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.944 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/01 18:02:10.945 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.072792ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.921 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.951 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.921 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.958 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/01 18:02:10.958 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.959 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:10.964 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.961 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:10.964 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.961 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:10.972 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.961 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.982 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.040875ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/01 18:02:10.983 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:10.983 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/01 18:02:10.984 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.040875ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:10.961 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.991 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:10.961 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:10.997 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/01 18:02:10.998 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:10.998 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/01 18:02:11.005 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.005 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/01 18:02:11.013 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.026 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.457542ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.027 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.027 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/01 18:02:11.028 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=4.246959ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.036 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.043 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/01 18:02:11.043 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.044 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/01 18:02:11.048 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.046 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.048 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.046 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/01 18:02:11.055 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.046 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.060 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=502.083µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.062 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.062 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/01 18:02:11.064 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.246958ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.046 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.077 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.046 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.081 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/01 18:02:11.081 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.088 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:11.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.088 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:11.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/01 18:02:11.096 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.107 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=913.458µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/01 18:02:11.108 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.108 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/01 18:02:11.110 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.204625ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:11.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.117 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.085 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.126 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/01 18:02:11.126 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.127 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/01 18:02:11.136 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.128 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.136 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.128 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/01 18:02:11.145 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.128 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.154 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=1.288625ms] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.156 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.156 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/01 18:02:11.157 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.099834ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.128 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.164 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.128 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.170 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/01 18:02:11.170 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.171 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/01 18:02:11.175 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.175 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/01 18:02:11.184 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.190 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=682.5µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.192 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.192 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/01 18:02:11.194 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.181459ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.200 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.205 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/01 18:02:11.205 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.205 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/01 18:02:11.210 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.207 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/01 18:02:11.210 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.207 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.218 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.207 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.225 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=628.166µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.226 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.226 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/01 18:02:11.228 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.259458ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.207 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.235 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.207 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.240 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/01 18:02:11.240 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.241 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/01 18:02:11.248 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.243 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.248 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.243 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/01 18:02:11.256 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.243 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.271 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=1.717ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.273 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.273 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/01 18:02:11.274 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=4.0435ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.243 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.284 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.243 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.293 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/01 18:02:11.293 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.294 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/01 18:02:11.301 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.301 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/01 18:02:11.309 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.322 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.630917ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.323 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.323 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/01 18:02:11.324 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=4.074583ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.332 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.340 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/01 18:02:11.341 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.341 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/01 18:02:11.349 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.349 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/01 18:02:11.357 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.372 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=1.723959ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.374 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.374 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/01 18:02:11.374 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=4.243792ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.382 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.343 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.392 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/01 18:02:11.392 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.393 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/01 18:02:11.399 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.399 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/01 18:02:11.408 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.420 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.313416ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.422 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.422 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/01 18:02:11.423 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=4.1245ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.431 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.438 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/01 18:02:11.438 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.439 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/01 18:02:11.446 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.446 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/01 18:02:11.454 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.468 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=1.722917ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.470 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.470 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/01 18:02:11.470 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=4.251416ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.479 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.441 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.487 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/01 18:02:11.487 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.488 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/01 18:02:11.495 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.49 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.495 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.49 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/01 18:02:11.503 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.49 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.514 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:11.515 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:11.515 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:11.518 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=1.687709ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.519 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.519 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/01 18:02:11.520 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=4.194625ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.49 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.527 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.49 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.536 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/01 18:02:11.536 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.537 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:11.543 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.539 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.543 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.539 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:11.550 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.539 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.560 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.172709ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.562 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.562 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/01 18:02:11.563 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=4.133791ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.539 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.576 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.539 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.583 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/01 18:02:11.583 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.584 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:11.592 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.588 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.592 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.588 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:11.600 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.588 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.610 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.05175ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.611 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.611 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/01 18:02:11.612 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.030792ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.588 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.623 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.588 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.629 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/01 18:02:11.630 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.631 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/01 18:02:11.638 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.638 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/01 18:02:11.647 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.664 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=1.999666ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.665 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.666 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/01 18:02:11.666 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=4.214625ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.678 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.633 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.688 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/01 18:02:11.688 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.689 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:11.695 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:11.695 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:11.703 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.713 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.179334ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/01 18:02:11.715 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:11.715 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/01 18:02:11.716 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.048833ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:11.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.727 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 1, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:11.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:11.734 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/01 18:02:11.734 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:11.812 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=2.297653709s]
[2023/08/01 18:02:12.514 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=3c97d25a-8750-420c-aa14-ab789cc63133] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:12.514 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:12.514 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 3, tp add index"] [category=ddl] ["take time"=5.334µs]
[2023/08/01 18:02:12.514 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 2, tp add index"] [category=ddl] ["take time"=2.417µs]
[2023/08/01 18:02:12.514 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:12.515 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 1, tp general"] [category=ddl] ["take time"=3.791µs]
[2023/08/01 18:02:12.515 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:12.515 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:12.519 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=3c97d25a-8750-420c-aa14-ab789cc63133] ["take time"=706.460125ms]
[2023/08/01 18:02:12.519 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=3c97d25a-8750-420c-aa14-ab789cc63133]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:12.519 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:12.519 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=706.9095ms]
[2023/08/01 18:02:12.519 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=a322d87c-1ff5-4f00-a897-60a62a1e4a85] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:12.519 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:12.519 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:12.584 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=51.016ms]
[2023/08/01 18:02:12.585 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:12.585 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d] [runWorker=true]
[2023/08/01 18:02:12.585 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:12.585 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:12.585 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:12.585 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:12.585 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:12.585 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:12.585 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:12.593 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:12.593 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:12.593 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:12.598 +08:00] [INFO] [sysvar.go:2459] ["set resource control"] [enable=true]
[2023/08/01 18:02:12.600 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:12.614 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:12.618 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:12.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:12.621 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:12.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:12.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:12.622 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:12.622 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:12.622 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:12.622 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=a322d87c-1ff5-4f00-a897-60a62a1e4a85] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:12.623 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:12.623 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:12.623 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:12.623 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:12.628 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:12.690 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=53.179709ms]
[2023/08/01 18:02:12.690 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:12.690 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5] [runWorker=true]
[2023/08/01 18:02:12.691 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:12.691 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:12.691 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:12.691 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:12.691 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:12.691 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:12.700 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:12.700 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:12.700 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:12.720 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:12.724 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:12.727 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:12.727 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:12.727 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:12.727 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:12.728 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:12.728 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:12.728 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[ab757d43-7af9-4ded-8067-c4af4632842d,5a20e703-f3a3-4c94-b687-1ffb7cfd61d5]"]
[2023/08/01 18:02:12.728 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:12.728 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:12.728 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:12.741 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:12.741 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:13.728 +08:00] [INFO] [dispatcher_manager.go:129] ["dispatch task loop start"]
[2023/08/01 18:02:13.729 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/01 18:02:13.729 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/01 18:02:14.033 +08:00] [INFO] [dispatcher.go:99] ["execute one task"] ["task ID"=1] [state=pending] [concurrency=8]
[2023/08/01 18:02:14.539 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:14.539 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/01 18:02:14.585 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:14.691 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:14.728 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:14.728 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/01 18:02:14.833 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:14.833 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/01 18:02:15.031 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:15.034 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/01 18:02:15.034 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.034 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.034 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.039 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/01 18:02:15.039 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.039 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.039 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:15.134 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=cancelling]
[2023/08/01 18:02:15.343 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=cancelling]
[2023/08/01 18:02:15.534 +08:00] [INFO] [dispatcher.go:193] ["process flow, handle an error"] [task-id=1] ["err msg"="[\"{error=cancel,errorVerbose=\\\"cancel\\\\ngithub.com/pingcap/tidb/disttask/framework/dispatcher.(*dispatcher).monitorTask\\\\n\\\\t/Users/zzywq/code/tidb/disttask/framework/dispatcher/dispatcher.go:118\\\\ngithub.com/pingcap/tidb/disttask/framework/dispatcher.(*dispatcher).scheduleTask\\\\n\\\\t/Users/zzywq/code/tidb/disttask/framework/dispatcher/dispatcher.go:155\\\\ngithub.com/pingcap/tidb/disttask/framework/dispatcher.(*dispatcher).ExecuteTask.func1\\\\n\\\\t/Users/zzywq/code/tidb/disttask/framework/dispatcher/dispatcher.go:101\\\\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\\\\n\\\\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\\\\nruntime.goexit\\\\n\\\\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172\\\"}\"]"]
[2023/08/01 18:02:15.625 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:15.627 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:15.627 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/01 18:02:15.731 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:15.733 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:15.733 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/01 18:02:15.925 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:15.929 +08:00] [INFO] [scheduler.go:285] ["scheduler rollback a step"] [scheduler="id: :4000, task_id: 1"] [step=1]
[2023/08/01 18:02:16.031 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:16.036 +08:00] [INFO] [scheduler.go:285] ["scheduler rollback a step"] [scheduler="id: :4001, task_id: 1"] [step=1]
[2023/08/01 18:02:16.225 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:16.332 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:16.525 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:16.537 +08:00] [INFO] [dispatcher.go:199] ["process flow, update the task to reverted"] [task-id=1]
[2023/08/01 18:02:16.539 +08:00] [INFO] [dispatcher.go:174] ["schedule task, task is finished"] [task-id=1] [state=reverted]
[2023/08/01 18:02:16.648 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=reverted]
[2023/08/01 18:02:16.841 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=reverted]
[2023/08/01 18:02:17.586 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 6, tp add index"] [category=ddl] ["take time"=4.708µs]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 5, tp add index"] [category=ddl] ["take time"=3.125µs]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 4, tp general"] [category=ddl] ["take time"=3µs]
[2023/08/01 18:02:17.586 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:17.586 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d] ["take time"=852.275791ms]
[2023/08/01 18:02:17.586 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d]
[2023/08/01 18:02:17.587 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:17.587 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:17.587 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.587 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:17.588 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:17.588 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:17.588 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.588 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:17.588 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:17.590 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:17.593 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:17.593 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:17.593 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:17.622 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=ab757d43-7af9-4ded-8067-c4af4632842d] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:17.622 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:17.622 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=887.764417ms]
[2023/08/01 18:02:17.728 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5]
[2023/08/01 18:02:17.728 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/01 18:02:17.728 +08:00] [INFO] [dispatcher_manager.go:135] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/01 18:02:17.729 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5]
[2023/08/01 18:02:17.729 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:17.729 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:17.729 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 8, tp add index"] [category=ddl] ["take time"=5.667µs]
[2023/08/01 18:02:17.729 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 9, tp add index"] [category=ddl] ["take time"=3.042µs]
[2023/08/01 18:02:17.729 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:17.729 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 7, tp general"] [category=ddl] ["take time"=2.958µs]
[2023/08/01 18:02:17.729 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:17.729 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:17.730 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5] ["take time"=995.5925ms]
[2023/08/01 18:02:17.730 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5]
[2023/08/01 18:02:17.730 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:17.730 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:17.730 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.730 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:17.731 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:17.731 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:17.731 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:17.731 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:18.700 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:18.700 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:18.700 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:18.727 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=5a20e703-f3a3-4c94-b687-1ffb7cfd61d5] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:18.727 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:18.728 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.993535875s]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/01 18:02:18.750 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkRollback (9.43s)
=== RUN   TestFrameworkWithQuery
[2023/08/01 18:02:18.884 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/01 18:02:18.884 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:18.884 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:18.885 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:18.885 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:18.886 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:18.889 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=5dcdbfe4-03b5-4217-b348-92e4ebfdfe65] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:18.890 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:18.890 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:18.907 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkWithQuery\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:257\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/01 18:02:18.915 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=7.497833ms]
[2023/08/01 18:02:18.915 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:18.915 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=59b59d02-209f-4bb2-8e1f-0a1f43d18897] [runWorker=true]
[2023/08/01 18:02:18.915 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:18.915 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:18.915 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:18.915 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:18.915 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:18.915 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:18.916 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:18.916 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:18.916 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:18.916 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:18.917 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/01 18:02:18.920 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:18.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:18.920 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:18.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/01 18:02:18.928 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:18.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:18.938 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=7.469542ms]
[2023/08/01 18:02:18.939 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:18.941 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:18.941 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/01 18:02:18.943 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=12.093084ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:18.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:18.948 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:18.919 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:18.952 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/01 18:02:18.952 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:18.953 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/01 18:02:18.955 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/01 18:02:18.968 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:18.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:18.968 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:18.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/01 18:02:18.982 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:18.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.015 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=4.145583ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.017 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.017 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/01 18:02:19.019 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=8.117917ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:18.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.032 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:18.957 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.051 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/01 18:02:19.051 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.052 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/01 18:02:19.056 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.056 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/01 18:02:19.064 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.072 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=735.667µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.073 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.073 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/01 18:02:19.075 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.107917ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.081 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.054 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.087 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/01 18:02:19.087 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.088 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/01 18:02:19.092 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.09 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.092 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.09 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/01 18:02:19.100 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.09 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.106 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=632.917µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.108 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.108 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/01 18:02:19.110 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.04075ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.09 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.116 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.09 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.121 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/01 18:02:19.121 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.122 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/01 18:02:19.131 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.131 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/01 18:02:19.139 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.159 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.314083ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.161 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.161 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/01 18:02:19.163 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.085417ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.171 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.183 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/01 18:02:19.183 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.184 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/01 18:02:19.189 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.186 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.190 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.186 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/01 18:02:19.198 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.186 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.209 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.110041ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.210 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.210 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/01 18:02:19.211 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.011334ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.186 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.219 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.186 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.226 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/01 18:02:19.226 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.227 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/01 18:02:19.232 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.232 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/01 18:02:19.240 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.250 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.03425ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.251 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.251 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/01 18:02:19.252 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.032ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.259 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.229 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.266 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/01 18:02:19.266 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.266 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/01 18:02:19.271 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.268 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.271 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.268 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/01 18:02:19.278 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.268 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.284 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=575.291µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.286 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.286 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/01 18:02:19.287 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.016625ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.268 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.294 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.268 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.299 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/01 18:02:19.299 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.299 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/01 18:02:19.305 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.305 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/01 18:02:19.313 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.319 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=613.792µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.321 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.321 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/01 18:02:19.323 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.06575ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.328 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.302 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.334 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/01 18:02:19.334 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.335 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/01 18:02:19.340 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.340 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/01 18:02:19.348 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.357 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=888.583µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.359 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.359 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/01 18:02:19.360 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.081ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.366 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.337 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.373 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/01 18:02:19.373 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.374 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/01 18:02:19.378 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.375 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.378 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.375 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/01 18:02:19.386 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.375 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.394 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=836.042µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.396 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.396 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/01 18:02:19.397 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.012917ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.375 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.404 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.375 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.410 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/01 18:02:19.410 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.411 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:19.411 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/01 18:02:19.417 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.417 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:19.424 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.437 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.588ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.439 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.439 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/01 18:02:19.439 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=4.021667ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.447 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.412 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.455 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/01 18:02:19.455 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.456 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/01 18:02:19.462 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.462 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/01 18:02:19.470 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.480 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.230708ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.482 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.482 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/01 18:02:19.483 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.128625ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.490 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.458 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.497 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/01 18:02:19.497 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.498 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:19.503 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.5 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.503 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.5 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:19.510 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.5 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.519 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=840.875µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.520 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.520 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/01 18:02:19.522 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.036791ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.5 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.528 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.5 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.534 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/01 18:02:19.534 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.534 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:19.540 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.540 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:19.548 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.556 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=877µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.558 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.558 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/01 18:02:19.559 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.018667ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.566 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.536 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.573 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/01 18:02:19.573 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.574 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:19.579 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.576 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.579 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.576 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:19.588 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.576 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.596 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=728.292µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.598 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.598 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/01 18:02:19.600 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=4.028667ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.576 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.606 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.576 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.612 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/01 18:02:19.612 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.613 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/01 18:02:19.619 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.615 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.619 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.615 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/01 18:02:19.627 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.615 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.636 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=862.042µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.638 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.638 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/01 18:02:19.639 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.098125ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.615 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.648 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.615 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.654 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/01 18:02:19.654 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.655 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/01 18:02:19.660 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.657 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.660 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.657 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/01 18:02:19.669 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.657 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.678 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=910.959µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.680 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.680 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/01 18:02:19.681 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.112583ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.657 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.689 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.657 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.695 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/01 18:02:19.695 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.696 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:19.704 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.704 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:19.715 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.731 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.4965ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.733 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.733 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/01 18:02:19.733 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=4.109417ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.741 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.749 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/01 18:02:19.749 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.753 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:19.758 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.758 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:19.767 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.775 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=814.375µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.777 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.777 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/01 18:02:19.778 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.094ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.785 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.755 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.791 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/01 18:02:19.791 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.791 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/01 18:02:19.796 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.793 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.796 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.793 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/01 18:02:19.804 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.793 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.811 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=550.917µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.813 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.813 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/01 18:02:19.814 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.068708ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.793 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.827 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.793 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.832 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/01 18:02:19.832 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.833 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/01 18:02:19.837 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.835 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.837 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.835 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/01 18:02:19.846 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.835 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.852 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=429.042µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.854 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.854 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/01 18:02:19.855 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.062541ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.835 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.861 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.835 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.866 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/01 18:02:19.866 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.867 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/01 18:02:19.872 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.873 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/01 18:02:19.880 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.891 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.1725ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.893 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.893 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/01 18:02:19.894 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.07775ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.901 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.869 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.908 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/01 18:02:19.908 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.909 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/01 18:02:19.914 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.911 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.914 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.911 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/01 18:02:19.916 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:19.916 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:19.922 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.911 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.931 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=801.75µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.933 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.933 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/01 18:02:19.934 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.054167ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.911 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.941 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.911 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.947 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/01 18:02:19.947 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.947 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:19.952 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.949 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.952 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.949 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:19.960 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.949 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.968 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=751.333µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/01 18:02:19.969 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:19.969 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/01 18:02:19.971 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.101209ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.949 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.978 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.949 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:19.984 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/01 18:02:19.984 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:19.985 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/01 18:02:19.990 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:19.990 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/01 18:02:19.998 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.005 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=784.208µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.007 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.007 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/01 18:02:20.008 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.027083ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:19.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.015 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:19.987 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.020 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/01 18:02:20.021 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.021 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/01 18:02:20.026 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.026 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/01 18:02:20.035 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.042 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=663.791µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.043 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.043 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/01 18:02:20.045 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.022917ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.051 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.056 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/01 18:02:20.056 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.057 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:20.061 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.059 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.061 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.059 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:20.070 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.059 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.077 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=766.125µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.079 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.079 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/01 18:02:20.080 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.03375ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.059 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.087 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.059 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.093 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/01 18:02:20.093 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.094 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/01 18:02:20.099 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.099 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/01 18:02:20.109 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.117 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=633.708µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.118 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.118 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/01 18:02:20.120 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.069458ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.126 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.131 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/01 18:02:20.131 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.132 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:20.132 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/01 18:02:20.137 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.137 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:20.145 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.154 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=953.042µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.156 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.156 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/01 18:02:20.157 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.095333ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.163 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.134 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.169 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/01 18:02:20.169 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.170 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:20.176 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.176 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:20.184 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.194 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.000375ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.195 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.196 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/01 18:02:20.196 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.0525ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.204 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.172 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.210 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/01 18:02:20.211 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.211 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:20.217 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.213 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.217 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.213 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:20.225 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.213 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.235 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.065041ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.237 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.238 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/01 18:02:20.238 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.021ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.213 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.246 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.213 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.253 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/01 18:02:20.253 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.254 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/01 18:02:20.261 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.261 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/01 18:02:20.270 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.284 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.453167ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.286 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.286 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/01 18:02:20.286 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=4.095916ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.294 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.256 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.303 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/01 18:02:20.303 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.303 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/01 18:02:20.307 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.305 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.307 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.305 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/01 18:02:20.316 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.305 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.321 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=501.416µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.323 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.323 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/01 18:02:20.325 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.076833ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.305 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.331 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.305 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.336 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/01 18:02:20.337 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.344 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:20.34 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.344 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:20.34 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/01 18:02:20.353 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.34 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.363 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=923.166µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/01 18:02:20.365 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.365 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/01 18:02:20.366 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.07475ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:20.34 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.378 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.34 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.385 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/01 18:02:20.385 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.386 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/01 18:02:20.391 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.388 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.391 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.388 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/01 18:02:20.400 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.388 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.410 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=978.875µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.412 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.412 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/01 18:02:20.413 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.056291ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.388 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.420 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.388 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.426 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/01 18:02:20.426 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.427 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/01 18:02:20.432 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.432 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/01 18:02:20.445 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.453 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=697.166µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.455 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.455 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/01 18:02:20.456 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.028958ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.464 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.429 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.470 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/01 18:02:20.470 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.472 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/01 18:02:20.478 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.474 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.478 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.474 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/01 18:02:20.487 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.474 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.494 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=656.875µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.496 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.496 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/01 18:02:20.497 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.129584ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.474 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.503 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.474 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.509 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/01 18:02:20.509 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.510 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/01 18:02:20.518 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.512 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/01 18:02:20.518 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.512 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.532 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.512 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.548 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=1.854875ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.550 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.550 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/01 18:02:20.551 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=6.012791ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.512 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.560 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.512 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.570 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/01 18:02:20.570 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.571 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/01 18:02:20.579 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.579 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/01 18:02:20.588 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.602 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.630708ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.604 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.604 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/01 18:02:20.606 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.01675ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.615 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.574 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.624 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/01 18:02:20.624 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.625 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/01 18:02:20.633 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.627 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.633 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.627 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/01 18:02:20.642 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.627 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.657 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=1.761ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.659 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.659 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/01 18:02:20.660 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=4.012292ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.627 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.669 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.627 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.679 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/01 18:02:20.679 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.680 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/01 18:02:20.687 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.682 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.687 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.682 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/01 18:02:20.696 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.682 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.709 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.398959ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.711 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.711 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/01 18:02:20.711 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=4.073166ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.682 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.720 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.682 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.728 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/01 18:02:20.728 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.729 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/01 18:02:20.736 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.731 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.736 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.731 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/01 18:02:20.746 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.731 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.760 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=1.627542ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.762 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.762 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/01 18:02:20.762 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=4.029541ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.731 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.770 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.731 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.780 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/01 18:02:20.780 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.782 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/01 18:02:20.789 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.784 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.789 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.784 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/01 18:02:20.798 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.784 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.813 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=1.735584ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.815 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.815 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/01 18:02:20.816 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=4.016666ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.784 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.830 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.784 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.840 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/01 18:02:20.840 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.843 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:20.849 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.849 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:20.859 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.870 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.230708ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.872 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.872 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/01 18:02:20.873 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=4.103958ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.881 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.845 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.889 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/01 18:02:20.889 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.890 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:20.896 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.892 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.896 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.892 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:20.905 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.892 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.915 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:20.915 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.035708ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.917 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.917 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/01 18:02:20.917 +08:00] [ERROR] [runaway.go:153] ["try to get done runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch_done' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch_done' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchDoneRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:515\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchDoneRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:472\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchDoneRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:448\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:151\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:153\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:20.918 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch_done' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch_done' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchDoneRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:515\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchDoneRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:472\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchDoneRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:448\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:151\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:20.918 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.019417ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.892 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.930 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.892 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.936 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/01 18:02:20.936 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:20.937 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/01 18:02:20.948 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.941 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:20.948 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.941 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/01 18:02:20.958 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.941 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.983 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.119375ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/01 18:02:20.986 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:20.986 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/01 18:02:20.987 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=6.121667ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:20.941 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:20.996 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:20.941 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:21.007 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/01 18:02:21.007 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:21.008 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:21.015 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:21.011 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:21.015 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:21.011 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:21.024 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:21.011 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:21.036 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.205125ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/01 18:02:21.038 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:21.038 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/01 18:02:21.038 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.013083ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:21.011 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:21.046 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 10, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:21.011 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:21.054 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/01 18:02:21.054 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:21.139 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=2.223038417s]
[2023/08/01 18:02:21.916 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=59b59d02-209f-4bb2-8e1f-0a1f43d18897] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:21.916 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:21.916 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 11, tp add index"] [category=ddl] ["take time"=3.667µs]
[2023/08/01 18:02:21.916 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 12, tp add index"] [category=ddl] ["take time"=2.167µs]
[2023/08/01 18:02:21.916 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:21.916 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 10, tp general"] [category=ddl] ["take time"=1.834µs]
[2023/08/01 18:02:21.916 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:21.916 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:21.921 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=59b59d02-209f-4bb2-8e1f-0a1f43d18897] ["take time"=781.512334ms]
[2023/08/01 18:02:21.921 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=59b59d02-209f-4bb2-8e1f-0a1f43d18897]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:21.921 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:21.921 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=781.843375ms]
[2023/08/01 18:02:21.921 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=5dcdbfe4-03b5-4217-b348-92e4ebfdfe65] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:21.921 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:21.921 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:21.984 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=49.429459ms]
[2023/08/01 18:02:21.985 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:21.985 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18] [runWorker=true]
[2023/08/01 18:02:21.985 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:21.985 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:21.985 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:21.985 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:21.985 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:21.985 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:21.985 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:21.986 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:21.990 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:21.990 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:21.990 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:22.020 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:22.025 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:22.028 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:22.028 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:22.028 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:22.028 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:22.029 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:22.029 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:22.029 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:22.030 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:22.030 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:22.030 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=5dcdbfe4-03b5-4217-b348-92e4ebfdfe65] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:22.030 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:22.030 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:22.033 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:22.094 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=50.067375ms]
[2023/08/01 18:02:22.094 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:22.094 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b] [runWorker=true]
[2023/08/01 18:02:22.095 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:22.095 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:22.095 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:22.095 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:22.095 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:22.095 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:22.099 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:22.100 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:22.100 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:22.117 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:22.122 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:22.125 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:22.125 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:22.125 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:22.125 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:22.126 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:22.126 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:22.126 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[581643a4-64c9-4363-846b-f570ec923a18,a1116de5-61a9-481a-9d43-c7bbe428060b]"]
[2023/08/01 18:02:22.126 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:22.127 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:22.127 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:22.145 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:22.145 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:23.126 +08:00] [INFO] [dispatcher_manager.go:129] ["dispatch task loop start"]
[2023/08/01 18:02:23.127 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/01 18:02:23.127 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/01 18:02:23.429 +08:00] [INFO] [dispatcher.go:99] ["execute one task"] ["task ID"=1] [state=pending] [concurrency=8]
[2023/08/01 18:02:23.933 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:23.933 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/01 18:02:23.985 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:24.095 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:24.134 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:24.134 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/01 18:02:24.231 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:24.231 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/01 18:02:24.437 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:24.443 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/01 18:02:24.443 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.443 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.443 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.450 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/01 18:02:24.450 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.450 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.450 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.533 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4001, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:24.536 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4001, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/01 18:02:24.536 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.536 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.536 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:24.934 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:24.934 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=running] [concurrency=8] [subtasks=1]
[2023/08/01 18:02:25.059 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=2] [concurrency=8]
[2023/08/01 18:02:25.063 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=4]
[2023/08/01 18:02:25.063 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:25.063 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:25.063 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:25.434 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:25.434 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=running] [concurrency=8] [subtasks=0]
[2023/08/01 18:02:25.436 +08:00] [INFO] [dispatcher.go:174] ["schedule task, task is finished"] [task-id=1] [state=succeed]
[2023/08/01 18:02:25.446 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=succeed]
[2023/08/01 18:02:25.670 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=succeed]
[2023/08/01 18:02:26.133 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=48] [cur_db=test] [sql="drop table if exists t"] [user=]
[2023/08/01 18:02:26.134 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=1] [schemaVersion=48] [cur_db=test] [sql="create table t(a int not null, b int not null)"] [user=]
[2023/08/01 18:02:26.139 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:26.136 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:26.139 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:26.136 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="create table t(a int not null, b int not null)"]
[2023/08/01 18:02:26.148 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 16, tp general"] [category=ddl] [job="ID:99, Type:create table, State:queueing, SchemaState:none, SchemaID:2, TableID:98, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:26.136 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:26.154 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=490.625µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/08/01 18:02:26.156 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=99] [version=49]
[2023/08/01 18:02:26.157 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=49] ["take time"=4.144333ms] [job="ID:99, Type:create table, State:done, SchemaState:public, SchemaID:2, TableID:98, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:26.136 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:26.163 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 16, tp general"] [category=ddl] [job="ID:99, Type:create table, State:synced, SchemaState:public, SchemaID:2, TableID:98, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:26.136 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:26.168 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=99]
[2023/08/01 18:02:26.168 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:26.236 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=48] [neededSchemaVersion=49] ["start time"=714.416µs] [gotSchemaVersion=49] [phyTblIDs="[98]"] [actionTypes="[3]"]
[2023/08/01 18:02:26.986 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:26.986 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:26.986 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 15, tp add index"] [category=ddl] ["take time"=9.875µs]
[2023/08/01 18:02:26.986 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 14, tp add index"] [category=ddl] ["take time"=7.583µs]
[2023/08/01 18:02:26.986 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:26.986 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 13, tp general"] [category=ddl] ["take time"=6.459µs]
[2023/08/01 18:02:26.986 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:26.986 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:26.987 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18] ["take time"=816.255334ms]
[2023/08/01 18:02:26.987 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18]
[2023/08/01 18:02:26.987 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:26.987 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:26.987 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:26.987 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:26.988 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:26.988 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:26.989 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:26.990 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:26.990 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:26.990 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:27.029 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=581643a4-64c9-4363-846b-f570ec923a18] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:27.029 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:27.029 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=858.548083ms]
[2023/08/01 18:02:27.126 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=a1116de5-61a9-481a-9d43-c7bbe428060b]
[2023/08/01 18:02:27.126 +08:00] [INFO] [dispatcher_manager.go:135] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/01 18:02:27.126 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=a1116de5-61a9-481a-9d43-c7bbe428060b]
[2023/08/01 18:02:27.127 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/01 18:02:27.127 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:27.127 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:27.127 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 17, tp add index"] [category=ddl] ["take time"=13.041µs]
[2023/08/01 18:02:27.127 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 18, tp add index"] [category=ddl] ["take time"=6.625µs]
[2023/08/01 18:02:27.127 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:27.127 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 16, tp general"] [category=ddl] ["take time"=3.666µs]
[2023/08/01 18:02:27.127 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:27.128 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:27.128 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b] ["take time"=957.775ms]
[2023/08/01 18:02:27.128 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b]
[2023/08/01 18:02:27.128 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:27.128 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:27.128 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:27.128 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:27.129 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:27.129 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:27.130 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:27.130 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:27.130 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:27.129 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:27.129 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:27.130 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:28.100 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:28.100 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:28.100 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:28.125 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=a1116de5-61a9-481a-9d43-c7bbe428060b] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:28.125 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:28.126 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.955352709s]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/01 18:02:28.157 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkWithQuery (9.43s)
=== RUN   TestFrameworkSubTaskFailed
[2023/08/01 18:02:28.324 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/01 18:02:28.325 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:28.325 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:28.326 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:28.326 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:28.327 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:28.330 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=004f470b-5dd5-43ba-bf28-fdfc65f7345a] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:28.330 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:28.330 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:28.343 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestFrameworkSubTaskFailed\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:290\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/01 18:02:28.350 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=7.225667ms]
[2023/08/01 18:02:28.350 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:28.350 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=0a043ec9-2395-4236-aaf2-680b2fb32d41] [runWorker=true]
[2023/08/01 18:02:28.351 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:28.351 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:28.351 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:28.351 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:28.351 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:28.351 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:28.351 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:28.352 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:28.352 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/01 18:02:28.357 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:28.355 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.357 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:28.355 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/01 18:02:28.365 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.355 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.376 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=7.386666ms]
[2023/08/01 18:02:28.376 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:28.378 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.378 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/01 18:02:28.380 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=12.081083ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:28.355 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.386 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.355 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.390 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/01 18:02:28.390 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.391 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/01 18:02:28.393 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/01 18:02:28.407 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.407 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/01 18:02:28.418 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.452 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=4.37775ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.455 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.455 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/01 18:02:28.456 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=8.029792ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.469 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.395 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.488 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/01 18:02:28.488 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.489 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/01 18:02:28.494 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.494 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/01 18:02:28.504 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.511 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=728.958µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.513 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.513 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/01 18:02:28.514 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.031083ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.521 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.491 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.527 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/01 18:02:28.527 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.528 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/01 18:02:28.533 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.533 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/01 18:02:28.541 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.549 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=672.167µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.550 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.550 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/01 18:02:28.552 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.05975ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.563 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.53 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.569 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/01 18:02:28.569 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.570 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/01 18:02:28.579 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.572 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.579 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.572 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/01 18:02:28.592 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.572 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.611 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.336625ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.613 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.613 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/01 18:02:28.615 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.068833ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.572 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.624 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.572 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.636 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/01 18:02:28.636 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.638 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/01 18:02:28.644 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.644 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/01 18:02:28.652 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.664 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.175083ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.665 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.665 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/01 18:02:28.666 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.034334ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.674 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.64 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.680 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/01 18:02:28.680 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.681 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/01 18:02:28.689 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.683 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.689 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.683 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/01 18:02:28.697 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.683 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.707 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.094959ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.709 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.709 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/01 18:02:28.710 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.032833ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.683 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.717 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.683 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.724 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/01 18:02:28.724 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.724 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/01 18:02:28.729 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.729 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/01 18:02:28.736 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.742 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=564.166µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.744 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.744 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/01 18:02:28.745 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.018125ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.752 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.726 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.757 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/01 18:02:28.757 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.758 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/01 18:02:28.762 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.759 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.762 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.759 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/01 18:02:28.773 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.759 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.780 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=649.458µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.782 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.782 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/01 18:02:28.783 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.025ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.759 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.790 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.759 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.795 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/01 18:02:28.795 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.795 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/01 18:02:28.800 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.797 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.800 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.797 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/01 18:02:28.811 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.797 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.820 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=893.709µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.822 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.822 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/01 18:02:28.823 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.01475ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.797 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.831 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.797 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.837 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/01 18:02:28.837 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.838 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/01 18:02:28.843 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.843 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/01 18:02:28.851 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.861 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=1.352375ms] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.864 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.864 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/01 18:02:28.865 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=6.011375ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.872 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.84 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.878 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/01 18:02:28.878 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.879 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:28.879 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/01 18:02:28.886 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.881 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.886 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.881 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:28.896 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.881 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.909 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.490792ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.911 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.911 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/01 18:02:28.911 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=4.0225ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.881 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.922 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.881 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.930 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/01 18:02:28.930 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.931 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/01 18:02:28.937 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.933 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.937 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.933 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/01 18:02:28.949 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.933 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.960 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.206792ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/01 18:02:28.961 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:28.961 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/01 18:02:28.962 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.035458ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.933 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.972 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.933 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:28.979 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/01 18:02:28.979 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:28.980 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:28.985 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.982 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:28.985 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.982 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:28.995 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.982 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.003 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=904.042µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.005 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.005 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/01 18:02:29.006 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.036583ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:28.982 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.015 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:28.982 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.021 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/01 18:02:29.021 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.022 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:29.027 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.027 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:29.039 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.047 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=831.833µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.049 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.049 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/01 18:02:29.050 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.04425ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.062 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.023 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.068 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/01 18:02:29.068 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.069 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:29.073 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.073 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:29.086 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.093 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=719.459µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.095 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.095 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/01 18:02:29.096 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=4.054042ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.102 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.07 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.114 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/01 18:02:29.114 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.115 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/01 18:02:29.120 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.120 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/01 18:02:29.128 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.137 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=863µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.139 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.139 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/01 18:02:29.140 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.056458ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.150 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.117 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.157 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/01 18:02:29.157 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.158 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/01 18:02:29.163 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.163 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/01 18:02:29.171 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.180 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=765.375µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.182 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.182 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/01 18:02:29.183 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.09125ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.193 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.159 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.199 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/01 18:02:29.199 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.200 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:29.210 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.202 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.210 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.202 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:29.228 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.202 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.247 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.428583ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.249 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.249 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/01 18:02:29.250 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=4.022792ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.202 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.258 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.202 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.268 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/01 18:02:29.268 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.273 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:29.279 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.275 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.279 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.275 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:29.287 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.275 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.299 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=830.708µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.301 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.301 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/01 18:02:29.302 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.023208ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.275 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.316 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.275 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.323 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/01 18:02:29.323 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.324 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/01 18:02:29.329 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.326 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.329 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.326 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/01 18:02:29.340 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.326 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.348 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=564.459µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.349 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.349 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/01 18:02:29.351 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.01475ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.326 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.352 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:29.352 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:29.376 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.326 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.381 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/01 18:02:29.381 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.382 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/01 18:02:29.387 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.387 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/01 18:02:29.396 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.402 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=466.833µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.404 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.404 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/01 18:02:29.405 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.019042ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.412 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.416 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/01 18:02:29.416 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.417 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/01 18:02:29.424 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.42 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.424 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.42 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/01 18:02:29.434 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.42 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.445 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.227542ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.447 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.447 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/01 18:02:29.448 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.070125ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.42 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.457 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.42 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.464 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/01 18:02:29.464 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.466 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/01 18:02:29.472 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.469 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.472 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.469 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/01 18:02:29.481 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.469 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.490 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=998.916µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.493 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.493 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/01 18:02:29.493 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.014791ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.469 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.502 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.469 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.511 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/01 18:02:29.511 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.512 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:29.523 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:29.523 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.538 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.547 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=864.041µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.549 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.549 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/01 18:02:29.549 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.033833ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.558 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.564 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/01 18:02:29.564 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.565 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/01 18:02:29.570 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.570 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/01 18:02:29.581 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.588 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=779.75µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.590 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.590 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/01 18:02:29.592 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.025625ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.599 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.567 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.605 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/01 18:02:29.605 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.606 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/01 18:02:29.611 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.608 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.611 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.608 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/01 18:02:29.623 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.608 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.631 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=692.125µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.633 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.633 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/01 18:02:29.634 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.039584ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.608 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.644 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.608 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.650 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/01 18:02:29.650 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.651 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:29.657 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.653 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.657 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.653 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:29.668 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.653 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.676 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=742.958µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.678 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.678 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/01 18:02:29.679 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.027417ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.653 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.687 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.653 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.693 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/01 18:02:29.693 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.693 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/01 18:02:29.703 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.703 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/01 18:02:29.711 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.723 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=732.5µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.725 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.726 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/01 18:02:29.726 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.02625ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.737 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.699 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.743 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/01 18:02:29.743 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.744 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:29.744 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/01 18:02:29.751 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.747 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.751 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.747 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:29.780 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.747 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.789 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=885.041µs] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.791 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.791 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/01 18:02:29.792 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.022375ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.747 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.799 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.747 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.806 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/01 18:02:29.806 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.806 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:29.814 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.808 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.814 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.808 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:29.821 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.808 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.831 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.036375ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.833 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.833 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/01 18:02:29.834 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.03275ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.808 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.840 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.808 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.848 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/01 18:02:29.848 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.849 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:29.854 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.851 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.854 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.851 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:29.861 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.851 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.871 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.085958ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.872 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.873 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/01 18:02:29.873 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.019167ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.851 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.880 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.851 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.887 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/01 18:02:29.887 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.888 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/01 18:02:29.895 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.89 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.895 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.89 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/01 18:02:29.904 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.89 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.920 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.44825ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.922 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.922 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/01 18:02:29.922 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=4.035209ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.89 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.930 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.89 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.939 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/01 18:02:29.940 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.940 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/01 18:02:29.945 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.943 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.945 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.943 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/01 18:02:29.953 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.943 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.962 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=499.625µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/01 18:02:29.964 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:29.964 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/01 18:02:29.965 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=6.043ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:29.943 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.971 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.943 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:29.976 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/01 18:02:29.976 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:29.983 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:29.979 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:29.983 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:29.979 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/01 18:02:29.992 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.979 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.004 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=1.015208ms] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/01 18:02:30.006 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.006 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/01 18:02:30.007 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.021833ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:29.979 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.015 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:29.979 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.025 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/01 18:02:30.025 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.026 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/01 18:02:30.033 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.029 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.033 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.029 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/01 18:02:30.042 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.029 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.052 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=922.916µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.054 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.054 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/01 18:02:30.056 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.981208ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.029 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.084 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.029 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.092 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/01 18:02:30.092 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.092 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/01 18:02:30.100 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.100 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/01 18:02:30.112 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.119 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=688.167µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.121 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.121 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/01 18:02:30.123 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.08675ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.130 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.096 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.136 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/01 18:02:30.136 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.136 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/01 18:02:30.143 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.143 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/01 18:02:30.155 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.162 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=644.833µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.164 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.164 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/01 18:02:30.165 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.028709ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.172 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.14 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.178 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/01 18:02:30.178 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.179 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/01 18:02:30.189 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.181 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.189 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.181 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/01 18:02:30.204 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.181 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.229 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=2.570708ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.231 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.231 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/01 18:02:30.232 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=6.045417ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.181 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.241 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.181 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.251 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/01 18:02:30.251 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.252 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/01 18:02:30.260 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.260 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/01 18:02:30.271 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.286 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.557792ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.288 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.288 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/01 18:02:30.290 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.077791ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.298 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.308 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/01 18:02:30.308 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.309 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/01 18:02:30.317 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.317 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/01 18:02:30.327 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.343 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=1.764ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.345 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.345 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/01 18:02:30.345 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=4.039625ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.351 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:30.351 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:30.352 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:30.354 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.364 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/01 18:02:30.364 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.365 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/01 18:02:30.373 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.373 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/01 18:02:30.382 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.395 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.435709ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.397 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.397 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/01 18:02:30.397 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=4.062541ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.406 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.368 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.417 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/01 18:02:30.417 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.418 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/01 18:02:30.429 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.429 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/01 18:02:30.441 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.457 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=1.657208ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.459 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.459 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/01 18:02:30.461 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=6.113791ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.470 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.422 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.479 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/01 18:02:30.479 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.480 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/01 18:02:30.488 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.483 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.488 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.483 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/01 18:02:30.497 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.483 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.513 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=1.867875ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.515 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.515 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/01 18:02:30.517 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=6.059541ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.483 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.525 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.483 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.535 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/01 18:02:30.535 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.536 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:30.542 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.538 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.542 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.538 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:30.554 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.538 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.566 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.163667ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.568 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.568 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/01 18:02:30.568 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=4.038208ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.538 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.576 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.538 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.583 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/01 18:02:30.583 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.584 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:30.590 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.586 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.590 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.586 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:30.598 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.586 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.608 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.041416ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.610 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.610 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/01 18:02:30.611 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.03775ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.586 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.619 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.586 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.626 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/01 18:02:30.626 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.627 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/01 18:02:30.636 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.629 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.636 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.629 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/01 18:02:30.646 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.629 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.664 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.1925ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.666 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.666 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/01 18:02:30.668 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=6.021583ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.629 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.677 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.629 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.688 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/01 18:02:30.688 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.689 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:30.696 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:30.696 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:30.704 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.715 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.197625ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/01 18:02:30.717 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:30.717 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/01 18:02:30.717 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.031666ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:30.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.725 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 19, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:30.691 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:30.733 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/01 18:02:30.733 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:30.818 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=2.466630167s]
[2023/08/01 18:02:31.351 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=0a043ec9-2395-4236-aaf2-680b2fb32d41] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:31.351 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:31.351 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 21, tp add index"] [category=ddl] ["take time"=13.167µs]
[2023/08/01 18:02:31.351 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 20, tp add index"] [category=ddl] ["take time"=8.083µs]
[2023/08/01 18:02:31.351 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:31.351 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 19, tp general"] [category=ddl] ["take time"=1.875µs]
[2023/08/01 18:02:31.351 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:31.351 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:31.376 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=0a043ec9-2395-4236-aaf2-680b2fb32d41] ["take time"=557.556167ms]
[2023/08/01 18:02:31.376 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=0a043ec9-2395-4236-aaf2-680b2fb32d41]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:31.379 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:31.380 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=561.520334ms]
[2023/08/01 18:02:31.380 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=004f470b-5dd5-43ba-bf28-fdfc65f7345a] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:31.380 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:31.380 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:31.456 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=56.18275ms]
[2023/08/01 18:02:31.457 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:31.457 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e] [runWorker=true]
[2023/08/01 18:02:31.457 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:31.457 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:31.457 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:31.457 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:31.457 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:31.457 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:31.458 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:31.459 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:31.462 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:31.462 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:31.462 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:31.481 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:31.485 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:31.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:31.488 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:31.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:31.488 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:31.489 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:31.489 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:31.489 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[1dd43b7c-7fdb-4344-8472-6c82d1545d8e]"]
[2023/08/01 18:02:31.489 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:31.489 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:31.489 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:32.489 +08:00] [INFO] [dispatcher_manager.go:129] ["dispatch task loop start"]
[2023/08/01 18:02:32.490 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/01 18:02:32.490 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/01 18:02:32.792 +08:00] [INFO] [dispatcher.go:99] ["execute one task"] ["task ID"=1] [state=pending] [concurrency=8]
[2023/08/01 18:02:33.297 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:33.297 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/01 18:02:33.457 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:33.594 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:33.594 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/01 18:02:33.898 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:33.901 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/01 18:02:33.901 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:33.901 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:33.901 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:33.901 +08:00] [ERROR] [scheduler.go:363] [onError] [scheduler="id: :4000, task_id: 1"] [error=MockExecutorRunErr] [errorVerbose="MockExecutorRunErr\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:362\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:363\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145"]
[2023/08/01 18:02:33.902 +08:00] [ERROR] [scheduler.go:369] ["scheduler error"] [scheduler="id: :4000, task_id: 1"] [error=MockExecutorRunErr] [errorVerbose="MockExecutorRunErr\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:362\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:369\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145"]
[2023/08/01 18:02:33.904 +08:00] [ERROR] [manager.go:299] ["failed to handle task"] [dist_task_manager=:4000] [error=MockExecutorRunErr] [errorVerbose="MockExecutorRunErr\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).onError\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:362\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runMinimalTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:257\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*InternalSchedulerImpl).runSubtask.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/scheduler.go:192\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.runTask\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:229\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).RunWithConcurrency.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:166\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/disttask/framework/scheduler.(*Manager).onRunnableTask\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/manager.go:299\ngithub.com/pingcap/tidb/disttask/framework/scheduler.(*Manager).onRunnableTasks.func1\n\t/Users/zzywq/code/tidb/disttask/framework/scheduler/manager.go:204\ngithub.com/pingcap/tidb/resourcemanager/pool/spool.(*Pool).run.func1\n\t/Users/zzywq/code/tidb/resourcemanager/pool/spool/spool.go:145"]
[2023/08/01 18:02:34.208 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:34.212 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/01 18:02:34.212 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.212 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.212 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.217 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/01 18:02:34.217 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.217 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.217 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:34.294 +08:00] [INFO] [dispatcher.go:193] ["process flow, handle an error"] [task-id=1] ["err msg"="[\"{error=\\\"[0]MockExecutorRunErr\\\"}\"]"]
[2023/08/01 18:02:34.492 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:34.524 +08:00] [INFO] [scheduler.go:285] ["scheduler rollback a step"] [scheduler="id: :4000, task_id: 1"] [step=1]
[2023/08/01 18:02:34.792 +08:00] [INFO] [manager.go:221] [onCanceledTasks] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:34.796 +08:00] [INFO] [dispatcher.go:199] ["process flow, update the task to reverted"] [task-id=1]
[2023/08/01 18:02:34.798 +08:00] [INFO] [dispatcher.go:174] ["schedule task, task is finished"] [task-id=1] [state=reverted]
[2023/08/01 18:02:34.832 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=reverted]
[2023/08/01 18:02:36.489 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=1dd43b7c-7fdb-4344-8472-6c82d1545d8e]
[2023/08/01 18:02:36.489 +08:00] [INFO] [dispatcher_manager.go:135] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/01 18:02:36.489 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=1dd43b7c-7fdb-4344-8472-6c82d1545d8e]
[2023/08/01 18:02:36.489 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/01 18:02:36.490 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:36.490 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:36.490 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 23, tp add index"] [category=ddl] ["take time"=6.959µs]
[2023/08/01 18:02:36.490 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 24, tp add index"] [category=ddl] ["take time"=37.166µs]
[2023/08/01 18:02:36.490 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:36.490 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 22, tp general"] [category=ddl] ["take time"=14.833µs]
[2023/08/01 18:02:36.490 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:36.491 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:36.491 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e] ["take time"=995.610625ms]
[2023/08/01 18:02:36.491 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e]
[2023/08/01 18:02:36.491 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:36.491 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:36.491 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:36.491 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:36.492 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:36.492 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:36.492 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:36.492 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:36.492 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:36.492 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:36.493 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:37.462 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:37.462 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:37.462 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:37.488 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=1dd43b7c-7fdb-4344-8472-6c82d1545d8e] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:37.489 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:37.489 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.993518375s]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/01 18:02:37.511 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestFrameworkSubTaskFailed (9.30s)
=== RUN   TestOwnerChange
[2023/08/01 18:02:37.591 +08:00] [INFO] [region_cache.go:2633] ["change store resolve state"] [store=1] [addr=store1] [from=unresolved] [to=resolved] [liveness-state=reachable]
[2023/08/01 18:02:37.592 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:37.592 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:37.594 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:37.594 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:37.595 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(65535) to MEDIUMBLOB"]
[2023/08/01 18:02:37.597 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=0dfc1244-714d-4a96-a531-3678cfe0cdc0] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:37.598 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:37.598 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:37.612 +08:00] [WARN] [domain.go:222] ["failed to get schema version"] [error="There is no Write MVCC info for the schema version"] [errorVerbose="There is no Write MVCC info for the schema version\ngithub.com/pingcap/tidb/domain.(*Domain).getTimestampForSchemaVersionWithNonEmptyDiff\n\t/Users/zzywq/code/tidb/domain/domain.go:299\ngithub.com/pingcap/tidb/domain.(*Domain).loadInfoSchema\n\t/Users/zzywq/code/tidb/domain/domain.go:220\ngithub.com/pingcap/tidb/domain.(*Domain).Reload\n\t/Users/zzywq/code/tidb/domain/domain.go:564\ngithub.com/pingcap/tidb/domain.(*Domain).Init\n\t/Users/zzywq/code/tidb/domain/domain.go:1208\ngithub.com/pingcap/tidb/session.(*domainMap).Get.func1\n\t/Users/zzywq/code/tidb/session/tidb.go:93\ngithub.com/pingcap/tidb/util.RunWithRetry\n\t/Users/zzywq/code/tidb/util/misc.go:69\ngithub.com/pingcap/tidb/session.(*domainMap).Get\n\t/Users/zzywq/code/tidb/session/tidb.go:79\ngithub.com/pingcap/tidb/session.createSessionWithOpt\n\t/Users/zzywq/code/tidb/session/session.go:3613\ngithub.com/pingcap/tidb/session.createSession\n\t/Users/zzywq/code/tidb/session/session.go:3605\ngithub.com/pingcap/tidb/session.runInBootstrapSession\n\t/Users/zzywq/code/tidb/session/session.go:3555\ngithub.com/pingcap/tidb/session.bootstrapSessionImpl\n\t/Users/zzywq/code/tidb/session/session.go:3340\ngithub.com/pingcap/tidb/session.BootstrapSession4DistExecution\n\t/Users/zzywq/code/tidb/session/session.go:3311\ngithub.com/pingcap/tidb/testkit.bootstrap4DistExecution\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:215\ngithub.com/pingcap/tidb/testkit.NewDistExecutionContext\n\t/Users/zzywq/code/tidb/testkit/mockstore.go:180\ngithub.com/pingcap/tidb/disttask/framework_test.TestOwnerChange\n\t/Users/zzywq/code/tidb/disttask/framework/framework_test.go:352\ntesting.tRunner\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/testing/testing.go:1576\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [version=0]
[2023/08/01 18:02:37.620 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=0] ["start time"=7.714375ms]
[2023/08/01 18:02:37.621 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:37.621 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=139c5bca-d340-4660-b234-91a831ce7c82] [runWorker=true]
[2023/08/01 18:02:37.621 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:37.621 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:37.621 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:37.621 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:37.621 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:37.621 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:37.621 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:37.622 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:37.622 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=0] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS test"] [user=]
[2023/08/01 18:02:37.626 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:37.625 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.626 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:37.625 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE DATABASE IF NOT EXISTS test"]
[2023/08/01 18:02:37.635 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:queueing, SchemaState:none, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.625 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.646 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=1] ["start time"=7.229042ms]
[2023/08/01 18:02:37.646 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:37.648 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.648 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=3] [version=1]
[2023/08/01 18:02:37.648 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=1] ["take time"=10.025459ms] [job="ID:3, Type:create schema, State:done, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:1, start time: 2023-08-01 18:02:37.625 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.654 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:3, Type:create schema, State:synced, SchemaState:public, SchemaID:2, TableID:0, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.625 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.658 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=3]
[2023/08/01 18:02:37.658 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.659 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE DATABASE IF NOT EXISTS `mysql`"] [user=]
[2023/08/01 18:02:37.660 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=1] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"] [user=]
[2023/08/01 18:02:37.675 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.663 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.675 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.663 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.user (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tauthentication_string\tTEXT,\n\t\tplugin\t\t\t\t\tCHAR(64),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tProcess_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_db_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tSuper_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_user_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_slave_priv\t    \tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tRepl_client_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_role_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_role_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAccount_locked\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShutdown_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReload_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tFILE_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tConfig_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_Tablespace_Priv  ENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_reuse_history  smallint unsigned DEFAULT NULL,\n\t\tPassword_reuse_time     smallint unsigned DEFAULT NULL,\n\t\tUser_attributes\t\t\tjson,\n\t\tToken_issuer\t\t\tVARCHAR(255),\n\t\tPassword_expired\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPassword_last_changed\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP(),\n\t\tPassword_lifetime\t\tSMALLINT UNSIGNED DEFAULT NULL,\n\t\tPRIMARY KEY (Host, User));"]
[2023/08/01 18:02:37.700 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:5, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.663 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.734 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=1] [neededSchemaVersion=2] ["start time"=4.451292ms] [gotSchemaVersion=2] [phyTblIDs="[4]"] [actionTypes="[3]"]
[2023/08/01 18:02:37.737 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.737 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=5] [version=2]
[2023/08/01 18:02:37.738 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=2] ["take time"=8.056792ms] [job="ID:5, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.663 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.758 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:5, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:4, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.663 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.779 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=5]
[2023/08/01 18:02:37.779 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.780 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=2] [cur_db=mysql] [sql="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "] [user=]
[2023/08/01 18:02:37.785 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.785 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE  IF NOT EXISTS mysql.password_history (\n         Host char(255)  NOT NULL DEFAULT '',\n         User char(32)  NOT NULL DEFAULT '',\n         Password_timestamp timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n         Password text,\n         PRIMARY KEY (Host,User,Password_timestamp )\n        ) COMMENT='Password history for user accounts' "]
[2023/08/01 18:02:37.795 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:7, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.804 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=2] [neededSchemaVersion=3] ["start time"=783.833µs] [gotSchemaVersion=3] [phyTblIDs="[6]"] [actionTypes="[3]"]
[2023/08/01 18:02:37.806 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.806 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=7] [version=3]
[2023/08/01 18:02:37.807 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=3] ["take time"=4.093583ms] [job="ID:7, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.820 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:7, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:6, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.827 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=7]
[2023/08/01 18:02:37.827 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.828 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=3] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"] [user=]
[2023/08/01 18:02:37.833 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.83 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.833 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.83 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_priv (Host CHAR(255) NOT NULL DEFAULT '',User CHAR(80) NOT NULL DEFAULT '',Priv LONGTEXT NOT NULL DEFAULT '',PRIMARY KEY (Host, User))"]
[2023/08/01 18:02:37.845 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:9, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.83 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.854 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=3] [neededSchemaVersion=4] ["start time"=766.584µs] [gotSchemaVersion=4] [phyTblIDs="[8]"] [actionTypes="[3]"]
[2023/08/01 18:02:37.855 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.855 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=9] [version=4]
[2023/08/01 18:02:37.857 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=4] ["take time"=4.071875ms] [job="ID:9, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.83 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.864 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:9, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:8, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.83 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.870 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=9]
[2023/08/01 18:02:37.870 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.871 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=4] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"] [user=]
[2023/08/01 18:02:37.882 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.875 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.882 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.875 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.db (\n\t\tHost\t\t\t\t\tCHAR(255),\n\t\tDB\t\t\t\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\t\t\t\tCHAR(32),\n\t\tSelect_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tInsert_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tUpdate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDelete_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tDrop_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tGrant_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tReferences_priv \t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tIndex_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_tmp_table_priv\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tLock_tables_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_view_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tShow_view_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tCreate_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tAlter_routine_priv\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tExecute_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tEvent_priv\t\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tTrigger_priv\t\t\tENUM('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (Host, DB, User));"]
[2023/08/01 18:02:37.899 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:11, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.875 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.921 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=4] [neededSchemaVersion=5] ["start time"=2.477417ms] [gotSchemaVersion=5] [phyTblIDs="[10]"] [actionTypes="[3]"]
[2023/08/01 18:02:37.923 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.923 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=11] [version=5]
[2023/08/01 18:02:37.925 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=5] ["take time"=6.019875ms] [job="ID:11, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.875 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.937 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:11, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:10, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.875 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.949 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=11]
[2023/08/01 18:02:37.949 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.950 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=5] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"] [user=]
[2023/08/01 18:02:37.955 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:37.955 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tables_priv (\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tGrantor\t\tCHAR(77),\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tTable_priv\tSET('Select','Insert','Update','Delete','Create','Drop','Grant','Index','Alter','Create View','Show View','Trigger','References'),\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name));"]
[2023/08/01 18:02:37.968 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:13, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.979 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=5] [neededSchemaVersion=6] ["start time"=1.235ms] [gotSchemaVersion=6] [phyTblIDs="[12]"] [actionTypes="[3]"]
[2023/08/01 18:02:37.980 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:37.980 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=13] [version=6]
[2023/08/01 18:02:37.981 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=6] ["take time"=4.021041ms] [job="ID:13, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:37.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.989 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:13, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:12, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:37.951 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:37.996 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=13]
[2023/08/01 18:02:37.996 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:37.997 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=6] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"] [user=]
[2023/08/01 18:02:38.003 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.003 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.columns_priv(\n\t\tHost\t\tCHAR(255),\n\t\tDB\t\t\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tUser\t\tCHAR(32),\n\t\tTable_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tColumn_name\tCHAR(64) CHARSET utf8mb4 COLLATE utf8mb4_general_ci,\n\t\tTimestamp\tTIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\t\tColumn_priv\tSET('Select','Insert','Update','References'),\n\t\tPRIMARY KEY (Host, DB, User, Table_name, Column_name));"]
[2023/08/01 18:02:38.013 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:15, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.023 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=6] [neededSchemaVersion=7] ["start time"=1.247375ms] [gotSchemaVersion=7] [phyTblIDs="[14]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.025 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.025 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=15] [version=7]
[2023/08/01 18:02:38.025 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=7] ["take time"=4.027833ms] [job="ID:15, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.035 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:15, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:14, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.042 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=15]
[2023/08/01 18:02:38.042 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.043 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=7] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"] [user=]
[2023/08/01 18:02:38.048 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.045 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.048 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.045 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.GLOBAL_VARIABLES(\n\t\tVARIABLE_NAME  VARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE VARCHAR(1024) DEFAULT NULL);"]
[2023/08/01 18:02:38.056 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:17, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.045 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.062 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=7] [neededSchemaVersion=8] ["start time"=613.916µs] [gotSchemaVersion=8] [phyTblIDs="[16]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.064 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.064 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=17] [version=8]
[2023/08/01 18:02:38.066 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=8] ["take time"=4.030125ms] [job="ID:17, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.045 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.076 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:17, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:16, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.045 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.081 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=17]
[2023/08/01 18:02:38.081 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.081 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=8] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"] [user=]
[2023/08/01 18:02:38.086 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.083 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.086 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.083 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb(\n\t\tVARIABLE_NAME  \tVARCHAR(64) NOT NULL PRIMARY KEY,\n\t\tVARIABLE_VALUE \tVARCHAR(1024) DEFAULT NULL,\n\t\tCOMMENT \t\tVARCHAR(1024));"]
[2023/08/01 18:02:38.096 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:19, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.083 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.103 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=8] [neededSchemaVersion=9] ["start time"=700.625µs] [gotSchemaVersion=9] [phyTblIDs="[18]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.105 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.105 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=19] [version=9]
[2023/08/01 18:02:38.107 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=9] ["take time"=4.047292ms] [job="ID:19, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.083 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.116 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:19, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:18, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.083 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.122 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=19]
[2023/08/01 18:02:38.122 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.122 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=9] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"] [user=]
[2023/08/01 18:02:38.128 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.128 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.help_topic (\n  \t\thelp_topic_id \t\tINT(10) UNSIGNED NOT NULL,\n  \t\tname \t\t\t\tCHAR(64) NOT NULL,\n  \t\thelp_category_id \tSMALLINT(5) UNSIGNED NOT NULL,\n  \t\tdescription \t\tTEXT NOT NULL,\n  \t\texample \t\t\tTEXT NOT NULL,\n  \t\turl \t\t\t\tTEXT NOT NULL,\n  \t\tPRIMARY KEY (help_topic_id) clustered,\n  \t\tUNIQUE KEY name (name)\n\t\t) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='help topics';"]
[2023/08/01 18:02:38.137 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:21, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.148 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=9] [neededSchemaVersion=10] ["start time"=895.583µs] [gotSchemaVersion=10] [phyTblIDs="[20]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.150 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.150 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=21] [version=10]
[2023/08/01 18:02:38.151 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=10] ["take time"=4.012541ms] [job="ID:21, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.159 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:21, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:20, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.124 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.165 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=21]
[2023/08/01 18:02:38.165 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.166 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=10] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"] [user=]
[2023/08/01 18:02:38.171 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.168 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.172 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.168 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta (\n\t\tversion \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\ttable_id \t\tBIGINT(64) NOT NULL,\n\t\tmodify_count\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcount \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tsnapshot        BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tINDEX idx_ver(version),\n\t\tUNIQUE INDEX tbl(table_id)\n\t);"]
[2023/08/01 18:02:38.180 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:23, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.168 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.188 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=10] [neededSchemaVersion=11] ["start time"=896.416µs] [gotSchemaVersion=11] [phyTblIDs="[22]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.190 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.190 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=23] [version=11]
[2023/08/01 18:02:38.191 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=11] ["take time"=4.020708ms] [job="ID:23, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.168 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.199 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:23, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:22, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.168 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.205 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=23]
[2023/08/01 18:02:38.205 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.206 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=11] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:38.207 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(6291456) to MEDIUMBLOB"]
[2023/08/01 18:02:38.217 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.212 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.217 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.212 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_histograms (\n\t\ttable_id \t\t\tBIGINT(64) NOT NULL,\n\t\tis_index \t\t\tTINYINT(2) NOT NULL,\n\t\thist_id \t\t\tBIGINT(64) NOT NULL,\n\t\tdistinct_count \t\tBIGINT(64) NOT NULL,\n\t\tnull_count \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\ttot_col_size \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tmodify_count \t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tversion \t\t\tBIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tcm_sketch \t\t\tBLOB(6291456),\n\t\tstats_ver \t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tflag \t\t\t\tBIGINT(64) NOT NULL DEFAULT 0,\n\t\tcorrelation \t\tDOUBLE NOT NULL DEFAULT 0,\n\t\tlast_analyze_pos \tLONGBLOB DEFAULT NULL,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:38.226 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:25, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.212 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.240 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=11] [neededSchemaVersion=12] ["start time"=1.548791ms] [gotSchemaVersion=12] [phyTblIDs="[24]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.242 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.242 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=25] [version=12]
[2023/08/01 18:02:38.242 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=12] ["take time"=4.093ms] [job="ID:25, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.212 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.251 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:25, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:24, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.212 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.259 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=25]
[2023/08/01 18:02:38.260 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.260 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=12] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"] [user=]
[2023/08/01 18:02:38.266 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.262 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.266 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.262 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_buckets (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tbucket_id \tBIGINT(64) NOT NULL,\n\t\tcount \t\tBIGINT(64) NOT NULL,\n\t\trepeats \tBIGINT(64) NOT NULL,\n\t\tupper_bound LONGBLOB NOT NULL,\n\t\tlower_bound LONGBLOB ,\n\t\tndv         BIGINT NOT NULL DEFAULT 0,\n\t\tUNIQUE INDEX tbl(table_id, is_index, hist_id, bucket_id)\n\t);"]
[2023/08/01 18:02:38.280 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:27, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.262 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.291 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=12] [neededSchemaVersion=13] ["start time"=1.191542ms] [gotSchemaVersion=13] [phyTblIDs="[26]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.293 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.293 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=27] [version=13]
[2023/08/01 18:02:38.293 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=13] ["take time"=4.015958ms] [job="ID:27, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.262 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.301 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:27, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:26, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.262 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.308 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=27]
[2023/08/01 18:02:38.308 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.309 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=13] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:38.314 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.314 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:38.323 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:29, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.331 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=13] [neededSchemaVersion=14] ["start time"=898.875µs] [gotSchemaVersion=14] [phyTblIDs="[28]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.333 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.333 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=29] [version=14]
[2023/08/01 18:02:38.334 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=14] ["take time"=4.020708ms] [job="ID:29, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.344 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:29, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:28, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.311 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.350 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=29]
[2023/08/01 18:02:38.350 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.351 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=14] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"] [user=]
[2023/08/01 18:02:38.357 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.353 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.357 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.353 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.gc_delete_range_done (\n\t\tjob_id \t\tBIGINT NOT NULL COMMENT \"the DDL job ID\",\n\t\telement_id \tBIGINT NOT NULL COMMENT \"the schema element ID\",\n\t\tstart_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tend_key \tVARCHAR(255) NOT NULL COMMENT \"encoded in hex\",\n\t\tts \t\t\tBIGINT NOT NULL COMMENT \"timestamp in uint64\",\n\t\tUNIQUE KEY delete_range_done_index (job_id, element_id)\n\t);"]
[2023/08/01 18:02:38.365 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:31, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.353 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.374 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=14] [neededSchemaVersion=15] ["start time"=805.542µs] [gotSchemaVersion=15] [phyTblIDs="[30]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.375 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.375 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=31] [version=15]
[2023/08/01 18:02:38.376 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=15] ["take time"=4.086541ms] [job="ID:31, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.353 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.383 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:31, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:30, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.353 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.390 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=31]
[2023/08/01 18:02:38.390 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.391 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=15] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:38.396 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.396 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_feedback (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tfeedback \tBLOB NOT NULL,\n\t\tINDEX hist(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:38.404 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:33, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.412 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=15] [neededSchemaVersion=16] ["start time"=760.166µs] [gotSchemaVersion=16] [phyTblIDs="[32]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.416 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.416 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=33] [version=16]
[2023/08/01 18:02:38.417 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=16] ["take time"=6.020292ms] [job="ID:33, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.424 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:33, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:32, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.393 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.430 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=33]
[2023/08/01 18:02:38.430 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.431 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=16] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"] [user=]
[2023/08/01 18:02:38.437 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.433 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.437 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.433 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.role_edges (\n\t\tFROM_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tFROM_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_HOST \t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tTO_USER \t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tWITH_ADMIN_OPTION \tENUM('N','Y') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (FROM_HOST,FROM_USER,TO_HOST,TO_USER)\n\t);"]
[2023/08/01 18:02:38.445 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:35, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.433 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.459 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=16] [neededSchemaVersion=17] ["start time"=899.333µs] [gotSchemaVersion=17] [phyTblIDs="[34]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.461 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.461 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=35] [version=17]
[2023/08/01 18:02:38.462 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=17] ["take time"=4.083291ms] [job="ID:35, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.433 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.469 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:35, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:34, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.433 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.475 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=35]
[2023/08/01 18:02:38.475 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.476 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=17] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"] [user=]
[2023/08/01 18:02:38.481 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.481 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.default_roles (\n\t\tHOST \t\t\t\tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tUSER \t\t\t\tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tDEFAULT_ROLE_HOST \tCHAR(60) COLLATE utf8_bin NOT NULL DEFAULT '%',\n\t\tDEFAULT_ROLE_USER \tCHAR(32) COLLATE utf8_bin NOT NULL DEFAULT '',\n\t\tPRIMARY KEY (HOST,USER,DEFAULT_ROLE_HOST,DEFAULT_ROLE_USER)\n\t)"]
[2023/08/01 18:02:38.490 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:37, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.498 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=17] [neededSchemaVersion=18] ["start time"=749.417µs] [gotSchemaVersion=18] [phyTblIDs="[36]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.499 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.500 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=37] [version=18]
[2023/08/01 18:02:38.501 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=18] ["take time"=4.103208ms] [job="ID:37, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.508 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:37, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:36, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.478 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.514 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=37]
[2023/08/01 18:02:38.514 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.515 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=18] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:38.521 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.521 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.bind_info (\n\t\toriginal_sql TEXT NOT NULL,\n\t\tbind_sql TEXT NOT NULL,\n\t\tdefault_db TEXT NOT NULL,\n\t\tstatus TEXT NOT NULL,\n\t\tcreate_time TIMESTAMP(3) NOT NULL,\n\t\tupdate_time TIMESTAMP(3) NOT NULL,\n\t\tcharset TEXT NOT NULL,\n\t\tcollation TEXT NOT NULL,\n\t\tsource VARCHAR(10) NOT NULL DEFAULT 'unknown',\n\t\tsql_digest varchar(64),\n\t\tplan_digest varchar(64),\n\t\tINDEX sql_index(original_sql(700),default_db(68)) COMMENT \"accelerate the speed when add global binding query\",\n\t\tINDEX time_index(update_time) COMMENT \"accelerate the speed when querying with last update time\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:38.530 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:39, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.546 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=18] [neededSchemaVersion=19] ["start time"=1.532875ms] [gotSchemaVersion=19] [phyTblIDs="[38]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.548 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.548 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=39] [version=19]
[2023/08/01 18:02:38.548 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=19] ["take time"=4.082708ms] [job="ID:39, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.556 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:39, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:38, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.517 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.564 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=39]
[2023/08/01 18:02:38.564 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.567 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=19] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:38.572 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.572 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_top_n (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tcount \t\tBIGINT(64) UNSIGNED NOT NULL,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:38.579 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:41, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.587 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=19] [neededSchemaVersion=20] ["start time"=908.208µs] [gotSchemaVersion=20] [phyTblIDs="[40]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.589 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.589 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=41] [version=20]
[2023/08/01 18:02:38.590 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=20] ["take time"=4.014208ms] [job="ID:41, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.597 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:41, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:40, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.569 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.603 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=41]
[2023/08/01 18:02:38.603 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.603 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=20] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"] [user=]
[2023/08/01 18:02:38.608 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.608 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.expr_pushdown_blacklist (\n\t\tname \t\tCHAR(100) NOT NULL,\n\t\tstore_type \tCHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb',\n\t\treason \t\tVARCHAR(200)\n\t);"]
[2023/08/01 18:02:38.616 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:43, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.622 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:38.622 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:38.624 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=20] [neededSchemaVersion=21] ["start time"=610.417µs] [gotSchemaVersion=21] [phyTblIDs="[42]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.625 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.626 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=43] [version=21]
[2023/08/01 18:02:38.626 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=21] ["take time"=4.097375ms] [job="ID:43, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.633 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:43, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:42, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.605 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.638 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=43]
[2023/08/01 18:02:38.638 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.639 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=21] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"] [user=]
[2023/08/01 18:02:38.643 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.643 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.opt_rule_blacklist (\n\t\tname \tCHAR(100) NOT NULL\n\t);"]
[2023/08/01 18:02:38.653 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:45, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.659 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=21] [neededSchemaVersion=22] ["start time"=396.542µs] [gotSchemaVersion=22] [phyTblIDs="[44]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.661 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.661 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=45] [version=22]
[2023/08/01 18:02:38.663 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=22] ["take time"=4.080125ms] [job="ID:45, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.670 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:45, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:44, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.641 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.676 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=45]
[2023/08/01 18:02:38.676 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.677 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=22] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"] [user=]
[2023/08/01 18:02:38.683 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.683 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_extended (\n\t\tname varchar(32) NOT NULL,\n\t\ttype tinyint(4) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcolumn_ids varchar(32) NOT NULL,\n\t\tstats blob DEFAULT NULL,\n\t\tversion bigint(64) unsigned NOT NULL,\n\t\tstatus tinyint(4) NOT NULL,\n\t\tPRIMARY KEY(name, table_id),\n\t\tKEY idx_1 (table_id, status, version),\n\t\tKEY idx_2 (status, version)\n\t);"]
[2023/08/01 18:02:38.692 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:47, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.703 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=22] [neededSchemaVersion=23] ["start time"=1.267166ms] [gotSchemaVersion=23] [phyTblIDs="[46]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.705 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.705 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=47] [version=23]
[2023/08/01 18:02:38.705 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=23] ["take time"=4.0175ms] [job="ID:47, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.713 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:47, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:46, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.679 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.721 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=47]
[2023/08/01 18:02:38.721 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.721 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=23] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"] [user=]
[2023/08/01 18:02:38.727 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.727 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.schema_index_usage (\n\t\tTABLE_ID bigint(64),\n\t\tINDEX_ID bigint(21),\n\t\tQUERY_COUNT bigint(64),\n\t\tROWS_SELECTED bigint(64),\n\t\tLAST_USED_AT timestamp,\n\t\tPRIMARY KEY(TABLE_ID, INDEX_ID)\n\t);"]
[2023/08/01 18:02:38.741 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:49, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.750 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=23] [neededSchemaVersion=24] ["start time"=890.5µs] [gotSchemaVersion=24] [phyTblIDs="[48]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.752 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.752 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=49] [version=24]
[2023/08/01 18:02:38.753 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=24] ["take time"=4.054791ms] [job="ID:49, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.763 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:49, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:48, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.724 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.769 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=49]
[2023/08/01 18:02:38.770 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.770 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=24] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"] [user=]
[2023/08/01 18:02:38.775 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.772 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.775 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.772 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_fm_sketch (\n\t\ttable_id \tBIGINT(64) NOT NULL,\n\t\tis_index \tTINYINT(2) NOT NULL,\n\t\thist_id \tBIGINT(64) NOT NULL,\n\t\tvalue \t\tLONGBLOB,\n\t\tINDEX tbl(table_id, is_index, hist_id)\n\t);"]
[2023/08/01 18:02:38.786 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:51, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.772 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.796 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=24] [neededSchemaVersion=25] ["start time"=806µs] [gotSchemaVersion=25] [phyTblIDs="[50]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.798 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.798 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=51] [version=25]
[2023/08/01 18:02:38.799 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=25] ["take time"=4.066166ms] [job="ID:51, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.772 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.806 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:51, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:50, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.772 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.814 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=51]
[2023/08/01 18:02:38.814 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.815 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=25] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"] [user=]
[2023/08/01 18:02:38.825 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.821 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.825 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.821 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.global_grants (\n\t\tUSER char(32) NOT NULL DEFAULT '',\n\t\tHOST char(255) NOT NULL DEFAULT '',\n\t\tPRIV char(32) NOT NULL DEFAULT '',\n\t\tWITH_GRANT_OPTION enum('N','Y') NOT NULL DEFAULT 'N',\n\t\tPRIMARY KEY (USER,HOST,PRIV)\n\t);"]
[2023/08/01 18:02:38.834 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:53, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.821 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.842 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=25] [neededSchemaVersion=26] ["start time"=798.542µs] [gotSchemaVersion=26] [phyTblIDs="[52]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.844 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.844 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=53] [version=26]
[2023/08/01 18:02:38.845 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=26] ["take time"=4.043584ms] [job="ID:53, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.821 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.852 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:53, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:52, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.821 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.858 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=53]
[2023/08/01 18:02:38.858 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.859 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=26] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"] [user=]
[2023/08/01 18:02:38.864 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.864 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.capture_plan_baselines_blacklist (\n\t\tid bigint(64) auto_increment,\n\t\tfilter_type varchar(32) NOT NULL COMMENT \"type of the filter, only db, table and frequency supported now\",\n\t\tfilter_value varchar(32) NOT NULL,\n\t\tkey idx(filter_type),\n\t\tprimary key(id)\n\t);"]
[2023/08/01 18:02:38.874 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:55, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.881 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=26] [neededSchemaVersion=27] ["start time"=717.042µs] [gotSchemaVersion=27] [phyTblIDs="[54]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.883 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.883 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=55] [version=27]
[2023/08/01 18:02:38.884 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=27] ["take time"=4.045792ms] [job="ID:55, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.893 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:55, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:54, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.861 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.901 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=55]
[2023/08/01 18:02:38.901 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.901 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=27] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:38.906 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.903 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.906 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.903 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.column_stats_usage (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tcolumn_id BIGINT(64) NOT NULL,\n\t\tlast_used_at TIMESTAMP,\n\t\tlast_analyzed_at TIMESTAMP,\n\t\tPRIMARY KEY (table_id, column_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:38.914 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:57, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.903 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.922 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=27] [neededSchemaVersion=28] ["start time"=709.75µs] [gotSchemaVersion=28] [phyTblIDs="[56]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.924 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.924 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=57] [version=28]
[2023/08/01 18:02:38.925 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=28] ["take time"=4.024166ms] [job="ID:57, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.903 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.932 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:57, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:56, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.903 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.937 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=57]
[2023/08/01 18:02:38.937 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.938 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=28] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"] [user=]
[2023/08/01 18:02:38.943 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.94 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.943 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.94 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.table_cache_meta (\n\t\ttid bigint(11) NOT NULL DEFAULT 0,\n\t\tlock_type enum('NONE','READ', 'INTEND', 'WRITE') NOT NULL DEFAULT 'NONE',\n\t\tlease bigint(20) NOT NULL DEFAULT 0,\n\t\toldReadLease bigint(20) NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (tid)\n\t);"]
[2023/08/01 18:02:38.951 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:59, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.94 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.960 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=28] [neededSchemaVersion=29] ["start time"=711.083µs] [gotSchemaVersion=29] [phyTblIDs="[58]"] [actionTypes="[3]"]
[2023/08/01 18:02:38.962 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:38.962 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=59] [version=29]
[2023/08/01 18:02:38.963 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=29] ["take time"=4.020458ms] [job="ID:59, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.94 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.970 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:59, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:58, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.94 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:38.975 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=59]
[2023/08/01 18:02:38.975 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:38.976 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=29] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"] [user=]
[2023/08/01 18:02:38.976 +08:00] [INFO] [ddl_api.go:1044] ["Automatically convert BLOB(19372) to MEDIUMBLOB"]
[2023/08/01 18:02:38.982 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:38.982 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_options (\n\t\ttable_id BIGINT(64) NOT NULL,\n\t\tsample_num BIGINT(64) NOT NULL DEFAULT 0,\n\t\tsample_rate DOUBLE NOT NULL DEFAULT -1,\n\t\tbuckets BIGINT(64) NOT NULL DEFAULT 0,\n\t\ttopn BIGINT(64) NOT NULL DEFAULT -1,\n\t\tcolumn_choice enum('DEFAULT','ALL','PREDICATE','LIST') NOT NULL DEFAULT 'DEFAULT',\n\t\tcolumn_ids TEXT(19372),\n\t\tPRIMARY KEY (table_id) CLUSTERED\n\t);"]
[2023/08/01 18:02:38.995 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:61, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.005 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=29] [neededSchemaVersion=30] ["start time"=1.0155ms] [gotSchemaVersion=30] [phyTblIDs="[60]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.007 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.007 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=61] [version=30]
[2023/08/01 18:02:39.008 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=30] ["take time"=4.060875ms] [job="ID:61, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:38.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.015 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:61, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:60, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:38.978 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.021 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=61]
[2023/08/01 18:02:39.022 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.022 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=30] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:39.028 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.028 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tstats_data longblob NOT NULL,\n\t\tseq_no bigint(64) NOT NULL comment 'sequence number of the gzipped data slice',\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version_seq (table_id, version, seq_no),\n\t\tKEY table_create_time (table_id, create_time, seq_no),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:39.035 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:63, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.047 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=30] [neededSchemaVersion=31] ["start time"=1.051583ms] [gotSchemaVersion=31] [phyTblIDs="[62]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.048 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.048 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=63] [version=31]
[2023/08/01 18:02:39.049 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=31] ["take time"=4.011375ms] [job="ID:63, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.056 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:63, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:62, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.024 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.063 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=63]
[2023/08/01 18:02:39.063 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.064 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=31] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"] [user=]
[2023/08/01 18:02:39.072 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.068 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.072 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.068 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_meta_history (\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL,\n\t\tcount bigint(64) NOT NULL,\n\t\tversion bigint(64) NOT NULL comment 'stats version which corresponding to stats:version in EXPLAIN',\n    \tsource varchar(40) NOT NULL,\n\t\tcreate_time datetime(6) NOT NULL,\n\t\tUNIQUE KEY table_version (table_id, version),\n\t\tKEY table_create_time (table_id, create_time),\n    \tKEY idx_create_time (create_time)\n\t);"]
[2023/08/01 18:02:39.080 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:65, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.068 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.093 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=31] [neededSchemaVersion=32] ["start time"=1.0695ms] [gotSchemaVersion=32] [phyTblIDs="[64]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.094 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.095 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=65] [version=32]
[2023/08/01 18:02:39.096 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=32] ["take time"=4.055917ms] [job="ID:65, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.068 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.103 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:65, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:64, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.068 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.118 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=65]
[2023/08/01 18:02:39.119 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.120 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=32] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"] [user=]
[2023/08/01 18:02:39.127 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.127 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.analyze_jobs (\n\t\tid BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\ttable_schema CHAR(64) NOT NULL DEFAULT '',\n\t\ttable_name CHAR(64) NOT NULL DEFAULT '',\n\t\tpartition_name CHAR(64) NOT NULL DEFAULT '',\n\t\tjob_info TEXT NOT NULL,\n\t\tprocessed_rows BIGINT(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tstart_time TIMESTAMP,\n\t\tend_time TIMESTAMP,\n\t\tstate ENUM('pending', 'running', 'finished', 'failed') NOT NULL,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the analyze job',\n\t\tprocess_id BIGINT(64) UNSIGNED comment 'ID of the process executing the analyze job',\n\t\tPRIMARY KEY (id),\n\t\tKEY (update_time)\n\t);"]
[2023/08/01 18:02:39.138 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:67, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.152 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=32] [neededSchemaVersion=33] ["start time"=1.697ms] [gotSchemaVersion=33] [phyTblIDs="[66]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.155 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.155 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=67] [version=33]
[2023/08/01 18:02:39.156 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=33] ["take time"=6.022917ms] [job="ID:67, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.164 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:67, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:66, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.122 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.172 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=67]
[2023/08/01 18:02:39.172 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.173 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=33] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"] [user=]
[2023/08/01 18:02:39.177 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.175 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.177 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.175 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.advisory_locks (\n\t\tlock_name VARCHAR(64) NOT NULL PRIMARY KEY\n\t);"]
[2023/08/01 18:02:39.185 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:69, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.175 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.193 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=33] [neededSchemaVersion=34] ["start time"=492.959µs] [gotSchemaVersion=34] [phyTblIDs="[68]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.195 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.195 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=69] [version=34]
[2023/08/01 18:02:39.197 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=34] ["take time"=4.063959ms] [job="ID:69, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.175 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.203 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:69, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:68, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.175 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.208 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=69]
[2023/08/01 18:02:39.208 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.215 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:39.211 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.215 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:39.211 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE OR REPLACE VIEW mysql.tidb_mdl_view as (\n\t\tSELECT job_id,\n\t\t\tdb_name,\n\t\t\ttable_name,\n\t\t\tquery,\n\t\t\tsession_id,\n\t\t\ttxnstart,\n\t\t\ttidb_decode_sql_digests(all_sql_digests, 4096) AS SQL_DIGESTS\n\t\tFROM information_schema.ddl_jobs,\n\t\t\tinformation_schema.cluster_tidb_trx,\n\t\t\tinformation_schema.cluster_processlist\n\t\tWHERE (ddl_jobs.state != 'synced' and ddl_jobs.state != 'cancelled')\n\t\t\tAND Find_in_set(ddl_jobs.table_id, cluster_tidb_trx.related_table_ids)\n\t\t\tAND cluster_tidb_trx.session_id = cluster_processlist.id\n\t);"]
[2023/08/01 18:02:39.223 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:71, Type:create view, State:queueing, SchemaState:none, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.211 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.234 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=34] [neededSchemaVersion=35] ["start time"=970.083µs] [gotSchemaVersion=35] [phyTblIDs="[70]"] [actionTypes="[21]"]
[2023/08/01 18:02:39.236 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.236 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=71] [version=35]
[2023/08/01 18:02:39.237 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=35] ["take time"=4.04775ms] [job="ID:71, Type:create view, State:done, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:3, start time: 2023-08-01 18:02:39.211 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.244 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:71, Type:create view, State:synced, SchemaState:public, SchemaID:1, TableID:70, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.211 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.252 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=71]
[2023/08/01 18:02:39.252 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.252 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=35] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"] [user=]
[2023/08/01 18:02:39.258 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.258 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_status (\n\t\tsql_digest VARCHAR(128),\n\t\tplan_digest VARCHAR(128),\n\t\torigin_sql TEXT,\n\t\ttoken VARCHAR(128),\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tfail_reason TEXT,\n\t\tinstance VARCHAR(512) NOT NULL comment 'address of the TiDB instance executing the plan replayer job');"]
[2023/08/01 18:02:39.266 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:73, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.276 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=35] [neededSchemaVersion=36] ["start time"=969.709µs] [gotSchemaVersion=36] [phyTblIDs="[72]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.277 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.277 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=73] [version=36]
[2023/08/01 18:02:39.279 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=36] ["take time"=4.050542ms] [job="ID:73, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.286 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:73, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:72, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.254 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.294 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=73]
[2023/08/01 18:02:39.294 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.294 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=36] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"] [user=]
[2023/08/01 18:02:39.299 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.plan_replayer_task (\n\t\tsql_digest VARCHAR(128) NOT NULL,\n\t\tplan_digest VARCHAR(128) NOT NULL,\n\t\tupdate_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tPRIMARY KEY (sql_digest,plan_digest));"]
[2023/08/01 18:02:39.299 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.309 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:75, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.317 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=36] [neededSchemaVersion=37] ["start time"=679.208µs] [gotSchemaVersion=37] [phyTblIDs="[74]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.319 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.319 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=75] [version=37]
[2023/08/01 18:02:39.320 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=37] ["take time"=4.083167ms] [job="ID:75, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.334 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:75, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:74, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.296 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.339 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=75]
[2023/08/01 18:02:39.340 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.340 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=37] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"] [user=]
[2023/08/01 18:02:39.345 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.345 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.stats_table_locked(\n\t\ttable_id bigint(64) NOT NULL,\n\t\tmodify_count bigint(64) NOT NULL DEFAULT 0,\n\t\tcount bigint(64) NOT NULL DEFAULT 0,\n\t\tversion bigint(64) UNSIGNED NOT NULL DEFAULT 0,\n\t\tPRIMARY KEY (table_id));"]
[2023/08/01 18:02:39.356 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:77, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.364 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=37] [neededSchemaVersion=38] ["start time"=671.333µs] [gotSchemaVersion=38] [phyTblIDs="[76]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.366 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.366 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=77] [version=38]
[2023/08/01 18:02:39.367 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=38] ["take time"=4.036875ms] [job="ID:77, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.375 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:77, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:76, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.342 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.380 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=77]
[2023/08/01 18:02:39.380 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.381 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=38] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"] [user=]
[2023/08/01 18:02:39.390 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.390 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_table_status (\n\t\ttable_id bigint(64) PRIMARY KEY,\n        parent_table_id bigint(64),\n        table_statistics text DEFAULT NULL,\n\t\tlast_job_id varchar(64) DEFAULT NULL,\n\t\tlast_job_start_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_finish_time timestamp NULL DEFAULT NULL,\n\t\tlast_job_ttl_expire timestamp NULL DEFAULT NULL,\n        last_job_summary text DEFAULT NULL,\n\t\tcurrent_job_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_id varchar(64) DEFAULT NULL,\n\t\tcurrent_job_owner_addr varchar(256) DEFAULT NULL,\n\t\tcurrent_job_owner_hb_time timestamp,\n\t\tcurrent_job_start_time timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_ttl_expire timestamp NULL DEFAULT NULL,\n\t\tcurrent_job_state text DEFAULT NULL,\n\t\tcurrent_job_status varchar(64) DEFAULT NULL,\n  \t\tcurrent_job_status_update_time timestamp NULL DEFAULT NULL);"]
[2023/08/01 18:02:39.400 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:79, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.416 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=38] [neededSchemaVersion=39] ["start time"=1.6995ms] [gotSchemaVersion=39] [phyTblIDs="[78]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.422 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.422 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=79] [version=39]
[2023/08/01 18:02:39.422 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=39] ["take time"=8.124542ms] [job="ID:79, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.445 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:79, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:78, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.384 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.456 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=79]
[2023/08/01 18:02:39.456 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.457 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=39] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"] [user=]
[2023/08/01 18:02:39.464 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.464 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_task (\n\t\tjob_id varchar(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tscan_id int NOT NULL,\n\t\tscan_range_start BLOB,\n\t\tscan_range_end BLOB,\n\t\texpire_time timestamp NOT NULL,\n\t\towner_id varchar(64) DEFAULT NULL,\n\t\towner_addr varchar(64) DEFAULT NULL,\n\t\towner_hb_time timestamp DEFAULT NULL,\n\t\tstatus varchar(64) DEFAULT 'waiting',\n\t\tstatus_update_time timestamp NULL DEFAULT NULL,\n\t\tstate text,\n\t\tcreated_time timestamp NOT NULL,\n\t\tprimary key(job_id, scan_id),\n\t\tkey(created_time));"]
[2023/08/01 18:02:39.473 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:81, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.487 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=39] [neededSchemaVersion=40] ["start time"=1.758333ms] [gotSchemaVersion=40] [phyTblIDs="[80]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.490 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.490 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=81] [version=40]
[2023/08/01 18:02:39.492 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=40] ["take time"=6.016292ms] [job="ID:81, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.500 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:81, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:80, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.459 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.508 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=81]
[2023/08/01 18:02:39.508 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.509 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=40] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"] [user=]
[2023/08/01 18:02:39.517 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.517 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_ttl_job_history (\n\t\tjob_id varchar(64) PRIMARY KEY,\n\t\ttable_id bigint(64) NOT NULL,\n        parent_table_id bigint(64) NOT NULL,\n    \ttable_schema varchar(64) NOT NULL,\n\t\ttable_name varchar(64) NOT NULL,\n    \tpartition_name varchar(64) DEFAULT NULL,\n\t\tcreate_time timestamp NOT NULL,\n\t\tfinish_time timestamp NOT NULL,\n\t\tttl_expire timestamp NOT NULL,\n        summary_text text,\n\t\texpired_rows bigint(64) DEFAULT NULL,\n    \tdeleted_rows bigint(64) DEFAULT NULL,\n    \terror_delete_rows bigint(64) DEFAULT NULL,\n    \tstatus varchar(64) NOT NULL,\n    \tkey(table_schema, table_name, create_time),\n    \tkey(parent_table_id, create_time),\n    \tkey(create_time)\n\t);"]
[2023/08/01 18:02:39.527 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:83, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.543 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=40] [neededSchemaVersion=41] ["start time"=1.883041ms] [gotSchemaVersion=41] [phyTblIDs="[82]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.545 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.545 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=83] [version=41]
[2023/08/01 18:02:39.547 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=41] ["take time"=6.029291ms] [job="ID:83, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.558 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:83, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:82, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.511 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.570 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=83]
[2023/08/01 18:02:39.570 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.571 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=41] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"] [user=]
[2023/08/01 18:02:39.578 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.573 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.578 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.573 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_global_task (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    \ttask_key VARCHAR(256) NOT NULL,\n\t\ttype VARCHAR(256) NOT NULL,\n\t\tdispatcher_id VARCHAR(256),\n\t\tstate VARCHAR(64) NOT NULL,\n\t\tstart_time TIMESTAMP,\n\t\tstate_update_time TIMESTAMP,\n\t\tmeta LONGBLOB,\n\t\tconcurrency INT(11),\n\t\tstep INT(11),\n\t\terror BLOB,\n\t\tkey(state),\n      \tUNIQUE KEY task_key(task_key)\n\t);"]
[2023/08/01 18:02:39.585 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:85, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.573 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.598 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=41] [neededSchemaVersion=42] ["start time"=1.359541ms] [gotSchemaVersion=42] [phyTblIDs="[84]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.600 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.600 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=85] [version=42]
[2023/08/01 18:02:39.601 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=42] ["take time"=4.054417ms] [job="ID:85, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.573 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.609 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:85, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:84, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.573 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.617 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=85]
[2023/08/01 18:02:39.617 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.618 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=42] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"] [user=]
[2023/08/01 18:02:39.621 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:39.622 +08:00] [ERROR] [runaway.go:145] ["try to get new runaway watch"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"] [stack="github.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:145\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96"]
[2023/08/01 18:02:39.622 +08:00] [WARN] [runaway.go:172] ["get runaway watch record failed"] [error="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist"] [errorVerbose="[schema:1146]Table 'mysql.tidb_runaway_watch' doesn't exist\ngithub.com/pingcap/errors.AddStack\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/errors.go:174\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\t/Users/zzywq/.gvm/pkgsets/go1.20.4/global/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20221009092201-b66cddb77c32/normalize.go:164\ngithub.com/pingcap/tidb/infoschema.(*infoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:207\ngithub.com/pingcap/tidb/infoschema.(*SessionExtendedInfoSchema).TableByName\n\t/Users/zzywq/code/tidb/infoschema/infoschema.go:696\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).tableByName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:483\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:1564\ngithub.com/pingcap/tidb/planner/core.(*preprocessor).Leave\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:584\ngithub.com/pingcap/tidb/parser/ast.(*TableName).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:452\ngithub.com/pingcap/tidb/parser/ast.(*TableSource).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:604\ngithub.com/pingcap/tidb/parser/ast.(*Join).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:244\ngithub.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:805\ngithub.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept\n\t/Users/zzywq/code/tidb/parser/ast/dml.go:1477\ngithub.com/pingcap/tidb/planner/core.Preprocess\n\t/Users/zzywq/code/tidb/planner/core/preprocess.go:136\ngithub.com/pingcap/tidb/executor.(*Compiler).Compile\n\t/Users/zzywq/code/tidb/executor/compiler.go:63\ngithub.com/pingcap/tidb/session.(*session).ExecuteStmt\n\t/Users/zzywq/code/tidb/session/session.go:2225\ngithub.com/pingcap/tidb/session.(*session).ExecuteInternalStmt\n\t/Users/zzywq/code/tidb/session/session.go:2145\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL.func1\n\t/Users/zzywq/code/tidb/session/session.go:2110\ngithub.com/pingcap/tidb/session.(*session).withRestrictedSQLExecutor\n\t/Users/zzywq/code/tidb/session/session.go:2096\ngithub.com/pingcap/tidb/session.(*session).ExecRestrictedSQL\n\t/Users/zzywq/code/tidb/session/session.go:2100\ngithub.com/pingcap/tidb/domain.(*SystemTableReader).Read\n\t/Users/zzywq/code/tidb/domain/runaway.go:588\ngithub.com/pingcap/tidb/domain.getRunawayWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:476\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getWatchRecord\n\t/Users/zzywq/code/tidb/domain/runaway.go:460\ngithub.com/pingcap/tidb/domain.(*runawaySyncer).getNewWatchRecords\n\t/Users/zzywq/code/tidb/domain/runaway.go:444\ngithub.com/pingcap/tidb/domain.(*Domain).updateNewAndDoneWatch\n\t/Users/zzywq/code/tidb/domain/runaway.go:143\ngithub.com/pingcap/tidb/domain.(*Domain).runawayWatchSyncLoop\n\t/Users/zzywq/code/tidb/domain/runaway.go:170\ngithub.com/pingcap/tidb/util.(*WaitGroupEnhancedWrapper).Run.func1\n\t/Users/zzywq/code/tidb/util/wait_group_wrapper.go:96\nruntime.goexit\n\t/Users/zzywq/.gvm/gos/go1.20.4/src/runtime/asm_arm64.s:1172"]
[2023/08/01 18:02:39.627 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.62 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.627 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.62 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.load_data_jobs (\n       job_id bigint(64) NOT NULL AUTO_INCREMENT,\n       expected_status ENUM('running', 'paused', 'canceled') NOT NULL DEFAULT 'running',\n       create_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n       start_time TIMESTAMP(6) NULL DEFAULT NULL,\n       update_time TIMESTAMP(6) NULL DEFAULT NULL,\n       end_time TIMESTAMP(6) NULL DEFAULT NULL,\n       data_source TEXT NOT NULL,\n       table_schema VARCHAR(64) NOT NULL,\n       table_name VARCHAR(64) NOT NULL,\n       import_mode VARCHAR(64) NOT NULL,\n       create_user VARCHAR(32) NOT NULL,\n       progress TEXT DEFAULT NULL,\n       result_message TEXT DEFAULT NULL,\n       error_message TEXT DEFAULT NULL,\n       PRIMARY KEY (job_id),\n       KEY (create_time),\n       KEY (create_user));"]
[2023/08/01 18:02:39.635 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:87, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.62 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.649 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=42] [neededSchemaVersion=43] ["start time"=1.683458ms] [gotSchemaVersion=43] [phyTblIDs="[86]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.651 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.651 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=87] [version=43]
[2023/08/01 18:02:39.652 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=43] ["take time"=4.023708ms] [job="ID:87, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.62 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.661 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:87, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:86, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.62 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.671 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=87]
[2023/08/01 18:02:39.671 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.672 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=43] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"] [user=]
[2023/08/01 18:02:39.679 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.674 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.679 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.674 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_import_jobs (\n\t\tid bigint(64) NOT NULL AUTO_INCREMENT,\n\t\tcreate_time TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),\n\t\tstart_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tupdate_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\tend_time TIMESTAMP(6) NULL DEFAULT NULL,\n\t\ttable_schema VARCHAR(64) NOT NULL,\n\t\ttable_name VARCHAR(64) NOT NULL,\n\t\ttable_id bigint(64) NOT NULL,\n\t\tcreated_by VARCHAR(300) NOT NULL,\n\t\tparameters text NOT NULL,\n\t\tsource_file_size bigint(64) NOT NULL,\n\t\tstatus VARCHAR(64) NOT NULL,\n\t\tstep VARCHAR(64) NOT NULL,\n\t\tsummary text DEFAULT NULL,\n\t\terror_message TEXT DEFAULT NULL,\n\t\tPRIMARY KEY (id),\n\t\tKEY (created_by),\n\t\tKEY (status));"]
[2023/08/01 18:02:39.690 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:89, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.674 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.705 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=43] [neededSchemaVersion=44] ["start time"=1.735833ms] [gotSchemaVersion=44] [phyTblIDs="[88]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.707 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.707 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=89] [version=44]
[2023/08/01 18:02:39.707 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=44] ["take time"=4.041792ms] [job="ID:89, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.674 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.719 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:89, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:88, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.674 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.730 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=89]
[2023/08/01 18:02:39.730 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.731 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=44] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:39.737 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.737 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tINDEX sql_index(resource_group_name,watch_text(700)) COMMENT \"accelerate the speed when select quarantined query\",\n\t\tINDEX time_index(end_time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:39.747 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:91, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.758 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=44] [neededSchemaVersion=45] ["start time"=1.157083ms] [gotSchemaVersion=45] [phyTblIDs="[90]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.760 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.760 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=91] [version=45]
[2023/08/01 18:02:39.761 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=45] ["take time"=4.093709ms] [job="ID:91, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.769 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:91, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:90, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.733 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.779 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=91]
[2023/08/01 18:02:39.779 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.780 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=45] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:39.792 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.792 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_queries (\n\t\tresource_group_name varchar(32) not null,\n\t\ttime TIMESTAMP NOT NULL,\n\t\tmatch_type varchar(12) NOT NULL,\n\t\taction varchar(12) NOT NULL,\n\t\toriginal_sql TEXT NOT NULL,\n\t\tplan_digest TEXT NOT NULL,\n\t\ttidb_server varchar(512),\n\t\tINDEX plan_index(plan_digest(64)) COMMENT \"accelerate the speed when select runaway query\",\n\t\tINDEX time_index(time) COMMENT \"accelerate the speed when querying with active watch\"\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:39.801 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:93, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.812 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=45] [neededSchemaVersion=46] ["start time"=1.072166ms] [gotSchemaVersion=46] [phyTblIDs="[92]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.814 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.814 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=93] [version=46]
[2023/08/01 18:02:39.814 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=46] ["take time"=4.035375ms] [job="ID:93, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.822 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:93, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:92, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.782 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.829 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=93]
[2023/08/01 18:02:39.829 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.830 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=46] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"] [user=]
[2023/08/01 18:02:39.841 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.841 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS `mysql`.`tidb_timers` (\n\t\tID BIGINT(64) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t\tNAMESPACE VARCHAR(256) NOT NULL,\n\t\tTIMER_KEY VARCHAR(256) NOT NULL,\n\t\tTIMER_DATA BLOB,\n\t\tTIMEZONE VARCHAR(64) NOT NULL,\n\t\tSCHED_POLICY_TYPE VARCHAR(32) NOT NULL,\n\t\tSCHED_POLICY_EXPR VARCHAR(256) NOT NULL,\n\t\tHOOK_CLASS VARCHAR(64) NOT NULL,\n\t\tWATERMARK TIMESTAMP DEFAULT NULL,\n\t\tENABLE TINYINT(2) NOT NULL,\n\t\tTIMER_EXT JSON NOT NULL,\n\t\tEVENT_STATUS VARCHAR(32) NOT NULL,\n\t\tEVENT_ID VARCHAR(64) NOT NULL,\n\t\tEVENT_DATA BLOB,\n\t\tEVENT_START TIMESTAMP DEFAULT NULL,\n\t\tSUMMARY_DATA BLOB,\n\t\tCREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\tUPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\t\tVERSION BIGINT(64) UNSIGNED NOT NULL,\n\t\tPRIMARY KEY (ID),\n\t\tUNIQUE KEY timer_key(NAMESPACE, TIMER_KEY),\n\t\tKEY hook_class(HOOK_CLASS)\n\t)"]
[2023/08/01 18:02:39.850 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:95, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.869 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=46] [neededSchemaVersion=47] ["start time"=2.004708ms] [gotSchemaVersion=47] [phyTblIDs="[94]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.870 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.870 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=95] [version=47]
[2023/08/01 18:02:39.872 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=47] ["take time"=6.045917ms] [job="ID:95, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.886 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:95, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:94, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.833 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.896 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=95]
[2023/08/01 18:02:39.897 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:39.908 +08:00] [INFO] [session.go:3931] ["CRUCIAL OPERATION"] [conn=0] [schemaVersion=47] [cur_db=mysql] [sql="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"] [user=]
[2023/08/01 18:02:39.914 +08:00] [INFO] [ddl_worker.go:238] ["add DDL jobs"] [category=ddl] ["batch count"=1] [jobs="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0; "] [table=true]
[2023/08/01 18:02:39.914 +08:00] [INFO] [ddl.go:1074] ["start DDL job"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"] [query="CREATE TABLE IF NOT EXISTS mysql.tidb_runaway_watch_done (\n\t\tid BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n\t\trecord_id BIGINT(20) not null,\n\t\tresource_group_name varchar(32) not null,\n\t\tstart_time datetime(6) NOT NULL,\n\t\tend_time datetime(6),\n\t\twatch bigint(10) NOT NULL,\n\t\twatch_text TEXT NOT NULL,\n\t\tsource varchar(512) NOT NULL,\n\t\taction bigint(10),\n\t\tdone_time TIMESTAMP(6) NOT NULL\n\t) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;"]
[2023/08/01 18:02:39.923 +08:00] [INFO] [ddl_worker.go:981] ["run DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:97, Type:create table, State:queueing, SchemaState:none, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.935 +08:00] [INFO] [domain.go:247] ["diff load InfoSchema success"] [currentSchemaVersion=47] [neededSchemaVersion=48] ["start time"=1.234333ms] [gotSchemaVersion=48] [phyTblIDs="[96]"] [actionTypes="[3]"]
[2023/08/01 18:02:39.937 +08:00] [INFO] [domain.go:825] ["session manager is nil"]
[2023/08/01 18:02:39.937 +08:00] [INFO] [domain.go:844] ["mdl gets lock, update to owner"] [jobID=97] [version=48]
[2023/08/01 18:02:39.938 +08:00] [INFO] [ddl_worker.go:1211] ["wait latest schema version changed(get the metadata lock if tidb_enable_metadata_lock is true)"] [category=ddl] [ver=48] ["take time"=4.061834ms] [job="ID:97, Type:create table, State:done, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:2, start time: 2023-08-01 18:02:39.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.946 +08:00] [INFO] [ddl_worker.go:602] ["finish DDL job"] [worker="worker 25, tp general"] [category=ddl] [job="ID:97, Type:create table, State:synced, SchemaState:public, SchemaID:1, TableID:96, RowCount:0, ArgLen:0, start time: 2023-08-01 18:02:39.91 +0800 CST, Err:<nil>, ErrCount:0, SnapshotVersion:0"]
[2023/08/01 18:02:39.954 +08:00] [INFO] [ddl.go:1176] ["DDL job is finished"] [category=ddl] [jobID=97]
[2023/08/01 18:02:39.954 +08:00] [INFO] [callback.go:139] ["performing DDL change, must reload"]
[2023/08/01 18:02:40.048 +08:00] [INFO] [bootstrap.go:702] ["bootstrap successful"] ["take time"=2.427068792s]
[2023/08/01 18:02:40.621 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=139c5bca-d340-4660-b234-91a831ce7c82] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:40.621 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:40.621 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 26, tp add index"] [category=ddl] ["take time"=14.833µs]
[2023/08/01 18:02:40.621 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 27, tp add index"] [category=ddl] ["take time"=2.416µs]
[2023/08/01 18:02:40.621 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:40.621 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 25, tp general"] [category=ddl] ["take time"=2.75µs]
[2023/08/01 18:02:40.621 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:40.621 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:40.626 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=139c5bca-d340-4660-b234-91a831ce7c82] ["take time"=577.302125ms]
[2023/08/01 18:02:40.626 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=139c5bca-d340-4660-b234-91a831ce7c82]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:40.626 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:40.626 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=577.685333ms]
[2023/08/01 18:02:40.626 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=0dfc1244-714d-4a96-a531-3678cfe0cdc0] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:40.627 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:40.627 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:40.693 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=51.932792ms]
[2023/08/01 18:02:40.693 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:40.693 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f] [runWorker=true]
[2023/08/01 18:02:40.694 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:40.694 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:40.694 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:40.694 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:40.694 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:40.694 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:40.694 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:40.695 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:40.698 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:40.698 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:40.699 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:40.716 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:40.720 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:40.723 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:40.723 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:40.723 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:40.723 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:40.724 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:40.724 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:40.724 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:40.724 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.724 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.724 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=0dfc1244-714d-4a96-a531-3678cfe0cdc0] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:40.725 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:40.725 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:40.731 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:40.789 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=50.641625ms]
[2023/08/01 18:02:40.789 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:40.789 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985] [runWorker=true]
[2023/08/01 18:02:40.790 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:40.790 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:40.790 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:40.790 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:40.790 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:40.790 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:40.794 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:40.794 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:40.795 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:40.816 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:40.821 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:40.824 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:40.824 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:40.824 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:40.824 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:40.825 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:40.825 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:40.825 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:40.826 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.826 +08:00] [INFO] [tidb.go:80] ["new domain"] [store=0dfc1244-714d-4a96-a531-3678cfe0cdc0] ["ddl lease"=500ms] ["stats lease"=-1ns] ["index usage sync lease"=0s]
[2023/08/01 18:02:40.826 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.826 +08:00] [WARN] [controller.go:165] ["[resource group controller] server does not save config, load config failed"]
[2023/08/01 18:02:40.826 +08:00] [INFO] [controller.go:142] ["load resource controller config"] [config="{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.125,\"read-per-batch-base-cost\":0.5,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-per-batch-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}"]
[2023/08/01 18:02:40.829 +08:00] [INFO] [controller.go:352] ["[resource group controller] create resource group cost controller"] [name=default]
[2023/08/01 18:02:40.890 +08:00] [INFO] [domain.go:279] ["full load InfoSchema success"] [currentSchemaVersion=0] [neededSchemaVersion=48] ["start time"=50.53825ms]
[2023/08/01 18:02:40.891 +08:00] [INFO] [domain.go:594] ["full load and reset schema validator"]
[2023/08/01 18:02:40.891 +08:00] [INFO] [ddl.go:762] ["start DDL"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a] [runWorker=true]
[2023/08/01 18:02:40.891 +08:00] [INFO] [ddl.go:725] ["start delRangeManager OK"] [category=ddl] ["is a emulator"=true]
[2023/08/01 18:02:40.891 +08:00] [INFO] [delete_range.go:160] ["start delRange emulator"] [category=ddl]
[2023/08/01 18:02:40.891 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:40.891 +08:00] [WARN] [env.go:54] ["initialize environment failed"] [category=ddl-ingest] ["storage limitation"="only support TiKV storage"] ["current storage"=unistore] ["lightning is initialized"=false]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:40.891 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:40.891 +08:00] [WARN] [domain.go:1274] ["pd / etcd client not provided, won't begin Advancer."]
[2023/08/01 18:02:40.896 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:40.896 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:40.896 +08:00] [WARN] [sysvar_cache.go:50] ["sysvar cache is empty, triggering rebuild"]
[2023/08/01 18:02:40.913 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:40.918 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:40.920 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:40.920 +08:00] [INFO] [domain.go:2064] ["dumpFileGcChecker started"]
[2023/08/01 18:02:40.920 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:40.920 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:40.921 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:40.921 +08:00] [INFO] [wait_group_wrapper.go:130] ["background process started"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:40.921 +08:00] [INFO] [domain.go:1456] ["dist task scheduler started"]
[2023/08/01 18:02:40.921 +08:00] [INFO] [mockstore.go:188] ["domain DDL IDs"] [IDs="[63bbfc57-e839-4a88-9ce2-747ee55e4a2f,4b020732-5cee-41aa-bcb9-bcedeee32985,e85c1622-8c75-4b57-b395-1fed94e7fe1a]"]
[2023/08/01 18:02:40.921 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.921 +08:00] [INFO] [task_manager.go:216] ["scale ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=0] [newCount=4]
[2023/08/01 18:02:40.941 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:40.941 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:41.921 +08:00] [INFO] [dispatcher_manager.go:129] ["dispatch task loop start"]
[2023/08/01 18:02:41.921 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/01 18:02:41.921 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/01 18:02:42.224 +08:00] [INFO] [dispatcher.go:99] ["execute one task"] ["task ID"=1] [state=pending] [concurrency=8]
[2023/08/01 18:02:42.694 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:42.729 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:42.729 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=pending] [concurrency=8] [subtasks=3]
[2023/08/01 18:02:42.733 +08:00] [INFO] [dispatcher.go:182] ["mockOwnerChange called"]
[2023/08/01 18:02:42.759 +08:00] [INFO] [job_table.go:324] ["get global state and global state change"] [category=ddl] [oldState=false] [currState=false]
[2023/08/01 18:02:42.759 +08:00] [INFO] [job_table.go:339] ["the owner sets owner operator value"] [category=ddl] [ownerOp=none]
[2023/08/01 18:02:42.790 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:42.828 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4000] [id=1]
[2023/08/01 18:02:42.828 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4000] [id=1] [type=Example]
[2023/08/01 18:02:42.891 +08:00] [INFO] [info.go:1149] [SetTiFlashGroupConfig]
[2023/08/01 18:02:42.921 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=e85c1622-8c75-4b57-b395-1fed94e7fe1a]
[2023/08/01 18:02:42.921 +08:00] [INFO] [dispatcher_manager.go:135] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/01 18:02:42.921 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/01 18:02:42.930 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4001] [id=1]
[2023/08/01 18:02:42.930 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4001] [id=1] [type=Example]
[2023/08/01 18:02:43.028 +08:00] [INFO] [manager.go:200] ["detect new subtask"] [dist_task_manager=:4002] [id=1]
[2023/08/01 18:02:43.028 +08:00] [INFO] [manager.go:257] [onRunnableTask] [dist_task_manager=:4002] [id=1] [type=Example]
[2023/08/01 18:02:43.131 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:43.134 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=1]
[2023/08/01 18:02:43.135 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.135 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.135 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.233 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4001, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:43.237 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4001, task_id: 1"] [cnt=3] [subtask-id=2]
[2023/08/01 18:02:43.237 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.237 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.237 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4001, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.331 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4002, task_id: 1"] [step=1] [concurrency=8]
[2023/08/01 18:02:43.334 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4002, task_id: 1"] [cnt=3] [subtask-id=3]
[2023/08/01 18:02:43.334 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.334 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.334 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4002, task_id: 1"] [step=1] [minimal-task=]
[2023/08/01 18:02:43.724 +08:00] [INFO] [dispatcher_manager.go:129] ["dispatch task loop start"]
[2023/08/01 18:02:43.724 +08:00] [INFO] [runtime.go:149] ["TimerGroupRuntime loop started"] [groupID=ttl]
[2023/08/01 18:02:43.724 +08:00] [INFO] [runtime.go:390] ["create watch chan if possible for timer runtime"] [groupID=ttl] [storeSupportWatch=true]
[2023/08/01 18:02:43.733 +08:00] [INFO] [dispatcher.go:152] ["schedule task exits"] ["task ID"=1] [error="context canceled"]
[2023/08/01 18:02:43.734 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=e85c1622-8c75-4b57-b395-1fed94e7fe1a]
[2023/08/01 18:02:44.027 +08:00] [INFO] [dispatcher.go:99] ["execute one task"] ["task ID"=1] [state=running] [concurrency=8]
[2023/08/01 18:02:44.532 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:44.532 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=running] [concurrency=8] [subtasks=1]
[2023/08/01 18:02:44.653 +08:00] [INFO] [scheduler.go:115] ["scheduler run a step"] [scheduler="id: :4000, task_id: 1"] [step=2] [concurrency=8]
[2023/08/01 18:02:44.656 +08:00] [INFO] [scheduler.go:185] ["split subTask"] [scheduler="id: :4000, task_id: 1"] [cnt=3] [subtask-id=4]
[2023/08/01 18:02:44.656 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:44.656 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:44.656 +08:00] [INFO] [scheduler.go:239] ["scheduler run a minimalTask"] [scheduler="id: :4000, task_id: 1"] [step=2] [minimal-task=]
[2023/08/01 18:02:45.031 +08:00] [INFO] [dispatcher.go:203] ["process flow, process normal"] [task-id=1]
[2023/08/01 18:02:45.031 +08:00] [INFO] [dispatcher.go:282] ["process normal flow"] ["task ID"=1] [state=running] [concurrency=8] [subtasks=0]
[2023/08/01 18:02:45.033 +08:00] [INFO] [dispatcher.go:174] ["schedule task, task is finished"] [task-id=1] [state=succeed]
[2023/08/01 18:02:45.058 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4001] [id=1] [state=succeed]
[2023/08/01 18:02:45.153 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4002] [id=1] [state=succeed]
[2023/08/01 18:02:45.263 +08:00] [INFO] [manager.go:278] ["onRunnableTask exit"] [dist_task_manager=:4000] [id=1] [state=succeed]
[2023/08/01 18:02:46.724 +08:00] [INFO] [domain.go:1478] ["stopping dist task dispatcher because the current node is not DDL owner anymore"] [id=63bbfc57-e839-4a88-9ce2-747ee55e4a2f]
[2023/08/01 18:02:46.724 +08:00] [INFO] [dispatcher_manager.go:135] ["dispatch task loop exits"] [error="context canceled"] [interval=300]
[2023/08/01 18:02:46.724 +08:00] [INFO] [runtime.go:151] ["TimerGroupRuntime loop exit"] [groupID=ttl]
[2023/08/01 18:02:46.724 +08:00] [INFO] [domain.go:1480] ["dist task dispatcher stopped"] [id=63bbfc57-e839-4a88-9ce2-747ee55e4a2f]
[2023/08/01 18:02:46.734 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:46.734 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.734 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 30, tp add index"] [category=ddl] ["take time"=12µs]
[2023/08/01 18:02:46.734 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 29, tp add index"] [category=ddl] ["take time"=16.375µs]
[2023/08/01 18:02:46.734 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.734 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 28, tp general"] [category=ddl] ["take time"=5.959µs]
[2023/08/01 18:02:46.735 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:46.735 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:46.735 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f] ["take time"=807.267375ms]
[2023/08/01 18:02:46.735 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f]
[2023/08/01 18:02:46.735 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.735 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.735 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.735 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:46.736 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:46.737 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:46.737 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:46.736 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:46.737 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:46.737 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:46.736 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:46.737 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4000]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:46.737 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:46.737 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:46.790 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:46.790 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.790 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.790 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:46.790 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:46.790 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985] ["take time"=862.538833ms]
[2023/08/01 18:02:46.790 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985]
[2023/08/01 18:02:46.790 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.791 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.791 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.791 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.791 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.801 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.801 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.801 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.801 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.801 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4001]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:46.802 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:46.802 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:46.805 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:46.825 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:46.825 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:46.922 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a] [ownerKey=/tidb/ddl/fg/owner]
[2023/08/01 18:02:46.922 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.922 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 33, tp add index"] [category=ddl] ["take time"=13.334µs]
[2023/08/01 18:02:46.922 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 32, tp add index"] [category=ddl] ["take time"=7.25µs]
[2023/08/01 18:02:46.922 +08:00] [INFO] [ddl_workerpool.go:83] ["closing workerPool"] [category=ddl]
[2023/08/01 18:02:46.922 +08:00] [INFO] [ddl_worker.go:169] ["DDL worker closed"] [worker="worker 31, tp general"] [category=ddl] ["take time"=7.292µs]
[2023/08/01 18:02:46.922 +08:00] [INFO] [delete_range.go:150] ["closing delRange"] [category=ddl]
[2023/08/01 18:02:46.922 +08:00] [INFO] [session_pool.go:99] ["closing session pool"] [category=ddl]
[2023/08/01 18:02:46.923 +08:00] [INFO] [ddl.go:885] ["DDL closed"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a] ["take time"=995.249458ms]
[2023/08/01 18:02:46.923 +08:00] [INFO] [ddl.go:717] ["stop DDL"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a]
[2023/08/01 18:02:46.923 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.923 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [scan.go:309] ["ttlScanWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [task_manager.go:193] ["shrink ttl worker"] [ttl-worker=job-manager] [ttl-worker=task-manager] [originalCount=4] [newCount=0]
[2023/08/01 18:02:46.923 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.923 +08:00] [INFO] [del.go:261] ["ttlDeleteWorker loop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [job_manager.go:160] ["ttlJobManager loop exited."] [ttl-worker=job-manager]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:863] ["loadSchemaInLoop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:1668] ["LoadSysVarCacheLoop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:1304] ["closestReplicaReadCheckLoop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:696] ["globalConfigSyncerKeeper exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSchemaInLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=LoadSysVarCacheLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=closestReplicaReadCheckLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:2918] ["ttlJobManager exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:1618] ["loadPrivilegeInLoop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadSigningCertLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=ttlJobManager]
[2023/08/01 18:02:46.924 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=loadPrivilegeInLoop]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:642] ["topNSlowQueryLoop exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayWatchSyncLoop]
[2023/08/01 18:02:46.925 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.924 +08:00] [INFO] [domain.go:670] ["infoSyncerKeeper exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:2068] ["dumpFileGcChecker exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=runawayRecordFlushLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topNSlowQueryLoop]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:720] ["topologySyncerKeeper exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:1804] ["globalBindHandleWorkerLoop exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=dumpFileGcChecker]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:1458] ["stopping dist task scheduler"]
[2023/08/01 18:02:46.925 +08:00] [INFO] [handle_hist.go:189] ["SubLoadWorker exited."]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=infoSyncerKeeper]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalBindHandleWorkerLoop]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=mdlCheckLoop]
[2023/08/01 18:02:46.924 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=globalConfigSyncerKeeper]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=topologySyncerKeeper]
[2023/08/01 18:02:46.925 +08:00] [INFO] [manager.go:170] ["fetchAndFastCancelTasks done"] [dist_task_manager=:4002]
[2023/08/01 18:02:46.925 +08:00] [INFO] [manager.go:150] ["fetchAndHandleRunnableTasks done"] [dist_task_manager=:4002]
[2023/08/01 18:02:46.925 +08:00] [INFO] [domain.go:1460] ["dist task scheduler stopped"]
[2023/08/01 18:02:46.925 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=distTaskFrameworkLoop]
[2023/08/01 18:02:47.699 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:47.699 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:47.699 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:47.723 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=63bbfc57-e839-4a88-9ce2-747ee55e4a2f] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:47.723 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:47.724 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.79588s]
[2023/08/01 18:02:47.796 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=4b020732-5cee-41aa-bcb9-bcedeee32985] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:47.796 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:47.796 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:47.797 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.868939416s]
[2023/08/01 18:02:47.909 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a] [ownerKey=/tidb/bindinfo/owner]
[2023/08/01 18:02:47.909 +08:00] [INFO] [domain.go:1847] ["handleEvolvePlanTasksLoop exited."]
[2023/08/01 18:02:47.909 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=handleEvolvePlanTasksLoop]
[2023/08/01 18:02:47.920 +08:00] [INFO] [mock.go:104] ["owner manager is canceled"] [category=ddl] [ID=e85c1622-8c75-4b57-b395-1fed94e7fe1a] [ownerKey=/tidb/stats/owner]
[2023/08/01 18:02:47.920 +08:00] [INFO] [wait_group_wrapper.go:137] ["background process exited"] [source=domain] [process=quitStatsOwner]
[2023/08/01 18:02:47.921 +08:00] [INFO] [domain.go:1027] ["domain closed"] ["take time"=1.992853542s]
[2023/08/01 18:02:47.964 +08:00] [INFO] [db.go:567] ["Closing database"]
[2023/08/01 18:02:47.965 +08:00] [INFO] [db.go:592] ["Memtable flushed"]
[2023/08/01 18:02:47.965 +08:00] [INFO] [db.go:596] ["Compaction finished"]
[2023/08/01 18:02:47.965 +08:00] [INFO] [db.go:615] ["BlobManager finished"]
[2023/08/01 18:02:47.965 +08:00] [INFO] [db.go:619] ["ResourceManager finished"]
[2023/08/01 18:02:47.965 +08:00] [INFO] [db.go:625] ["Waiting for closer"]
--- PASS: TestOwnerChange (10.44s)
PASS
ok  	github.com/pingcap/tidb/disttask/framework	39.793s
