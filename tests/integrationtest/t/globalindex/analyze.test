set tidb_enable_global_index=true;

drop table if exists t;
CREATE TABLE `t` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `c` int(11) DEFAULT NULL,
  UNIQUE KEY `idx` ((`c` + 1)),
  UNIQUE KEY `idx1` (`c`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
PARTITION BY HASH (`b`) PARTITIONS 4;
insert into t values (1,1,1),(2,2,2),(3,3,3),(4,4,4),(5,5,5);
insert into t(a) values (1), (2);
analyze table t;

--echo #Test special global index
explain select c+1 from t where (c+1)>3;
explain select c+1 from t where (c+1)>4;

--echo #Test normal global index
explain select c from t where c > 2;
explain select c from t where c > 3;

--sorted_result
--replace_column 6 <update_time> 9 <avg_col_size>
show stats_histograms where table_name='t' and Db_name='globalindex__analyze';
