set names gbk;
select @@character_set_connection;
@@character_set_connection
gbk
select @@collation_connection;
@@collation_connection
gbk_chinese_ci
set @@character_set_client=gbk;
select @@character_set_client;
@@character_set_client
gbk
set names utf8mb4;
set @@character_set_connection=gbk;
select @@character_set_connection;
@@character_set_connection
gbk
select @@collation_connection;
@@collation_connection
gbk_chinese_ci
select _gbk 'a';
Error 1115 (42000): Unsupported character introducer: 'gbk'
create table t1(a char(10) charset gbk);
create table t2(a char(10) charset gbk collate gbk_bin);
create table t3(a char(10)) charset gbk;
alter table t3 add column b char(10) charset gbk;
show create table t3;
Table	Create Table
t3	CREATE TABLE `t3` (
  `a` char(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=gbk COLLATE=gbk_chinese_ci
create table t4(a char(10));
alter table t4 add column b char(10) charset gbk;
show create table t4;
Table	Create Table
t4	CREATE TABLE `t4` (
  `a` char(10) DEFAULT NULL,
  `b` char(10) CHARACTER SET gbk COLLATE gbk_chinese_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
create table t5(a char(20), b char(20) charset utf8, c binary) charset gbk collate gbk_bin;
create database test_gbk charset gbk;
use test_gbk;
create table t1(a char(10));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(10) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=gbk COLLATE=gbk_chinese_ci
drop database test_gbk;
use executor__charset;
set names DEFAULT;
drop table if exists t;
create table t(ascii_char char(10) character set ascii,gbk_char char(10) character set gbk collate gbk_bin,latin_char char(10) character set latin1,utf8mb4_char char(10) character set utf8mb4);
insert into t values ('a', 'a', 'a', 'a'), ('a', '啊', '€', 'ㅂ');
select collation(concat(ascii_char, gbk_char)) from t;
collation(concat(ascii_char, gbk_char))
gbk_bin
gbk_bin
select collation(concat(gbk_char, ascii_char)) from t;
collation(concat(gbk_char, ascii_char))
gbk_bin
gbk_bin
select collation(concat(utf8mb4_char, gbk_char)) from t;
collation(concat(utf8mb4_char, gbk_char))
utf8mb4_bin
utf8mb4_bin
select collation(concat(gbk_char, utf8mb4_char)) from t;
collation(concat(gbk_char, utf8mb4_char))
utf8mb4_bin
utf8mb4_bin
select collation(concat('啊', convert('啊' using gbk) collate gbk_bin));
collation(concat('啊', convert('啊' using gbk) collate gbk_bin))
gbk_bin
select collation(concat(_latin1 'a', convert('啊' using gbk) collate gbk_bin));
collation(concat(_latin1 'a', convert('啊' using gbk) collate gbk_bin))
gbk_bin
select collation(concat(latin_char, gbk_char)) from t;
Error 1267 (HY000): Illegal mix of collations (latin1_bin,IMPLICIT) and (gbk_bin,IMPLICIT) for operation 'concat'
select collation(concat(convert('€' using latin1), convert('啊' using gbk) collate gbk_bin));
Error 1267 (HY000): Illegal mix of collations (latin1_bin,IMPLICIT) and (gbk_bin,EXPLICIT) for operation 'concat'
select collation(concat(utf8mb4_char, gbk_char collate gbk_bin)) from t;
Error 1267 (HY000): Illegal mix of collations (utf8mb4_bin,IMPLICIT) and (gbk_bin,EXPLICIT) for operation 'concat'
select collation(concat('ㅂ', convert('啊' using gbk) collate gbk_bin));
Error 1267 (HY000): Illegal mix of collations (utf8mb4_bin,COERCIBLE) and (gbk_bin,EXPLICIT) for operation 'concat'
select collation(concat(ascii_char collate ascii_bin, gbk_char)) from t;
Error 1267 (HY000): Illegal mix of collations (ascii_bin,EXPLICIT) and (gbk_bin,IMPLICIT) for operation 'concat'
drop table if exists t;
create table t(a char(20) charset gbk, b char(20) charset gbk, primary key (a(2)));
insert into t values ('a', '中文'), ('中文', '中文'), ('一二三', '一二三'), ('b', '一二三');
select * from t;
a	b
a	中文
b	一二三
一二三	一二三
中文	中文
drop table t;
create table t(a char(20) charset gbk, b char(20) charset gbk, unique index idx_a(a(2)));
insert into t values ('a', '中文'), ('中文', '中文'), ('一二三', '一二三'), ('b', '一二三');
select * from t;
a	b
a	中文
b	一二三
一二三	一二三
中文	中文
select 'a' collate utf8_roman_ci;
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
select cast('a' as char) collate utf8_roman_ci;
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set names utf8 collate utf8_roman_ci;
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set session collation_server = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set session collation_database = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set session collation_connection = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set global collation_server = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set global collation_database = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
set global collation_connection = 'utf8_roman_ci';
Error 1273 (HY000): Unsupported collation when new collation is enabled: 'utf8_roman_ci'
CREATE TABLE t100 (id INT PRIMARY KEY) CHARACTER SET utf7;
Error 1115 (42000): Unknown character set: 'utf7'
CREATE TABLE t100 (id INT PRIMARY KEY) COLLATE utf7_modified_ci;
Error 1273 (HY000): Unknown collation: 'utf7_modified_ci'
CREATE TABLE t100 (id INT PRIMARY KEY) CHARACTER SET utf8mb4 COLLATE utf8_general_ci;
Error 1253 (42000): COLLATION 'utf8_general_ci' is not valid for CHARACTER SET 'utf8mb4'
CREATE SCHEMA s1 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
USE s1;
CREATE TABLE t11 (id INT PRIMARY KEY);
CREATE TABLE t12 (id INT PRIMARY KEY) CHARACTER SET utf8;
CREATE TABLE t13 (id INT PRIMARY KEY) CHARACTER SET utf8 COLLATE utf8_general_ci;
CREATE TABLE t14 (id INT PRIMARY KEY) COLLATE utf8_general_ci;
SELECT TABLE_NAME, TABLE_COLLATION FROM information_schema.tables WHERE TABLE_SCHEMA='s1';
TABLE_NAME	TABLE_COLLATION
t11	utf8_general_ci
t12	utf8_general_ci
t13	utf8_general_ci
t14	utf8_general_ci
DROP SCHEMA s1;
CREATE SCHEMA s2;
SHOW CREATE SCHEMA s2;
Database	Create Database
s2	CREATE DATABASE `s2` /*!40100 DEFAULT CHARACTER SET utf8mb4 */
DROP SCHEMA s2;
CREATE SCHEMA s3 DEFAULT CHARACTER SET ascii;
SHOW CREATE SCHEMA s3;
Database	Create Database
s3	CREATE DATABASE `s3` /*!40100 DEFAULT CHARACTER SET ascii */
DROP SCHEMA s3;
CREATE SCHEMA s4 DEFAULT COLLATE ascii_bin;
SHOW CREATE SCHEMA s4;
Database	Create Database
s4	CREATE DATABASE `s4` /*!40100 DEFAULT CHARACTER SET ascii */
DROP SCHEMA s4;
CREATE SCHEMA s5 DEFAULT COLLATE utf8mb4_general_ci;
SHOW CREATE SCHEMA s5;
Database	Create Database
s5	CREATE DATABASE `s5` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */
DROP SCHEMA s5;
CREATE SCHEMA s6 COLLATE utf8_unicode_ci;
USE s6;
SET SESSION default_collation_for_utf8mb4='utf8mb4_general_ci';
CREATE TABLE s6t1 (id INT PRIMARY KEY) DEFAULT CHARSET utf8mb4;
CREATE TABLE s6t2 (id INT PRIMARY KEY);
SELECT TABLE_NAME, TABLE_COLLATION FROM information_schema.tables WHERE TABLE_SCHEMA='s6';
TABLE_NAME	TABLE_COLLATION
s6t1	utf8mb4_general_ci
s6t2	utf8_unicode_ci
DROP SCHEMA s6;
