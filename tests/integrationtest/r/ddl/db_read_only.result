drop database if exists db_read_only;
create database db_read_only;
drop database if exists db_read_only_1;
create database db_read_only_1;
use db_read_only;
create table s(a int primary key);
create table t(id int primary key auto_increment, a int, b int, c varchar(1), index b(b), foreign key fk_a(b) references s(a));
create view v1 as select * from t;
create table members (
id int,
fname varchar(255),
lname varchar(255),
dob date,
data json
)
partition by range (year(dob)) (
partition pBefore1950 values less than (1950),
partition p1950 values less than (1960),
partition p1960 values less than (1970),
partition p1970 values less than (1980),
partition p1980 values less than (1990),
partition p1990 values less than (2000));
alter schema db_read_only read only 1;
alter database db_read_only charset gbk;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter database db_read_only collate utf8mb4_roman_ci;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create placement policy p1 followers=4;
alter database db_read_only placement policy p1;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter database db_read_only set tiflash replica 1;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
drop database db_read_only;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create table t1(c1 int);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create table t2 like t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create table pt (a int, b int) partition by hash(a) partitions 4;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t add column cc int not null;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t add index (a);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create index c1 on t(a);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t alter index b invisible;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t change column c c varchar(10);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t drop column c;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t drop index b;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
drop index b on t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t modify column c varchar(10);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t rename index b to b_1;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t drop foreign key fk_a;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t add foreign key fk_a1(b) references s(a);
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t partition by hash(a) partitions 4;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table members drop partition p1990;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table members truncate partition p1980;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table members add partition (partition `p1990to2010` values less than (2010));
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table members reorganize partition `p1990to2010` into
(partition p1990 values less than (2000),
partition p2000 values less than (2010),
partition p2010 values less than (2020),
partition p2020 values less than (2030),
partition pMax values less than (maxvalue));
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
rename table t to t_old;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
rename table db_read_only.t to db_read_only_1.t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter schema db_read_only read only 0;
alter schema db_read_only_1 read only 1;
rename table db_read_only.t to db_read_only_1.t;
Error 3809 (HY000): Schema 'db_read_only_1' is in read only mode.
alter schema db_read_only read only 1;
truncate table t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
drop table t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
drop view v1;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
load data local infile '' into table t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
import into t from '';
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create view v as select * from t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create or replace view v as select * from t;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
alter table t auto_increment = 10000;
Error 3809 (HY000): Schema 'db_read_only' is in read only mode.
create temporary table t(a INT);
drop temporary table t;
create global temporary table t_global(a INT) on commit delete rows;
drop global temporary table t_global;
alter table t compact tiflash replica;
alter schema db_read_only read only 0;
alter schema db_read_only_1 read only 0;
