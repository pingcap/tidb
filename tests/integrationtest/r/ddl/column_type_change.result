drop table if exists t;
create table t (a int null, b int null);
alter table t modify column b int not null;
insert into t(a, b) values (null, 1);
alter table t modify column a int not null;
Error 1265 (01000): Data truncated for column 'a' at row 1
alter table t modify column a tinyint not null;
Error 1265 (01000): Data truncated for column 'a' at row 1
alter table t modify column a bigint not null;
Error 1265 (01000): Data truncated for column 'a' at row 1
drop table if exists t;
create table t (a int not null, b int not null);
alter table t modify column b int null;
insert into t(a, b) values (1, null);
alter table t modify column a int null;
drop table if exists t;
create table t (a int unsigned, b int signed);
insert into t(a, b) values (1, 1);
alter table t modify column a int signed;
alter table t modify column b int unsigned;
drop table if exists t;
create table t (a tinyint);
alter table t modify column a smallint;
drop table if exists t;
create table t (a tinyint);
insert into t(a) values (127);
alter table t modify column a smallint;
alter table t modify column a mediumint;
alter table t modify column a int;
alter table t modify column a bigint;
drop table if exists t;
create table t (a bigint);
alter table t modify column a int;
alter table t modify column a mediumint;
alter table t modify column a smallint;
alter table t modify column a tinyint;
drop table if exists t;
create table t (a bigint);
insert into t(a) values (9223372036854775807);
alter table t modify column a int;
Error 1690 (22003): constant 9223372036854775807 overflows int
alter table t modify column a mediumint;
Error 1690 (22003): constant 9223372036854775807 overflows mediumint
alter table t modify column a smallint;
Error 1690 (22003): constant 9223372036854775807 overflows smallint
alter table t modify column a tinyint;
Error 1690 (22003): constant 9223372036854775807 overflows tinyint
admin check table t;
drop table if exists t;
create table t(a tinyint, b smallint, c mediumint, d int, e bigint, f bigint);
insert into t values(1, 11, 111, 1111, 11111, 111111);
alter table t modify a varchar(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select a from t;
a
1
alter table t modify b char(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select b from t;
b
11
alter table t modify c binary(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL,
  `c` binary(10) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select hex(c) from t;
hex(c)
31313100000000000000
alter table t modify d varbinary(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL,
  `c` binary(10) DEFAULT NULL,
  `d` varbinary(10) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select d from t;
d
1111
alter table t modify e blob(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL,
  `c` binary(10) DEFAULT NULL,
  `d` varbinary(10) DEFAULT NULL,
  `e` tinyblob DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select e from t;
e
11111
alter table t modify f text(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` char(10) DEFAULT NULL,
  `c` binary(10) DEFAULT NULL,
  `d` varbinary(10) DEFAULT NULL,
  `e` tinyblob DEFAULT NULL,
  `f` tinytext DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select f from t;
f
111111
drop table if exists t;
create table t(a tinyint, b smallint, c mediumint, d int, e bigint, f bigint);
insert into t values(1, 11, 111, 1111, 11111, 111111);
alter table t modify a decimal(2,1);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select a from t;
a
1.0
alter table t modify b year;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` year(4) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select b from t;
b
2011
alter table t modify c time;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` year(4) DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select c from t;
c
00:01:11
alter table t modify d date;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` year(4) DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` date DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select d from t;
d
2000-11-11
alter table t modify e timestamp;
set @@session.time_zone=UTC;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` year(4) DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` date DEFAULT NULL,
  `e` timestamp NULL DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select e from t;
e
2001-11-10 16:00:00
alter table t modify f datetime;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` decimal(2,1) DEFAULT NULL,
  `b` year(4) DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` date DEFAULT NULL,
  `e` timestamp NULL DEFAULT NULL,
  `f` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select f from t;
f
2011-11-11 00:00:00
drop table if exists t;
create table t(a tinyint, b smallint, c mediumint, d int, e bigint, f bigint);
insert into t values(1, 11, 111, 1111, 11111, 111111);
alter table t modify a float;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` float DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select a from t;
a
1
alter table t modify b double;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` float DEFAULT NULL,
  `b` double DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select b from t;
b
11
alter table t modify c bit(10);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` float DEFAULT NULL,
  `b` double DEFAULT NULL,
  `c` bit(10) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select hex(c) from t;
hex(c)
6F
alter table t modify d json;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` float DEFAULT NULL,
  `b` double DEFAULT NULL,
  `c` bit(10) DEFAULT NULL,
  `d` json DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL,
  `f` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select d from t;
d
1111
drop table if exists t;
create table t(a tinyint, b smallint, c mediumint, d int, e bigint);
insert into t values(1, 1, 1, 11111, 11111);
alter table t modify a enum("a", "b");
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` enum('a','b') DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select a from t;
a
a
alter table t modify b set("a", "b");
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` enum('a','b') DEFAULT NULL,
  `b` set('a','b') DEFAULT NULL,
  `c` mediumint(9) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  `e` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select b from t;
b
a
alter table t modify d enum("11111", "22222");
Error 1265 (01000): Data truncated for column 'd', value is '11111'
alter table t modify e set("11111", "22222");
Error 1265 (01000): Data truncated for column 'e', value is '11111'
set @@session.time_zone=default;
drop table if exists t;
create table t(b varchar(10));
insert into t values ('aaa   ');
alter table t change column b b char(10);
alter table t add index idx(b);
alter table t change column b b varchar(10);
select b from t use index(idx);
b
aaa
select b from t ignore index(idx);
b
aaa
admin check table t;
drop table if exists t;
create table t (a varchar(10));
insert into t values ('aaa   ');
select a from t;
a
aaa   
alter table t modify column a char(10);
select a from t;
a
aaa
set @@session.time_zone=UTC;
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('123', '123', '123', '123', '123', '123', '123', '123');
alter table t modify c tinyint;
alter table t modify vc tinyint;
alter table t modify bny tinyint;
alter table t modify vbny tinyint;
alter table t modify bb tinyint;
alter table t modify txt tinyint;
alter table t modify e tinyint;
alter table t modify s tinyint;
select * from t;
c	vc	bny	vbny	bb	txt	e	s
123	123	123	123	123	123	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('17305', '17305', '17305', '17305', '17305', '17305', '123', '123');
alter table t modify c int;
alter table t modify vc int;
alter table t modify bny int;
alter table t modify vbny int;
alter table t modify bb int;
alter table t modify txt int;
alter table t modify e int;
alter table t modify s int;
select * from t;
c	vc	bny	vbny	bb	txt	e	s
17305	17305	17305	17305	17305	17305	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('17305867', '17305867', '17305867', '17305867', '17305867', '17305867', '123', '123');
alter table t modify c bigint;
alter table t modify vc bigint;
alter table t modify bny bigint;
alter table t modify vbny bigint;
alter table t modify bb bigint;
alter table t modify txt bigint;
alter table t modify e bigint;
alter table t modify s bigint;
select * from t;
c	vc	bny	vbny	bb	txt	e	s
17305867	17305867	17305867	17305867	17305867	17305867	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('1', '1', '1', '1', '1', '1', '123', '123');
alter table t modify c bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type char(8) to bit(1) is currently unsupported yet
alter table t modify vc bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type varchar(8) to bit(1) is currently unsupported yet
alter table t modify bny bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type binary(8) to bit(1) is currently unsupported yet
alter table t modify vbny bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type varbinary(8) to bit(1) is currently unsupported yet
alter table t modify bb bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type blob to bit(1) is currently unsupported yet
alter table t modify txt bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type text to bit(1) is currently unsupported yet
alter table t modify e bit;
alter table t modify s bit;
select hex(c),hex(vc),hex(bny),hex(vbny),hex(bb),hex(txt),hex(e),hex(s) from t;
hex(c)	hex(vc)	hex(bny)	hex(vbny)	hex(bb)	hex(txt)	hex(e)	hex(s)
31	31	3100000000000000	31	31	31	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('123.45', '123.45', '123.45', '123.45', '123.45', '123.45', '123', '123');
alter table t modify c decimal(7, 4);
alter table t modify vc decimal(7, 4);
alter table t modify bny decimal(7, 4);
Error 1292 (22007): Truncated incorrect decimal(7,4) value: '123.45  '
alter table t modify vbny decimal(7, 4);
alter table t modify bb decimal(7, 4);
alter table t modify txt decimal(7, 4);
alter table t modify e decimal(7, 4);
alter table t modify s decimal(7, 4);
select hex(c),hex(vc),hex(bny),hex(vbny),hex(bb),hex(txt),hex(e),hex(s) from t;
hex(c)	hex(vc)	hex(bny)	hex(vbny)	hex(bb)	hex(txt)	hex(e)	hex(s)
7B	7B	3132332E34350000	7B	7B	7B	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('123.45', '123.45', '123.45', '123.45', '123.45', '123.45', '123', '123');
alter table t modify c double(7, 4);
alter table t modify vc double(7, 4);
alter table t modify bny double(7, 4);
alter table t modify vbny double(7, 4);
alter table t modify bb double(7, 4);
alter table t modify txt double(7, 4);
alter table t modify e double(7, 4);
alter table t modify s double(7, 4);
select * from t;
c	vc	bny	vbny	bb	txt	e	s
123.45	123.45	123.45	123.45	123.45	123.45	1	1
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('20200826', '2008261', '20200826', '200826', '2020-08-26', '08-26 19:35:41', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888');
alter table t modify c date;
alter table t modify vc date;
alter table t modify bny date;
alter table t modify vbny date;
alter table t modify bb date;
alter table t modify txt date;
Error 1292 (22007): Incorrect date value: '08-26 19:35:41'
alter table t modify e date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type enum('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to date is currently unsupported yet
alter table t modify s date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type set('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to date is currently unsupported yet
select * from t;
c	vc	bny	vbny	bb	txt	e	s
2020-08-26	2020-08-26	2020-08-26	2020-08-26	2020-08-26	08-26 19:35:41	2020-07-15 18:32:17.888	2020-07-15 18:32:17.888
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('19:35:41', '19:35:41', '19:35:41', '19:35:41', '19:35:41.45678', '19:35:41.45678', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888');
alter table t modify c time;
alter table t modify vc time;
alter table t modify bny time;
alter table t modify vbny time;
alter table t modify bb time;
alter table t modify txt time;
alter table t modify e time;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type enum('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to time is currently unsupported yet
alter table t modify s time;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type set('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to time is currently unsupported yet
select * from t;
c	vc	bny	vbny	bb	txt	e	s
19:35:41	19:35:41	19:35:41	19:35:41	19:35:41	19:35:41	2020-07-15 18:32:17.888	2020-07-15 18:32:17.888
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
alter table t modify c char(23);
alter table t modify vc varchar(23);
alter table t modify bny binary(23);
alter table t modify vbny varbinary(23);
insert into t values ('2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888');
alter table t modify c datetime;
alter table t modify vc datetime;
alter table t modify bny datetime;
alter table t modify vbny datetime;
alter table t modify bb datetime;
alter table t modify txt datetime;
alter table t modify e datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type enum('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to datetime is currently unsupported yet
alter table t modify s datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type set('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to datetime is currently unsupported yet
select * from t;
c	vc	bny	vbny	bb	txt	e	s
2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:17.888	2020-07-15 18:32:17.888
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
alter table t modify c char(23);
alter table t modify vc varchar(23);
alter table t modify bny binary(23);
alter table t modify vbny varbinary(23);
insert into t values ('2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888');
alter table t modify c timestamp;
alter table t modify vc timestamp;
alter table t modify bny timestamp;
alter table t modify vbny timestamp;
alter table t modify bb timestamp;
alter table t modify txt timestamp;
alter table t modify e timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type enum('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to timestamp is currently unsupported yet
alter table t modify s timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type set('123','2020-07-15 18:32:17.888','str','{"k1": "value"}') to timestamp is currently unsupported yet
select * from t;
c	vc	bny	vbny	bb	txt	e	s
2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:18	2020-07-15 18:32:17.888	2020-07-15 18:32:17.888
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('2020', '91', '2', '2020', '20', '99', '2020-07-15 18:32:17.888', '2020-07-15 18:32:17.888');
alter table t modify c year;
alter table t modify vc year;
alter table t modify bny year;
alter table t modify vbny year;
alter table t modify bb year;
alter table t modify txt year;
alter table t modify e year;
alter table t modify s year;
select * from t;
c	vc	bny	vbny	bb	txt	e	s
2020	1991	2002	2020	2020	1999	2002	2002
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
alter table t modify c char(15);
alter table t modify vc varchar(15);
alter table t modify bny binary(15);
alter table t modify vbny varbinary(15);
insert into t values ('{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}', '{"k1": "value"}');
alter table t modify c json;
alter table t modify vc json;
alter table t modify bny json;
alter table t modify vbny json;
alter table t modify bb json;
alter table t modify txt json;
alter table t modify e json;
alter table t modify s json;
select * from t;
c	vc	bny	vbny	bb	txt	e	s
{"k1": "value"}	{"k1": "value"}	{"k1": "value"}	{"k1": "value"}	{"k1": "value"}	{"k1": "value"}	{"k1": "value"}	{"k1": "value"}
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
insert into t values ('123x', 'x123', 'abc', 'datetime', 'timestamp', 'date', '123', '123');
alter table t modify c int;
Error 1292 (22007): Truncated incorrect DOUBLE value: '123x'
alter table t modify vc smallint;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'x123'
alter table t modify bny bigint;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'abc     '
alter table t modify vbny datetime;
Error 1292 (22007): Incorrect datetime value: 'datetime'
alter table t modify bb timestamp;
Error 1292 (22007): Incorrect timestamp value: 'timestamp'
alter table t modify txt date;
Error 1292 (22007): Incorrect date value: 'date'
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
alter table t modify vc varchar(20);
insert into t(c, vc) values ('1x', '20200915110836');
alter table t modify c year;
Error 1292 (22007): Truncated incorrect DOUBLE value: '1x'
alter table t modify vc time;
select vc from t;
vc
11:08:36
drop table if exists t;
create table t (
c char(8),
vc varchar(8),
bny binary(8),
vbny varbinary(8),
bb blob,
txt text,
e enum('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}'),
s set('123', '2020-07-15 18:32:17.888', 'str', '{"k1": "value"}')
);
alter table t modify c char(15);
insert into t(c) values ('{"k1": "value"');
insert into t(e, s) values ('str', 'str');
alter table t modify c json;
Error 3140 (22032): Invalid JSON text: The document root must not be followed by other values.
alter table t modify e json;
Error 3140 (22032): Invalid JSON text: The document root must not be followed by other values.
alter table t modify s json;
Error 3140 (22032): Invalid JSON text: The document root must not be followed by other values.
insert into t(vc) values ('abc');
alter table t modify vc decimal(5,3);
Error 1292 (22007): Truncated incorrect DECIMAL value: 'abc'
set @@session.time_zone=default;
set @@session.time_zone=UTC;
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d tinyint;
Error 1690 (22003): constant -258 overflows tinyint
alter table t modify n tinyint;
Error 1690 (22003): constant 333 overflows tinyint
alter table t modify r tinyint;
Error 1690 (22003): constant 2e+06 overflows tinyint
alter table t modify db tinyint;
Error 1690 (22003): constant 3.23232323e+08 overflows tinyint
alter table t modify f32 tinyint;
alter table t modify f64 tinyint;
Error 1690 (22003): constant -2.22222222222e+11 overflows tinyint
alter table t modify b tinyint;
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d int;
alter table t modify n int;
alter table t modify r int;
alter table t modify db int;
alter table t modify f32 int;
alter table t modify f64 int;
Error 1690 (22003): constant -2.22222222222e+11 overflows int
alter table t modify b int;
select * from t;
d	n	r	db	f32	f64	b
-258	333	2000000	323232323	-111	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d bigint;
alter table t modify n bigint;
alter table t modify r bigint;
alter table t modify db bigint;
alter table t modify f32 bigint;
alter table t modify f64 bigint;
alter table t modify b bigint;
select * from t;
d	n	r	db	f32	f64	b
-258	333	2000000	323232323	-111	-222222222222	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d bigint unsigned;
Error 1690 (22003): constant -258.1234500 overflows bigint
alter table t modify n bigint unsigned;
alter table t modify r bigint unsigned;
alter table t modify db bigint unsigned;
alter table t modify f32 bigint unsigned;
Error 1690 (22003): constant -111 overflows bigint
alter table t modify f64 bigint unsigned;
Error 1690 (22003): constant -2.22222222222e+11 overflows bigint
alter table t modify b int;
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333	2000000	323232323	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d char(20);
alter table t modify n char(20);
alter table t modify r char(20);
alter table t modify db char(20);
alter table t modify f32 char(20);
alter table t modify f64 char(20);
alter table t modify b char(20);
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d varchar(30);
alter table t modify n varchar(30);
alter table t modify r varchar(30);
alter table t modify db varchar(30);
alter table t modify f32 varchar(30);
alter table t modify f64 varchar(30);
alter table t modify b varchar(30);
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d binary(10);
Error 1265 (01000): Data truncated for column 'd', value is '-258.1234500'
alter table t modify n binary(10);
alter table t modify r binary(10);
Error 1265 (01000): Data truncated for column 'r', value is '2000000.20000002'
alter table t modify db binary(10);
Error 1265 (01000): Data truncated for column 'db', value is '323232323.32323235'
alter table t modify f32 binary(10);
Error 1265 (01000): Data truncated for column 'f32', value is '-111.111115'
alter table t modify f64 binary(10);
Error 1265 (01000): Data truncated for column 'f64', value is '-222222222222.22223'
alter table t modify b binary(10);
select hex(d),hex(n),hex(r),hex(db),hex(f32),hex(f64),hex(b) from t;
hex(d)	hex(n)	hex(r)	hex(db)	hex(f32)	hex(f64)	hex(b)
FFFFFFFFFFFFFEFE	3333332E333300000000	1E8480	13442243	FFFFFFFFFFFFFF91	FFFFFFCC4285FC72	32310000000000000000
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d varbinary(30);
alter table t modify n varbinary(30);
alter table t modify r varbinary(30);
alter table t modify db varbinary(30);
alter table t modify f32 varbinary(30);
alter table t modify f64 varbinary(30);
alter table t modify b varbinary(30);
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d blob;
alter table t modify n blob;
alter table t modify r blob;
alter table t modify db blob;
alter table t modify f32 blob;
alter table t modify f64 blob;
alter table t modify b blob;
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d text;
alter table t modify n text;
alter table t modify r text;
alter table t modify db text;
alter table t modify f32 text;
alter table t modify f64 text;
alter table t modify b text;
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111115	-222222222222.22223	21
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.111, -222222222222.222222222222222, b'10101');
alter table t modify d enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(13,7) to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify n enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(5,2) to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify r enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(20,12) to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify db enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(32,11) to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify f32 enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type float to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify f64 enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify b enum('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to enum('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111	-222222222222.22223	
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.111, -222222222222.222222222222222, b'10101');
alter table t modify d set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(13,7) to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify n set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(5,2) to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify r set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(20,12) to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify db set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(32,11) to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify f32 set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type float to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify f64 set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
alter table t modify b set('-258.12345', '333.33', '2000000.20000002', '323232323.3232323232', '-111.111', '-222222222222.222222222222222', b'10101');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to set('-258.12345','333.33','2000000.20000002','323232323.3232323232','-111.111','-222222222222.222222222222222','') is currently unsupported yet
select * from t;
d	n	r	db	f32	f64	b
-258.1234500	333.33	2000000.20000002	323232323.32323235	-111.111	-222222222222.22223	
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (200805.11, 307.333, 20200805.11111111, 20200805111307.11111111, 200805111307.11111111, 20200805111307.11111111, b'10101');
alter table t modify d datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(13,7) to datetime is currently unsupported yet
alter table t modify n datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(5,2) to datetime is currently unsupported yet
alter table t modify r datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(20,12) to datetime is currently unsupported yet
alter table t modify db datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(32,11) to datetime is currently unsupported yet
alter table t modify f32 datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type float to datetime is currently unsupported yet
alter table t modify f64 datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double to datetime is currently unsupported yet
alter table t modify b datetime;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to datetime is currently unsupported yet
select hex(d),hex(n),hex(r),hex(db),hex(f32),hex(f64),hex(b) from t;
hex(d)	hex(n)	hex(r)	hex(db)	hex(f32)	hex(f64)	hex(b)
31065	133	1343D65	125F5DD0160B	2EC0EAC000	125F5DD0160B	15
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (200805.11, 307.333, 20200805.11111111, 20200805111307.11111111, 200805111307.11111111, 20200805111307.11111111, b'10101');
alter table t modify d time;
alter table t modify n time;
alter table t modify r time;
Error 1292 (22007): Incorrect time value: '20200805.11111111'
alter table t modify db time;
alter table t modify f32 time;
alter table t modify f64 time;
alter table t modify b time;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to time is currently unsupported yet
select hex(d),hex(n),hex(r),hex(db),hex(f32),hex(f64),hex(b) from t;
hex(d)	hex(n)	hex(r)	hex(db)	hex(f32)	hex(f64)	hex(b)
32303A30383A3035	30303A30333A3037	1343D65	31313A31333A3037	31303A30303A3030	31313A31333A3037	15
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (200805.11, 307.333, 20200805.11111111, 20200805111307.11111111, 200805111307.11111111, 20200805111307.11111111, b'10101');
alter table t modify d date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(13,7) to date is currently unsupported yet
alter table t modify n date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(5,2) to date is currently unsupported yet
alter table t modify r date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(20,12) to date is currently unsupported yet
alter table t modify db date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(32,11) to date is currently unsupported yet
alter table t modify f32 date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type float to date is currently unsupported yet
alter table t modify f64 date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double to date is currently unsupported yet
alter table t modify b date;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to date is currently unsupported yet
select hex(d),hex(n),hex(r),hex(db),hex(f32),hex(f64),hex(b) from t;
hex(d)	hex(n)	hex(r)	hex(db)	hex(f32)	hex(f64)	hex(b)
31065	133	1343D65	125F5DD0160B	2EC0EAC000	125F5DD0160B	15
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (200805.11, 307.333, 20200805.11111111, 20200805111307.11111111, 200805111307.11111111, 20200805111307.11111111, b'10101');
alter table t modify d timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(13,7) to timestamp is currently unsupported yet
alter table t modify n timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type decimal(5,2) to timestamp is currently unsupported yet
alter table t modify r timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(20,12) to timestamp is currently unsupported yet
alter table t modify db timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double(32,11) to timestamp is currently unsupported yet
alter table t modify f32 timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type float to timestamp is currently unsupported yet
alter table t modify f64 timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type double to timestamp is currently unsupported yet
alter table t modify b timestamp;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type bit(5) to timestamp is currently unsupported yet
select hex(d),hex(n),hex(r),hex(db),hex(f32),hex(f64),hex(b) from t;
hex(d)	hex(n)	hex(r)	hex(db)	hex(f32)	hex(f64)	hex(b)
31065	133	1343D65	125F5DD0160B	2EC0EAC000	125F5DD0160B	15
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (200805.11, 307.333, 2.55555, 98.1111111, 2154.00001, 20200805111307.11111111, b'10101');
alter table t modify d year;
Error 1264 (22003): Out of range value for column 'd', the value is '200805.1100000'
alter table t modify n year;
Error 1264 (22003): Out of range value for column 'n', the value is '307.33'
alter table t modify r year;
alter table t modify db year;
alter table t modify f32 year;
alter table t modify f64 year;
Error 1264 (22003): Out of range value for column 'f64', the value is '20200805111307.11'
alter table t modify b year;
select * from t;
d	n	r	db	f32	f64	b
200805.1100000	307.33	2003	1998	2154	20200805111307.11	2021
drop table if exists t;
create table t (
d decimal(13, 7),
n numeric(5, 2),
r real(20, 12),
db real(32, 11),
f32 float(23),
f64 double,
b bit(5)
);
insert into t values (-258.12345, 333.33, 2000000.20000002, 323232323.3232323232, -111.11111111, -222222222222.222222222222222, b'10101');
alter table t modify d json;
alter table t modify n json;
alter table t modify r json;
alter table t modify db json;
alter table t modify f32 json;
alter table t modify f64 json;
alter table t modify b json;
select * from t;
d	n	r	db	f32	f64	b
-258.12345	333.33	2000000.20000002	323232323.32323235	-111.11111450195312	-222222222222.22223	"\u0015"
set @@session.time_zone=default;
set @@session.time_zone=UTC;
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d tinyint;
Error 1690 (22003): constant 20201030 overflows tinyint
alter table t modify t tinyint;
Error 1690 (22003): constant 193825 overflows tinyint
alter table t modify dt tinyint;
Error 1690 (22003): constant 20201030082133 overflows tinyint
alter table t modify tmp tinyint;
Error 1690 (22003): constant 20201030082133 overflows tinyint
alter table t modify y tinyint;
Error 1690 (22003): constant 2020 overflows tinyint
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d int;
alter table t modify t int;
alter table t modify dt int;
Error 1690 (22003): constant 20201030082133 overflows int
alter table t modify tmp int;
Error 1690 (22003): constant 20201030082133 overflows int
alter table t modify y int;
select * from t;
d	t	dt	tmp	y
20201030	193825	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d bigint;
alter table t modify t bigint;
alter table t modify dt bigint;
alter table t modify tmp bigint;
alter table t modify y bigint;
select * from t;
d	t	dt	tmp	y
20201030	193825	20201030082133	20201030082133	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type date to bit(1) is currently unsupported yet
alter table t modify t bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type time(3) to bit(1) is currently unsupported yet
alter table t modify dt bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type datetime(6) to bit(1) is currently unsupported yet
alter table t modify tmp bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type timestamp(6) to bit(1) is currently unsupported yet
alter table t modify y bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type year(4) to bit(1) is currently unsupported yet
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d decimal;
alter table t modify t decimal(10, 4);
alter table t modify dt decimal(20, 6);
alter table t modify tmp decimal(22, 8);
alter table t modify y decimal;
select * from t;
d	t	dt	tmp	y
20201030	193825.0010	20201030082133.455555	20201030082133.45555500	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d double;
alter table t modify t double(10, 4);
alter table t modify dt double(20, 6);
alter table t modify tmp double(22, 8);
alter table t modify y double;
select * from t;
d	t	dt	tmp	y
20201030	193825.001	20201030082133.457	20201030082133.457	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d char(30);
alter table t modify t char(30);
alter table t modify dt char(30);
alter table t modify tmp char(30);
alter table t modify y char(30);
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d varchar(30);
alter table t modify t varchar(30);
alter table t modify dt varchar(30);
alter table t modify tmp varchar(30);
alter table t modify y varchar(30);
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d binary(30);
alter table t modify t binary(30);
alter table t modify dt binary(30);
alter table t modify tmp binary(30);
alter table t modify y binary(30);
select hex(d), hex(t), hex(dt), hex(tmp), hex(y) from t;
hex(d)	hex(t)	hex(dt)	hex(tmp)	hex(y)
323032302D31302D33300000000000000000000000000000000000000000	31393A33383A32352E303031000000000000000000000000000000000000	323032302D31302D33302030383A32313A33332E34353535353500000000	323032302D31302D33302030383A32313A33332E34353535353500000000	323032300000000000000000000000000000000000000000000000000000
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d varbinary(30);
alter table t modify t varbinary(30);
alter table t modify dt varbinary(30);
alter table t modify tmp varbinary(30);
alter table t modify y varbinary(30);
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d text;
alter table t modify t text;
alter table t modify dt text;
alter table t modify tmp text;
alter table t modify y text;
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d blob;
alter table t modify t blob;
alter table t modify dt blob;
alter table t modify tmp blob;
alter table t modify y blob;
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d enum('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type date to enum('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify t enum('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type time(3) to enum('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify dt enum('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type datetime(6) to enum('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify tmp enum('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type timestamp(6) to enum('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify y enum('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type year(4) to enum('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d set('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type date to set('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify t set('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type time(3) to set('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify dt set('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type datetime(6) to set('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify tmp set('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type timestamp(6) to set('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
alter table t modify y set('2020-10-30', '19:38:25.001', '20201030082133.455555', '2020');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type year(4) to set('2020-10-30','19:38:25.001','20201030082133.455555','2020') is currently unsupported yet
select * from t;
d	t	dt	tmp	y
2020-10-30	19:38:25.001	2020-10-30 08:21:33.455555	2020-10-30 08:21:33.455555	2020
drop table if exists t;
create table t (
d date,
t time(3),
dt datetime(6),
tmp timestamp(6),
y year
);
insert into t values ('2020-10-30', '19:38:25.001', 20201030082133.455555, 20201030082133.455555, 2020);
alter table t modify d json;
alter table t modify t json;
alter table t modify dt json;
alter table t modify tmp json;
alter table t modify y json;
select * from t;
d	t	dt	tmp	y
"2020-10-30"	"19:38:25.001000"	"2020-10-30 08:21:33.455555"	"2020-10-30 08:21:33.455555"	2020
set @@session.time_zone=default;
set @@session.time_zone=UTC;
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj tinyint;
Error 1292 (22007): Truncated incorrect INTEGER value: '{"obj": 100}'
alter table t modify arr tinyint;
Error 1292 (22007): Truncated incorrect INTEGER value: '[-1, 0, 1]'
alter table t modify nil tinyint;
Error 1292 (22007): Truncated incorrect INTEGER value: 'null'
alter table t modify t tinyint;
alter table t modify f tinyint;
alter table t modify i tinyint;
alter table t modify ui tinyint;
alter table t modify f64 tinyint;
Error 1690 (22003): constant 3.23232323e+08 overflows tinyint
alter table t modify str tinyint;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'json string'
alter table t modify nul tinyint;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1	0	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj int;
Error 1292 (22007): Truncated incorrect INTEGER value: '{"obj": 100}'
alter table t modify arr int;
Error 1292 (22007): Truncated incorrect INTEGER value: '[-1, 0, 1]'
alter table t modify nil int;
Error 1292 (22007): Truncated incorrect INTEGER value: 'null'
alter table t modify t int;
alter table t modify f int;
alter table t modify i int;
alter table t modify ui int;
alter table t modify f64 int;
alter table t modify str int;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'json string'
alter table t modify nul int;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1	0	-22	22	323232323	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj bigint;
Error 1292 (22007): Truncated incorrect INTEGER value: '{"obj": 100}'
alter table t modify arr bigint;
Error 1292 (22007): Truncated incorrect INTEGER value: '[-1, 0, 1]'
alter table t modify nil bigint;
Error 1292 (22007): Truncated incorrect INTEGER value: 'null'
alter table t modify t bigint;
alter table t modify f bigint;
alter table t modify i bigint;
alter table t modify ui bigint;
alter table t modify f64 bigint;
alter table t modify str bigint;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'json string'
alter table t modify nul bigint;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1	0	-22	22	323232323	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj bigint unsigned;
Error 1292 (22007): Truncated incorrect INTEGER value: '{"obj": 100}'
alter table t modify arr bigint unsigned;
Error 1292 (22007): Truncated incorrect INTEGER value: '[-1, 0, 1]'
alter table t modify nil bigint unsigned;
Error 1292 (22007): Truncated incorrect INTEGER value: 'null'
alter table t modify t bigint unsigned;
alter table t modify f bigint unsigned;
alter table t modify i bigint unsigned;
Error 1690 (22003): constant -22 overflows bigint
alter table t modify ui bigint unsigned;
alter table t modify f64 bigint unsigned;
alter table t modify str bigint unsigned;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'json string'
alter table t modify nul bigint unsigned;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1	0	-22	22	323232323	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify arr bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify nil bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify t bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify f bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify i bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify ui bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify f64 bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify str bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
alter table t modify nul bit;
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to bit(1) is currently unsupported yet
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj decimal(20, 10);
Error 1292 (22007): Truncated incorrect DECIMAL value: '{"obj": 100}'
alter table t modify arr decimal(20, 10);
Error 1292 (22007): Truncated incorrect DECIMAL value: '[-1, 0, 1]'
alter table t modify nil decimal(20, 10);
Error 1292 (22007): Truncated incorrect DECIMAL value: 'null'
alter table t modify t decimal(20, 10);
alter table t modify f decimal(20, 10);
alter table t modify i decimal(20, 10);
alter table t modify ui decimal(20, 10);
alter table t modify f64 decimal(20, 10);
alter table t modify str decimal(20, 10);
Error 1292 (22007): Truncated incorrect DECIMAL value: 'json string'
alter table t modify nul decimal(20, 10);
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1.0000000000	0.0000000000	-22.0000000000	22.0000000000	323232323.3232323500	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj double;
Error 1292 (22007): Truncated incorrect FLOAT value: '{"obj": 100}'
alter table t modify arr double;
Error 1292 (22007): Truncated incorrect FLOAT value: '[-1, 0, 1]'
alter table t modify nil double;
Error 1292 (22007): Truncated incorrect FLOAT value: 'null'
alter table t modify t double;
alter table t modify f double;
alter table t modify i double;
alter table t modify ui double;
alter table t modify f64 double;
alter table t modify str double;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'json string'
alter table t modify nul double;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	1	0	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj char(20);
alter table t modify arr char(20);
alter table t modify nil char(20);
alter table t modify t char(20);
alter table t modify f char(20);
alter table t modify i char(20);
alter table t modify ui char(20);
alter table t modify f64 char(20);
alter table t modify str char(20);
alter table t modify nil char(20);
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj varchar(20);
alter table t modify arr varchar(20);
alter table t modify nil varchar(20);
alter table t modify t varchar(20);
alter table t modify f varchar(20);
alter table t modify i varchar(20);
alter table t modify ui varchar(20);
alter table t modify f64 varchar(20);
alter table t modify str varchar(20);
alter table t modify nul varchar(20);
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj binary(20);
alter table t modify arr binary(20);
alter table t modify nil binary(20);
alter table t modify t binary(20);
alter table t modify f binary(20);
alter table t modify i binary(20);
alter table t modify ui binary(20);
alter table t modify f64 binary(20);
alter table t modify str binary(20);
alter table t modify nul binary(20);
select hex(obj), hex(arr), hex(nil), hex(t), hex(f), hex(i), hex(ui), hex(f64), hex(str), hex(nul) from t;
hex(obj)	hex(arr)	hex(nil)	hex(t)	hex(f)	hex(i)	hex(ui)	hex(f64)	hex(str)	hex(nul)
7B226F626A223A203130307D0000000000000000	5B2D312C20302C20315D00000000000000000000	6E756C6C00000000000000000000000000000000	7472756500000000000000000000000000000000	66616C7365000000000000000000000000000000	2D32320000000000000000000000000000000000	3232000000000000000000000000000000000000	3332333233323332332E33323332333233350000	226A736F6E20737472696E672200000000000000	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj varbinary(20);
alter table t modify arr varbinary(20);
alter table t modify nil varbinary(20);
alter table t modify t varbinary(20);
alter table t modify f varbinary(20);
alter table t modify i varbinary(20);
alter table t modify ui varbinary(20);
alter table t modify f64 varbinary(20);
alter table t modify str varbinary(20);
alter table t modify nul varbinary(20);
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj blob;
alter table t modify arr blob;
alter table t modify nil blob;
alter table t modify t blob;
alter table t modify f blob;
alter table t modify i blob;
alter table t modify ui blob;
alter table t modify f64 blob;
alter table t modify str blob;
alter table t modify nul blob;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj text;
alter table t modify arr text;
alter table t modify nil text;
alter table t modify t text;
alter table t modify f text;
alter table t modify i text;
alter table t modify ui text;
alter table t modify f64 text;
alter table t modify str text;
alter table t modify nul text;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify arr enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify nil enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify t enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify f enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify i enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify ui enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify f64 enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify str enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify nul enum('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to enum('{"obj": 100}','[-1, 0, 1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"', null);
alter table t modify obj set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify arr set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify nil set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify t set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify f set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify i set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify ui set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify f64 set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify str set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
alter table t modify nul set('{"obj": 100}', '[-1]', 'null', 'true', 'false', '-22', '22', '323232323.3232323232', '"json string"');
Error 8200 (HY000): Unsupported modify column: [ddl:8200]Unsupported modify column: change from original type json to set('{"obj": 100}','[-1]','null','true','false','-22','22','323232323.3232323232','"json string"') is currently unsupported yet
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1]	null	true	false	-22	22	323232323.32323235	"json string"	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '20200826173501', '20201123', '20200826173501.123456', '"2020-08-26 17:35:01.123456"', null);
alter table t modify obj datetime;
Error 1292 (22007): Incorrect datetime value: '{"obj": 100}'
alter table t modify arr datetime;
Error 1292 (22007): Incorrect datetime value: '[-1, 0, 1]'
alter table t modify nil datetime;
Error 1292 (22007): Incorrect datetime value: 'null'
alter table t modify t datetime;
Error 1292 (22007): Incorrect datetime value: 'true'
alter table t modify f datetime;
Error 1292 (22007): Incorrect datetime value: 'false'
alter table t modify i datetime;
alter table t modify ui datetime;
alter table t modify f64 datetime;
alter table t modify str datetime;
alter table t modify nul datetime;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	2020-08-26 17:35:01	2020-11-23 00:00:00	2020-08-26 17:35:01	2020-08-26 17:35:01	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '200805', '1111', '200805.11', '"19:35:41"', null);
alter table t modify obj time;
Error 1292 (22007): Truncated incorrect time value: '{"obj": 100}'
alter table t modify arr time;
Error 1292 (22007): Truncated incorrect time value: '[-1, 0, 1]'
alter table t modify nil time;
Error 1292 (22007): Truncated incorrect time value: 'null'
alter table t modify t time;
Error 1292 (22007): Truncated incorrect time value: 'true'
alter table t modify f time;
Error 1292 (22007): Truncated incorrect time value: 'false'
alter table t modify i time;
alter table t modify ui time;
alter table t modify f64 time;
alter table t modify str time;
alter table t modify nul time;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	20:08:05	00:11:11	20:08:05	19:35:41	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '20200826173501', '20201123', '20200826173501.123456', '"2020-08-26 17:35:01.123456"', null);
alter table t modify obj date;
Error 1292 (22007): Incorrect date value: '{"obj": 100}'
alter table t modify arr date;
Error 1292 (22007): Incorrect date value: '[-1, 0, 1]'
alter table t modify nil date;
Error 1292 (22007): Incorrect date value: 'null'
alter table t modify t date;
Error 1292 (22007): Incorrect date value: 'true'
alter table t modify f date;
Error 1292 (22007): Incorrect date value: 'false'
alter table t modify i date;
alter table t modify ui date;
alter table t modify f64 date;
alter table t modify str date;
alter table t modify nul date;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	2020-08-26	2020-11-23	2020-08-26	2020-08-26	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '20200826173501', '20201123', '20200826173501.123456', '"2020-08-26 17:35:01.123456"', null);
alter table t modify obj timestamp;
Error 1292 (22007): Incorrect timestamp value: '{"obj": 100}'
alter table t modify arr timestamp;
Error 1292 (22007): Incorrect timestamp value: '[-1, 0, 1]'
alter table t modify nil timestamp;
Error 1292 (22007): Incorrect timestamp value: 'null'
alter table t modify t timestamp;
Error 1292 (22007): Incorrect timestamp value: 'true'
alter table t modify f timestamp;
Error 1292 (22007): Incorrect timestamp value: 'false'
alter table t modify i timestamp;
alter table t modify ui timestamp;
alter table t modify f64 timestamp;
alter table t modify str timestamp;
alter table t modify nul timestamp;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	true	false	2020-08-26 17:35:01	2020-11-23 00:00:00	2020-08-26 17:35:01	2020-08-26 17:35:01	NULL
drop table if exists t;
create table t (
obj json,
arr json,
nil json,
t json,
f json,
i json,
ui json,
f64 json,
str json,
nul json
);
insert into t values ('{"obj": 100}', '[-1, 0, 1]', 'null', 'true', 'false', '2020', '91', '9', '"2020"', null);
alter table t modify obj year;
Error 1292 (22007): Truncated incorrect INTEGER value: '{"obj": 100}'
alter table t modify arr year;
Error 1292 (22007): Truncated incorrect INTEGER value: '[-1, 0, 1]'
alter table t modify nil year;
Error 1292 (22007): Truncated incorrect INTEGER value: 'null'
alter table t modify t year;
alter table t modify f year;
alter table t modify i year;
alter table t modify ui year;
alter table t modify f64 year;
alter table t modify str year;
alter table t modify nul year;
select * from t;
obj	arr	nil	t	f	i	ui	f64	str	nul
{"obj": 100}	[-1, 0, 1]	null	2001	0000	2020	1991	2009	2020	NULL
set @@session.time_zone=default;
drop table if exists t, t1;
create table t (col timestamp default '1971-06-09' not null, col1 int default 1, unique key(col1));
alter table t modify column col date not null;
update t set col = '2002-12-31';
update t set col = '2002-12-31' where col1 = 1;
create table t1 (col timestamp default '1971-06-09' not null, col1 int default 1, unique key(col1));
insert into t1 value('2001-01-01', 1);
alter table t1 add column col2 timestamp default '2020-06-02' not null;
alter table t1 modify column col2 date not null;
update t1 set col = '2002-11-22';
update t1 set col = '2002-12-31' where col1 = 1;
drop table if exists users, orders;
CREATE TABLE users (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, doc JSON);
CREATE TABLE orders (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, user_id INT NOT NULL, doc JSON, FOREIGN KEY fk_user_id (user_id) REFERENCES users(id));
alter table orders modify user_id int null;
show create table orders;
Table	Create Table
orders	CREATE TABLE `orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `doc` json DEFAULT NULL,
  PRIMARY KEY (`id`) /*T![clustered_index] CLUSTERED */,
  KEY `fk_user_id` (`user_id`),
  CONSTRAINT `fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists users, orders;
CREATE TABLE users (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, doc JSON);
CREATE TABLE orders (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, user_id INT NOT NULL, doc JSON, FOREIGN KEY fk_user_id (user_id) REFERENCES users(id));
alter table orders change user_id user_id2 int null;
show create table orders;
Table	Create Table
orders	CREATE TABLE `orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id2` int(11) DEFAULT NULL,
  `doc` json DEFAULT NULL,
  PRIMARY KEY (`id`) /*T![clustered_index] CLUSTERED */,
  KEY `fk_user_id` (`user_id2`),
  CONSTRAINT `fk_user_id` FOREIGN KEY (`user_id2`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists users, orders;
CREATE TABLE users (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, doc JSON);
CREATE TABLE orders (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, user_id INT NOT NULL, doc JSON, FOREIGN KEY fk_user_id (user_id) REFERENCES users(id));
alter table orders modify user_id int default -1 comment "haha";
show create table orders;
Table	Create Table
orders	CREATE TABLE `orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT '-1' COMMENT 'haha',
  `doc` json DEFAULT NULL,
  PRIMARY KEY (`id`) /*T![clustered_index] CLUSTERED */,
  KEY `fk_user_id` (`user_id`),
  CONSTRAINT `fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists users, orders;
CREATE TABLE users (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, doc JSON);
CREATE TABLE orders (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, user_id INT NOT NULL, doc JSON, FOREIGN KEY fk_user_id (user_id) REFERENCES users(id));
alter table orders modify user_id bigint;
Error 3780 (HY000): Referencing column 'user_id' and referenced column 'id' in foreign key constraint 'fk_user_id' are incompatible.
drop table if exists orders, users;
drop table if exists t, t1;
create table t(a int not null, b int not null, primary key(a, b));
alter table t modify a bigint null;
Error 1171 (42000): All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
alter table t change column a a bigint null;
Error 1171 (42000): All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
create table t1(a int not null, b int not null, primary key(a));
alter table t modify a bigint null;
Error 1171 (42000): All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
alter table t change column a a bigint null;
Error 1171 (42000): All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead
drop table if exists t;
create table t (a int(10) unsigned default null, b bigint unsigned, c tinyint unsigned);
insert into t values (1, 1, 1);
alter table t modify column a datetime;
Error 1292 (22007): Incorrect datetime value: '1'
alter table t modify column b datetime;
Error 1292 (22007): Incorrect datetime value: '1'
alter table t modify column c datetime;
Error 1292 (22007): Incorrect datetime value: '1'
drop table if exists t;
create table t (a int(10) unsigned default null, b bigint unsigned, c tinyint unsigned);
insert into t values (4294967295, 18446744073709551615, 255);
alter table t modify column a datetime;
Error 1292 (22007): Incorrect datetime value: '4294967295'
alter table t modify column b datetime;
Error 1292 (22007): Incorrect datetime value: '18446744073709551615'
alter table t modify column c datetime;
Error 1292 (22007): Incorrect datetime value: '255'
drop table if exists t;
CREATE TABLE `t` (  `a` int(11) DEFAULT NULL,  `b` varchar(10) DEFAULT NULL,  `c` decimal(10,2) DEFAULT NULL,  KEY `idx1` (`a`),  UNIQUE KEY `idx2` (`a`),  KEY `idx3` (`a`,`b`),  KEY `idx4` (`a`,`b`,`c`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;
insert into t values(19,1,1),(17,2,2);
alter table t modify a bit(5) not null;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` bit(5) NOT NULL,
  `b` varchar(10) DEFAULT NULL,
  `c` decimal(10,2) DEFAULT NULL,
  KEY `idx1` (`a`),
  UNIQUE KEY `idx2` (`a`),
  KEY `idx3` (`a`,`b`),
  KEY `idx4` (`a`,`b`,`c`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
select hex(a), hex(b), hex(c) from t;
hex(a)	hex(b)	hex(c)
11	32	2
13	31	1
drop table if exists t;
create table t(a int);
insert into t values(1);
alter table t add column b bit(51) default 1512687856625472;
alter table t modify column b decimal(30,18);
Error 1690 (22003): DECIMAL value is out of range in '(30, 18)'
drop table if exists t;
create table tbl_1 (col int);
insert into tbl_1 values (9790);
alter table tbl_1 add column col1 blob(6) collate binary not null;
select col1 from tbl_1;
col1

alter table tbl_1 change column col1 col2 int;
Error 1292 (22007): Truncated incorrect DOUBLE value: ''
select col1 from tbl_1;
col1

drop table if exists t;
create table tbl(col_214 decimal(30,8));
replace into tbl values (89687.448);
alter table tbl add column col_279 binary(197) collate binary default 'RAWTdm' not null;
select hex(col_279) from tbl;
hex(col_279)
52415754646D0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
alter table tbl change column col_279 col_287 int;
Error 1292 (22007): Truncated incorrect DOUBLE value: 'RAWTdm                                                                                                                          '
select hex(col_279) from tbl;
hex(col_279)
52415754646D0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
drop table if exists t;
create table t(a binary(10) default 't');
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` binary(10) DEFAULT 't\0\0\0\0\0\0\0\0\0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists t;
create table t(a bit(13) not null) collate utf8mb4_general_ci;
insert into t values ( 4047 );
alter table t change column a a binary(248) collate binary default 't';
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` binary(248) DEFAULT 't\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
select hex(a) from t;
hex(a)
3430343700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
drop table if exists t;
create table t(a bit(13) not null) collate utf8mb4_general_ci;
insert into t values ( 4047 );
alter table t change column a a varbinary(248) collate binary default 't';
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varbinary(248) DEFAULT 't'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci
select * from t;
a
4047
drop table if exists t;
create table t (a text, unique index idx(a(2)));
alter table t modify column a int;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` int(11) DEFAULT NULL,
  UNIQUE KEY `idx` (`a`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists t;
create table t (a char(255), unique index idx(a(2)));
alter table t modify column a float;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` float DEFAULT NULL,
  UNIQUE KEY `idx` (`a`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists t;
create table t (a char(255), b text, unique index idx(a(2), b(10)));
alter table t modify column b int;
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` char(255) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  UNIQUE KEY `idx` (`a`(2),`b`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists t;
create table t(a char(250), unique key idx(a(10)));
alter table t modify a char(9);
show create table t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` char(9) DEFAULT NULL,
  UNIQUE KEY `idx` (`a`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
drop table if exists t;
create table t(a varchar(700), key(a(700)));
alter table t change column a a tinytext;
Error 1170 (42000): BLOB/TEXT column 'a' used in key specification without a key length
drop table if exists t;
CREATE TABLE `t` (  `a` datetime DEFAULT '1764-06-11 02:46:14') ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin COMMENT='7b84832e-f857-4116-8872-82fc9dcc4ab3';
insert into `t` values();
alter table `t` change column `a` `b` TIMESTAMP NULL DEFAULT '2015-11-14 07:12:24';
Error 1292 (22007): Incorrect timestamp value: '1764-06-11 02:46:14'
drop table if exists t;
CREATE TABLE `t` (  `a` date DEFAULT '1764-06-11 02:46:14') ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin COMMENT='7b84832e-f857-4116-8872-82fc9dcc4ab3';
insert into `t` values();
alter table `t` change column `a` `b` TIMESTAMP NULL DEFAULT '2015-11-14 07:12:24';
Error 1292 (22007): Incorrect timestamp value: '1764-06-11'
drop table if exists t;
select timestamp(cast('1000-11-11 12-3-1' as date));
timestamp(cast('1000-11-11 12-3-1' as date))
1000-11-11 00:00:00
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = 'STRICT_TRANS_TABLES';
select date(0);
date(0)
0000-00-00
select time(0);
time(0)
00:00:00
alter table t modify column a date;
Error 1292 (22007): Incorrect date value: '0'
alter table t modify column a datetime;
Error 1292 (22007): Incorrect datetime value: '0'
alter table t modify column a timestamp;
Error 1292 (22007): Incorrect timestamp value: '0'
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = 'STRICT_ALL_TABLES';
select date(0);
date(0)
0000-00-00
select time(0);
time(0)
00:00:00
alter table t modify column a date;
Error 1292 (22007): Incorrect date value: '0'
alter table t modify column a datetime;
Error 1292 (22007): Incorrect datetime value: '0'
alter table t modify column a timestamp;
Error 1292 (22007): Incorrect timestamp value: '0'
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = 'NO_ZERO_IN_DATE';
select date(0);
date(0)
0000-00-00
select time(0);
time(0)
00:00:00
alter table t modify column a date;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a datetime;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a timestamp;
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = 'NO_ZERO_DATE';
select date(0);
date(0)
NULL
select time(0);
time(0)
00:00:00
alter table t modify column a date;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a datetime;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a timestamp;
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = 'ALLOW_INVALID_DATES';
select date(0);
date(0)
0000-00-00
select time(0);
time(0)
00:00:00
alter table t modify column a date;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a datetime;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a timestamp;
drop table if exists t;
create table t (a int);
insert into t values (0);
set @@sql_mode = '';
select date(0);
date(0)
0000-00-00
select time(0);
time(0)
00:00:00
alter table t modify column a date;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a datetime;
drop table if exists t;
create table t (a int);
insert into t values (0);
alter table t modify column a timestamp;
drop table if exists t;
set @@sql_mode = default;
drop table if exists t;
create table t (a time default 0);
insert into t values ();
insert into t values (NULL);
insert into t values ('12');
insert into t values ('00:19:59');
insert into t values ('00:20:13');
alter table t modify column a year;
select a from t;
a
0000
NULL
2012
1959
2013
drop table if exists t;
create table t (id bigint primary key, a time);
replace into t values (1, '10:10:10');
alter table t modify column a year;
Error 1264 (22003): Out of range value for column 'a', the value is '10:10:10'
replace into t values (1, '12:13:14');
alter table t modify column a year;
Error 1264 (22003): Out of range value for column 'a', the value is '12:13:14'
set @@sql_mode = '';
alter table t modify column a year;
show warnings;
Level	Code	Message
Warning	1264	Out of range value for column 'a', the value is '12:13:14'
set @@sql_mode = default;
drop table if exists t;
create table t (a mediumint unsigned);
insert into t values (180857);
alter table t modify column a time;
select a from t;
a
18:08:57
drop table if exists t;
drop table if exists t;
create table t (a bit(45));
insert into t values (1174717);
alter table t modify column a varchar(31) collate utf8mb4_general_ci;
select a from t;
a
1174717
drop table if exists t;
create table t(a char(250));
insert into t values('0123456789abc');
alter table t modify a char(12) null;
Error 1265 (01000): Data truncated for column 'a', value is '0123456789abc'
drop table if exists t;
create table t(a int null);
insert into t values();
select * from t;
a
NULL
alter table t modify column a timestamp NOT NULL;
select count(*) from t where a = null;
count(*)
0
drop table if exists t;
create table t(a int null);
insert into t values();
select * from t;
a
NULL
alter table t change column a a1 time NOT NULL;
Error 1265 (01000): Data truncated for column 'a1' at row 1
drop table if exists t;
create table t(a timestamp null);
insert into t values();
select * from t;
a
NULL
alter table t modify column a timestamp NOT NULL;
Error 1265 (01000): Data truncated for column 'a' at row 1
drop table if exists t;
create table t(a timestamp NOT NULL);
insert into t values();
Error 1364 (HY000): Field 'a' doesn't have a default value
insert into t values(null);
Error 1048 (23000): Column 'a' cannot be null
drop table if exists t;
create table t (a float(6,2));
insert into t values (36.43), (24.1);
alter table t modify a double(6,2);
select a from t;
a
36.43
24.1
drop table if exists t;
create table t (a float(6,2));
insert into t values (36.43), (24.1);
alter table t modify a float(6,1);
select a from t;
a
36.4
24.1
drop table if exists t;
create table t (a double(6,2));
insert into t values (36.43), (24.1);
alter table t modify a double(6,1);
select a from t;
a
36.4
24.1
alter table t modify a float(6,1);
select a from t;
a
36.4
24.1
drop table if exists t;
create table t(id int primary key auto_increment, c1 timestamp default '2020-07-10 01:05:08');
insert into t values();
select * from t;
id	c1
1	2020-07-10 01:05:08
alter table t modify column c1 bigint;
select * from t;
id	c1
1	20200710010508
alter table t modify c1 timestamp;
set @@session.time_zone=UTC;
select * from t;
id	c1
1	2020-07-09 17:05:08
set time_zone = '+00:00';
drop table if exists t;
create table t(id int primary key auto_increment, c1 timestamp default '2020-07-10 01:05:08', index idx(c1));
insert into t values();
select * from t;
id	c1
1	2020-07-10 01:05:08
alter table t modify column c1 bigint;
alter table t add index idx1(id, c1);
select * from t;
id	c1
1	20200710010508
admin check table t;
set @@session.time_zone='+5:00';
alter table t modify c1 timestamp;
select * from t;
id	c1
1	2020-07-10 01:05:08
set @@session.time_zone='-8:00';
select * from t;
id	c1
1	2020-07-09 12:05:08
admin check table t;
drop table if exists t;
create table t(id int primary key auto_increment, c1 timestamp default '2020-07-10 01:05:08', index idx(c1));
insert into t values();
select * from t;
id	c1
1	2020-07-10 01:05:08
alter table t modify column c1 bigint;
alter table t add index idx1(id, c1);
select * from t;
id	c1
1	20200710010508
admin check table t;
set @@session.time_zone= default;
alter table t modify c1 timestamp;
select * from t;
id	c1
1	2020-07-10 01:05:08
set @@session.time_zone='SYSTEM';
select * from t;
id	c1
1	2020-07-10 01:05:08
admin check table t;
drop table if exists t;
set @@session.time_zone=UTC;
create table t(id int primary key auto_increment, c1 timestamp default '1990-04-15 18:00:00');
insert into t values();
select * from t;
id	c1
1	1990-04-15 18:00:00
set @@session.time_zone='Asia/Shanghai';
alter table t modify column c1 bigint;
select * from t;
id	c1
1	19900416030000
alter table t modify c1 timestamp default '1990-04-15 18:00:00';
set @@session.time_zone=UTC;
insert into t values();
select * from t;
id	c1
1	1990-04-15 18:00:00
2	1990-04-15 09:00:00
drop table if exists t;
set @@session.time_zone='-8:00';
create table t(id int primary key auto_increment, c1 timestamp default '2016-03-13 02:30:00', index idx(c1));
insert into t values();
select * from t;
id	c1
1	2016-03-13 02:30:00
set @@session.time_zone='America/Los_Angeles';
alter table t modify column c1 bigint;
select * from t;
id	c1
1	20160313033000
alter table t add index idx1(id, c1);
admin check table t;
set @@session.time_zone=default;
drop table if exists t;
create table t (a int);
alter table t add index(a);
set @@sql_mode='';
insert into t values(128),(129);
alter table t modify column a tinyint;
show warnings;
Level	Code	Message
Warning	1690	2 warnings with this error code, first warning: constant 128 overflows tinyint
set @@sql_mode=default;
drop table if exists t;
create table t (a date);
insert into t values('9999-01-01');
set @@sql_mode='ALLOW_INVALID_DATES';
alter table t modify a timestamp;
select * from t;
a
0000-00-00 00:00:00
drop table if exists t;
create table t (a date);
insert into t values('9999-01-01');
set @@sql_mode='ALLOW_INVALID_DATES,STRICT_TRANS_TABLES';
alter table t modify a timestamp;
Error 1292 (22007): Incorrect timestamp value: '9999-01-01'
select * from t;
a
9999-01-01
drop table t;
CREATE TABLE t (a date, b timestamp AS (a));
set @@sql_mode='';
insert into t (a) values('9999-01-01');
select * from t;
a	b
9999-01-01	0000-00-00 00:00:00
