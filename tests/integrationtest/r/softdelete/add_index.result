create table message (id int primary key, text varchar(10)) softdelete retention 7 day;
set @@tidb_translate_softdelete_sql = true;
insert into message values (1, '24h'), (2, '24h');
alter table message add index i_text(text);
explain select * from message where text = '24h';
id	estRows	task	access object	operator info
Projection_4	0.01	root		softdelete__add_index.message.id, softdelete__add_index.message.text
└─IndexLookUp_9	0.01	root		
  ├─IndexRangeScan_6(Build)	10.00	cop[tikv]	table:message, index:i_text(text)	range:["24h","24h"], keep order:false, stats:pseudo
  └─Selection_8(Probe)	0.01	cop[tikv]		isnull(softdelete__add_index.message._tidb_softdelete_time)
    └─TableRowIDScan_7	10.00	cop[tikv]	table:message	keep order:false, stats:pseudo
drop table message;
create table message (id int primary key nonclustered, text varchar(10)) softdelete retention 7 day;
insert into message values (1, '24h'), (2, '24h');
alter table message add index i_text(text);
explain select * from message where text = '24h';
id	estRows	task	access object	operator info
Projection_4	0.01	root		softdelete__add_index.message.id, softdelete__add_index.message.text
└─IndexLookUp_9	0.01	root		
  ├─IndexRangeScan_6(Build)	10.00	cop[tikv]	table:message, index:i_text(text)	range:["24h","24h"], keep order:false, stats:pseudo
  └─Selection_8(Probe)	0.01	cop[tikv]		isnull(softdelete__add_index.message._tidb_softdelete_time)
    └─TableRowIDScan_7	10.00	cop[tikv]	table:message	keep order:false, stats:pseudo
drop table message;
