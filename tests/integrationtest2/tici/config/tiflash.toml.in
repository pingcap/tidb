# Copyright 2026 PingCAP, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

listen_host = "${TIFLASH_LISTEN_HOST}"
path = "${TIFLASH_DATA_DIR}"
tmp_path = "${TIFLASH_TMP_DIR}"
capacity = "${TIFLASH_CAPACITY}"

[application]
runAsDaemon = true

[flash]
service_addr = "${TIFLASH_SERVICE_ADDR}"
tidb_status_addr = "${TIDB_STATUS_ADDR}"

[flash.proxy]
config = "${TIFLASH_PROXY_CONFIG}"
log-file = "${TIFLASH_PROXY_LOG_FILE}"

[logger]
count = 20
level = "info"
log = "${TIFLASH_LOG_PATH}"
errorlog = "${TIFLASH_ERROR_LOG_PATH}"
size = "1000M"

[raft]
pd_addr = "${PD_ADDR}"

[profiles]
[profiles.default]
max_memory_usage = 10000000000

[tici]
[tici.reader_node]
addr = "${TICI_READER_ADDR}"
heartbeat_interval = "${TICI_READER_HEARTBEAT_INTERVAL}"
max_heartbeat_retries = ${TICI_READER_MAX_HEARTBEAT_RETRIES}
heartbeat_worker_count = ${TICI_READER_HEARTBEAT_WORKER_COUNT}

[tici.reader-node]
addr = "${TICI_READER_ADDR}"
heartbeat-interval = "${TICI_READER_HEARTBEAT_INTERVAL}"
max-heartbeat-retries = ${TICI_READER_MAX_HEARTBEAT_RETRIES}
heartbeat-worker-count = ${TICI_READER_HEARTBEAT_WORKER_COUNT}

[tici.logger]
filename = "./logs/tici_searchlib.log"
level = "info"

[tici.storage]
data-dir = "./data/tici/searchlib"

[tici.s3]
access-key = "${S3_ACCESS_KEY}"
bucket = "${S3_BUCKET}"
endpoint = "${S3_ENDPOINT}"
prefix = "${S3_PREFIX}"
region = "${S3_REGION}"
secret-key = "${S3_SECRET_KEY}"
use-path-style = ${S3_USE_PATH_STYLE}
